/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __markAsModule = (target) => __defProp(target, "__esModule", { value: true });
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[Object.keys(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  __markAsModule(target);
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __reExport = (target, module2, desc) => {
  if (module2 && typeof module2 === "object" || typeof module2 === "function") {
    for (let key of __getOwnPropNames(module2))
      if (!__hasOwnProp.call(target, key) && key !== "default")
        __defProp(target, key, { get: () => module2[key], enumerable: !(desc = __getOwnPropDesc(module2, key)) || desc.enumerable });
  }
  return target;
};
var __toModule = (module2) => {
  return __reExport(__markAsModule(__defProp(module2 != null ? __create(__getProtoOf(module2)) : {}, "default", module2 && module2.__esModule && "default" in module2 ? { get: () => module2.default, enumerable: true } : { value: module2, enumerable: true })), module2);
};
var __async = (__this, __arguments, generator) => {
  return new Promise((resolve, reject) => {
    var fulfilled = (value) => {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    };
    var rejected = (value) => {
      try {
        step(generator.throw(value));
      } catch (e) {
        reject(e);
      }
    };
    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);
    step((generator = generator.apply(__this, __arguments)).next());
  });
};

// node_modules/obsidian-daily-notes-interface/dist/main.js
var require_main = __commonJS({
  "node_modules/obsidian-daily-notes-interface/dist/main.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var obsidian = require("obsidian");
    var DEFAULT_DAILY_NOTE_FORMAT = "YYYY-MM-DD";
    var DEFAULT_WEEKLY_NOTE_FORMAT = "gggg-[W]ww";
    var DEFAULT_MONTHLY_NOTE_FORMAT = "YYYY-MM";
    var DEFAULT_QUARTERLY_NOTE_FORMAT = "YYYY-[Q]Q";
    var DEFAULT_YEARLY_NOTE_FORMAT = "YYYY";
    function shouldUsePeriodicNotesSettings(periodicity) {
      var _a, _b;
      const periodicNotes = window.app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a[periodicity]) == null ? void 0 : _b.enabled);
    }
    function getDailyNoteSettings() {
      var _a, _b, _c, _d;
      try {
        const { internalPlugins, plugins } = window.app;
        if (shouldUsePeriodicNotesSettings("daily")) {
          const { format: format2, folder: folder2, template: template2 } = ((_b = (_a = plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.daily) || {};
          return {
            format: format2 || DEFAULT_DAILY_NOTE_FORMAT,
            folder: (folder2 == null ? void 0 : folder2.trim()) || "",
            template: (template2 == null ? void 0 : template2.trim()) || ""
          };
        }
        const { folder, format, template } = ((_d = (_c = internalPlugins.getPluginById("daily-notes")) == null ? void 0 : _c.instance) == null ? void 0 : _d.options) || {};
        return {
          format: format || DEFAULT_DAILY_NOTE_FORMAT,
          folder: (folder == null ? void 0 : folder.trim()) || "",
          template: (template == null ? void 0 : template.trim()) || ""
        };
      } catch (err) {
        console.info("No custom daily note settings found!", err);
      }
    }
    function getWeeklyNoteSettings() {
      var _a, _b, _c, _d, _e, _f, _g;
      try {
        const pluginManager = window.app.plugins;
        const calendarSettings = (_a = pluginManager.getPlugin("calendar")) == null ? void 0 : _a.options;
        const periodicNotesSettings = (_c = (_b = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _b.settings) == null ? void 0 : _c.weekly;
        if (shouldUsePeriodicNotesSettings("weekly")) {
          return {
            format: periodicNotesSettings.format || DEFAULT_WEEKLY_NOTE_FORMAT,
            folder: ((_d = periodicNotesSettings.folder) == null ? void 0 : _d.trim()) || "",
            template: ((_e = periodicNotesSettings.template) == null ? void 0 : _e.trim()) || ""
          };
        }
        const settings = calendarSettings || {};
        return {
          format: settings.weeklyNoteFormat || DEFAULT_WEEKLY_NOTE_FORMAT,
          folder: ((_f = settings.weeklyNoteFolder) == null ? void 0 : _f.trim()) || "",
          template: ((_g = settings.weeklyNoteTemplate) == null ? void 0 : _g.trim()) || ""
        };
      } catch (err) {
        console.info("No custom weekly note settings found!", err);
      }
    }
    function getMonthlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("monthly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.monthly) || {};
        return {
          format: settings.format || DEFAULT_MONTHLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom monthly note settings found!", err);
      }
    }
    function getQuarterlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("quarterly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.quarterly) || {};
        return {
          format: settings.format || DEFAULT_QUARTERLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom quarterly note settings found!", err);
      }
    }
    function getYearlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("yearly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.yearly) || {};
        return {
          format: settings.format || DEFAULT_YEARLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom yearly note settings found!", err);
      }
    }
    function join2(...partSegments) {
      let parts = [];
      for (let i = 0, l = partSegments.length; i < l; i++) {
        parts = parts.concat(partSegments[i].split("/"));
      }
      const newParts = [];
      for (let i = 0, l = parts.length; i < l; i++) {
        const part = parts[i];
        if (!part || part === ".")
          continue;
        else
          newParts.push(part);
      }
      if (parts[0] === "")
        newParts.unshift("");
      return newParts.join("/");
    }
    function basename(fullPath) {
      let base = fullPath.substring(fullPath.lastIndexOf("/") + 1);
      if (base.lastIndexOf(".") != -1)
        base = base.substring(0, base.lastIndexOf("."));
      return base;
    }
    function ensureFolderExists2(path) {
      return __async(this, null, function* () {
        const dirs = path.replace(/\\/g, "/").split("/");
        dirs.pop();
        if (dirs.length) {
          const dir = join2(...dirs);
          if (!window.app.vault.getAbstractFileByPath(dir)) {
            yield window.app.vault.createFolder(dir);
          }
        }
      });
    }
    function getNotePath(directory, filename) {
      return __async(this, null, function* () {
        if (!filename.endsWith(".md")) {
          filename += ".md";
        }
        const path = obsidian.normalizePath(join2(directory, filename));
        yield ensureFolderExists2(path);
        return path;
      });
    }
    function getTemplateInfo(template) {
      return __async(this, null, function* () {
        const { metadataCache, vault } = window.app;
        const templatePath = obsidian.normalizePath(template);
        if (templatePath === "/") {
          return Promise.resolve(["", null]);
        }
        try {
          const templateFile = metadataCache.getFirstLinkpathDest(templatePath, "");
          const contents = yield vault.cachedRead(templateFile);
          const IFoldInfo = window.app.foldManager.load(templateFile);
          return [contents, IFoldInfo];
        } catch (err) {
          console.error(`Failed to read the daily note template '${templatePath}'`, err);
          new obsidian.Notice("Failed to read the daily note template");
          return ["", null];
        }
      });
    }
    function getDateUID4(date, granularity = "day") {
      const ts = date.clone().startOf(granularity).format();
      return `${granularity}-${ts}`;
    }
    function removeEscapedCharacters(format) {
      return format.replace(/\[[^\]]*\]/g, "");
    }
    function isFormatAmbiguous(format, granularity) {
      if (granularity === "week") {
        const cleanFormat = removeEscapedCharacters(format);
        return /w{1,2}/i.test(cleanFormat) && (/M{1,4}/.test(cleanFormat) || /D{1,4}/.test(cleanFormat));
      }
      return false;
    }
    function getDateFromFile3(file, granularity) {
      return getDateFromFilename(file.basename, granularity);
    }
    function getDateFromPath(path, granularity) {
      return getDateFromFilename(basename(path), granularity);
    }
    function getDateFromFilename(filename, granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      };
      const format = getSettings[granularity]().format.split("/").pop();
      const noteDate = window.moment(filename, format, true);
      if (!noteDate.isValid()) {
        return null;
      }
      if (isFormatAmbiguous(format, granularity)) {
        if (granularity === "week") {
          const cleanFormat = removeEscapedCharacters(format);
          if (/w{1,2}/i.test(cleanFormat)) {
            return window.moment(filename, format.replace(/M{1,4}/g, "").replace(/D{1,4}/g, ""), false);
          }
        }
      }
      return noteDate;
    }
    var DailyNotesFolderMissingError = class extends Error {
    };
    function createDailyNote3(date) {
      return __async(this, null, function* () {
        const app2 = window.app;
        const { vault } = app2;
        const moment = window.moment;
        const { template, format, folder } = getDailyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)));
          app2.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getDailyNote2(date, dailyNotes) {
      var _a;
      return (_a = dailyNotes[getDateUID4(date, "day")]) != null ? _a : null;
    }
    function getAllDailyNotes2() {
      const { vault } = window.app;
      const { folder } = getDailyNoteSettings();
      const dailyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!dailyNotesFolder) {
        throw new DailyNotesFolderMissingError("Failed to find daily notes folder");
      }
      const dailyNotes = {};
      obsidian.Vault.recurseChildren(dailyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile3(note, "day");
          if (date) {
            const dateString = getDateUID4(date, "day");
            dailyNotes[dateString] = note;
          }
        }
      });
      return dailyNotes;
    }
    var WeeklyNotesFolderMissingError = class extends Error {
    };
    function getDaysOfWeek2() {
      const { moment } = window;
      let weekStart = moment.localeData()._week.dow;
      const daysOfWeek = [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ];
      while (weekStart) {
        daysOfWeek.push(daysOfWeek.shift());
        weekStart--;
      }
      return daysOfWeek;
    }
    function getDayOfWeekNumericalValue2(dayOfWeekName) {
      return getDaysOfWeek2().indexOf(dayOfWeekName.toLowerCase());
    }
    function createWeeklyNote(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getWeeklyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
            const day = getDayOfWeekNumericalValue2(dayOfWeek);
            return date.weekday(day).format(momentFormat.trim());
          }));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getWeeklyNote(date, weeklyNotes) {
      var _a;
      return (_a = weeklyNotes[getDateUID4(date, "week")]) != null ? _a : null;
    }
    function getAllWeeklyNotes2() {
      const weeklyNotes = {};
      if (!appHasWeeklyNotesPluginLoaded()) {
        return weeklyNotes;
      }
      const { vault } = window.app;
      const { folder } = getWeeklyNoteSettings();
      const weeklyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!weeklyNotesFolder) {
        throw new WeeklyNotesFolderMissingError("Failed to find weekly notes folder");
      }
      obsidian.Vault.recurseChildren(weeklyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile3(note, "week");
          if (date) {
            const dateString = getDateUID4(date, "week");
            weeklyNotes[dateString] = note;
          }
        }
      });
      return weeklyNotes;
    }
    var MonthlyNotesFolderMissingError = class extends Error {
    };
    function createMonthlyNote(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getMonthlyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getMonthlyNote(date, monthlyNotes) {
      var _a;
      return (_a = monthlyNotes[getDateUID4(date, "month")]) != null ? _a : null;
    }
    function getAllMonthlyNotes2() {
      const monthlyNotes = {};
      if (!appHasMonthlyNotesPluginLoaded()) {
        return monthlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getMonthlyNoteSettings();
      const monthlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!monthlyNotesFolder) {
        throw new MonthlyNotesFolderMissingError("Failed to find monthly notes folder");
      }
      obsidian.Vault.recurseChildren(monthlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile3(note, "month");
          if (date) {
            const dateString = getDateUID4(date, "month");
            monthlyNotes[dateString] = note;
          }
        }
      });
      return monthlyNotes;
    }
    var QuarterlyNotesFolderMissingError = class extends Error {
    };
    function createQuarterlyNote2(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getQuarterlyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getQuarterlyNote(date, quarterly) {
      var _a;
      return (_a = quarterly[getDateUID4(date, "quarter")]) != null ? _a : null;
    }
    function getAllQuarterlyNotes2() {
      const quarterly = {};
      if (!appHasQuarterlyNotesPluginLoaded()) {
        return quarterly;
      }
      const { vault } = window.app;
      const { folder } = getQuarterlyNoteSettings();
      const quarterlyFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!quarterlyFolder) {
        throw new QuarterlyNotesFolderMissingError("Failed to find quarterly notes folder");
      }
      obsidian.Vault.recurseChildren(quarterlyFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile3(note, "quarter");
          if (date) {
            const dateString = getDateUID4(date, "quarter");
            quarterly[dateString] = note;
          }
        }
      });
      return quarterly;
    }
    var YearlyNotesFolderMissingError = class extends Error {
    };
    function createYearlyNote2(date) {
      return __async(this, null, function* () {
        const { vault } = window.app;
        const { template, format, folder } = getYearlyNoteSettings();
        const [templateContents, IFoldInfo] = yield getTemplateInfo(template);
        const filename = date.format(format);
        const normalizedPath = yield getNotePath(folder, filename);
        try {
          const createdFile = yield vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
            const now = window.moment();
            const currentDate = date.clone().set({
              hour: now.get("hour"),
              minute: now.get("minute"),
              second: now.get("second")
            });
            if (calc) {
              currentDate.add(parseInt(timeDelta, 10), unit);
            }
            if (momentFormat) {
              return currentDate.format(momentFormat.substring(1).trim());
            }
            return currentDate.format(format);
          }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
          window.app.foldManager.save(createdFile, IFoldInfo);
          return createdFile;
        } catch (err) {
          console.error(`Failed to create file: '${normalizedPath}'`, err);
          new obsidian.Notice("Unable to create new file.");
        }
      });
    }
    function getYearlyNote(date, yearlyNotes) {
      var _a;
      return (_a = yearlyNotes[getDateUID4(date, "year")]) != null ? _a : null;
    }
    function getAllYearlyNotes2() {
      const yearlyNotes = {};
      if (!appHasYearlyNotesPluginLoaded()) {
        return yearlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getYearlyNoteSettings();
      const yearlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!yearlyNotesFolder) {
        throw new YearlyNotesFolderMissingError("Failed to find yearly notes folder");
      }
      obsidian.Vault.recurseChildren(yearlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile3(note, "year");
          if (date) {
            const dateString = getDateUID4(date, "year");
            yearlyNotes[dateString] = note;
          }
        }
      });
      return yearlyNotes;
    }
    function appHasDailyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const dailyNotesPlugin = app2.internalPlugins.plugins["daily-notes"];
      if (dailyNotesPlugin && dailyNotesPlugin.enabled) {
        return true;
      }
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.daily) == null ? void 0 : _b.enabled);
    }
    function appHasWeeklyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      if (app2.plugins.getPlugin("calendar")) {
        return true;
      }
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.weekly) == null ? void 0 : _b.enabled);
    }
    function appHasMonthlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.monthly) == null ? void 0 : _b.enabled);
    }
    function appHasQuarterlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.quarterly) == null ? void 0 : _b.enabled);
    }
    function appHasYearlyNotesPluginLoaded() {
      var _a, _b;
      const { app: app2 } = window;
      const periodicNotes = app2.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.yearly) == null ? void 0 : _b.enabled);
    }
    function getPeriodicNoteSettings(granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      }[granularity];
      return getSettings();
    }
    function createPeriodicNote2(granularity, date) {
      const createFn = {
        day: createDailyNote3,
        month: createMonthlyNote,
        week: createWeeklyNote
      };
      return createFn[granularity](date);
    }
    exports.DEFAULT_DAILY_NOTE_FORMAT = DEFAULT_DAILY_NOTE_FORMAT;
    exports.DEFAULT_MONTHLY_NOTE_FORMAT = DEFAULT_MONTHLY_NOTE_FORMAT;
    exports.DEFAULT_QUARTERLY_NOTE_FORMAT = DEFAULT_QUARTERLY_NOTE_FORMAT;
    exports.DEFAULT_WEEKLY_NOTE_FORMAT = DEFAULT_WEEKLY_NOTE_FORMAT;
    exports.DEFAULT_YEARLY_NOTE_FORMAT = DEFAULT_YEARLY_NOTE_FORMAT;
    exports.appHasDailyNotesPluginLoaded = appHasDailyNotesPluginLoaded;
    exports.appHasMonthlyNotesPluginLoaded = appHasMonthlyNotesPluginLoaded;
    exports.appHasQuarterlyNotesPluginLoaded = appHasQuarterlyNotesPluginLoaded;
    exports.appHasWeeklyNotesPluginLoaded = appHasWeeklyNotesPluginLoaded;
    exports.appHasYearlyNotesPluginLoaded = appHasYearlyNotesPluginLoaded;
    exports.createDailyNote = createDailyNote3;
    exports.createMonthlyNote = createMonthlyNote;
    exports.createPeriodicNote = createPeriodicNote2;
    exports.createQuarterlyNote = createQuarterlyNote2;
    exports.createWeeklyNote = createWeeklyNote;
    exports.createYearlyNote = createYearlyNote2;
    exports.getAllDailyNotes = getAllDailyNotes2;
    exports.getAllMonthlyNotes = getAllMonthlyNotes2;
    exports.getAllQuarterlyNotes = getAllQuarterlyNotes2;
    exports.getAllWeeklyNotes = getAllWeeklyNotes2;
    exports.getAllYearlyNotes = getAllYearlyNotes2;
    exports.getDailyNote = getDailyNote2;
    exports.getDailyNoteSettings = getDailyNoteSettings;
    exports.getDateFromFile = getDateFromFile3;
    exports.getDateFromPath = getDateFromPath;
    exports.getDateUID = getDateUID4;
    exports.getMonthlyNote = getMonthlyNote;
    exports.getMonthlyNoteSettings = getMonthlyNoteSettings;
    exports.getPeriodicNoteSettings = getPeriodicNoteSettings;
    exports.getQuarterlyNote = getQuarterlyNote;
    exports.getQuarterlyNoteSettings = getQuarterlyNoteSettings;
    exports.getTemplateInfo = getTemplateInfo;
    exports.getWeeklyNote = getWeeklyNote;
    exports.getWeeklyNoteSettings = getWeeklyNoteSettings;
    exports.getYearlyNote = getYearlyNote;
    exports.getYearlyNoteSettings = getYearlyNoteSettings;
  }
});

// src/main.ts
__export(exports, {
  DAYS_PER_UNIT: () => DAYS_PER_UNIT,
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS,
  FILEINFO_TO_DISPLAY: () => FILEINFO_TO_DISPLAY,
  FILEINFO_TO_DISPLAY_DAY: () => FILEINFO_TO_DISPLAY_DAY,
  GRANULARITY_LIST: () => GRANULARITY_LIST,
  GRANULARITY_TO_PERIODICITY: () => GRANULARITY_TO_PERIODICITY,
  default: () => DailyNoteOutlinePlugin3
});
var import_obsidian9 = __toModule(require("obsidian"));

// src/view.ts
var import_obsidian6 = __toModule(require("obsidian"));
var import_obsidian7 = __toModule(require("obsidian"));
var import_obsidian_daily_notes_interface4 = __toModule(require_main());

// src/drawUI.ts
var import_obsidian3 = __toModule(require("obsidian"));

// src/createAndOpenDailyNote.ts
var import_obsidian_daily_notes_interface = __toModule(require_main());
function createAndOpenDailyNote(granularity, date, allFiles) {
  return __async(this, null, function* () {
    const { workspace } = window.app;
    const createFile = () => __async(this, null, function* () {
      let newNote;
      switch (granularity) {
        case "quarter":
          newNote = yield (0, import_obsidian_daily_notes_interface.createQuarterlyNote)(date);
          break;
        case "year":
          newNote = yield (0, import_obsidian_daily_notes_interface.createYearlyNote)(date);
          break;
        default:
          newNote = yield (0, import_obsidian_daily_notes_interface.createPeriodicNote)(granularity, date);
      }
      yield workspace.getLeaf().openFile(newNote);
    });
    const dailynote = allFiles[(0, import_obsidian_daily_notes_interface.getDateUID)(date, granularity)];
    if (!dailynote) {
      yield createFile();
    } else {
      yield workspace.getLeaf().openFile(dailynote);
    }
  });
}

// src/modalExtract.ts
var import_obsidian = __toModule(require("obsidian"));
var ModalExtract = class extends import_obsidian.Modal {
  constructor(app2, plugin, onSubmit) {
    super(app2);
    this.plugin = plugin;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    this.inputedValue = this.plugin.settings.wordsToExtract;
    const { contentEl } = this;
    contentEl.createEl("br");
    new import_obsidian.Setting(contentEl).setName("Extract by word or phrase:").addText((text) => {
      text.setValue(this.plugin.settings.wordsToExtract).inputEl.select();
      text.onChange((value) => {
        this.inputedValue = value;
      });
    });
    new import_obsidian.Setting(contentEl).addButton((btn) => btn.setButtonText("Extract").setCta().onClick(() => __async(this, null, function* () {
      this.executeExtract();
    }))).addButton((btn) => btn.setButtonText("Cancel").onClick(() => {
      this.close();
    }));
    this.scope.register([], "Enter", (evt) => {
      this.executeExtract();
    });
  }
  onClose() {
    let { contentEl } = this;
    contentEl.empty();
  }
  executeExtract() {
    return __async(this, null, function* () {
      this.close();
      this.plugin.settings.wordsToExtract = this.inputedValue;
      yield this.plugin.saveSettings();
      this.onSubmit(true);
    });
  }
};

// src/createAndOpenPeriodicNote.ts
var import_obsidian2 = __toModule(require("obsidian"));
var DEFAULT_NOTE_FORMAT = {
  day: "YYYY-MM-DD",
  week: "gggg-[W]ww",
  month: "YYYY-MM",
  quarter: "YYYY-[Q]Q",
  year: "YYYY"
};
function createAndOpenPeriodicNote(granularity, date, calendarSet) {
  return __async(this, null, function* () {
    const { workspace } = window.app;
    let file = window.app.plugins.getPlugin("periodic-notes").cache.getPeriodicNote(calendarSet.id, granularity, date);
    if (!file) {
      const config = calendarSet[granularity];
      const format = calendarSet[granularity].format;
      const filename = date.format(format ? format : DEFAULT_NOTE_FORMAT[granularity]);
      const templateContents = yield getTemplateContents(window.app, config.templatePath);
      const renderedContents = applyTemplateTransformations(filename, granularity, date, format, templateContents);
      const destPath = yield getNoteCreationPath(window.app, filename, config);
      file = yield window.app.vault.create(destPath, renderedContents);
    }
    yield workspace.getLeaf().openFile(file);
  });
}
function getTemplateContents(app2, templatePath) {
  return __async(this, null, function* () {
    const { metadataCache, vault } = app2;
    const normalizedTemplatePath = (0, import_obsidian2.normalizePath)(templatePath != null ? templatePath : "");
    if (templatePath === "/") {
      return Promise.resolve("");
    }
    try {
      const templateFile = metadataCache.getFirstLinkpathDest(normalizedTemplatePath, "");
      return templateFile ? vault.cachedRead(templateFile) : "";
    } catch (err) {
      console.error(`Failed to read the daily note template '${normalizedTemplatePath}'`, err);
      new import_obsidian2.Notice("Failed to read the daily note template");
      return "";
    }
  });
}
function applyTemplateTransformations(filename, granularity, date, format, rawTemplateContents) {
  let templateContents = rawTemplateContents;
  templateContents = rawTemplateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename);
  if (granularity === "day") {
    templateContents = templateContents.replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const currentDate = date.clone().set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        currentDate.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return currentDate.format(momentFormat.substring(1).trim());
      }
      return currentDate.format(format);
    });
  }
  if (granularity === "week") {
    templateContents = templateContents.replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
      const day = getDayOfWeekNumericalValue(dayOfWeek);
      return date.weekday(day).format(momentFormat.trim());
    });
  }
  if (granularity === "month") {
    templateContents = templateContents.replace(/{{\s*(month)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const monthStart = date.clone().startOf("month").set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        monthStart.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return monthStart.format(momentFormat.substring(1).trim());
      }
      return monthStart.format(format);
    });
  }
  if (granularity === "quarter") {
    templateContents = templateContents.replace(/{{\s*(quarter)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const monthStart = date.clone().startOf("quarter").set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        monthStart.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return monthStart.format(momentFormat.substring(1).trim());
      }
      return monthStart.format(format);
    });
  }
  if (granularity === "year") {
    templateContents = templateContents.replace(/{{\s*(year)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
      const now = window.moment();
      const monthStart = date.clone().startOf("year").set({
        hour: now.get("hour"),
        minute: now.get("minute"),
        second: now.get("second")
      });
      if (calc) {
        monthStart.add(parseInt(timeDelta, 10), unit);
      }
      if (momentFormat) {
        return monthStart.format(momentFormat.substring(1).trim());
      }
      return monthStart.format(format);
    });
  }
  return templateContents;
}
function getNoteCreationPath(app2, filename, periodicConfig) {
  return __async(this, null, function* () {
    var _a;
    const directory = (_a = periodicConfig.folder) != null ? _a : "";
    const filenameWithExt = !filename.endsWith(".md") ? `${filename}.md` : filename;
    const path = (0, import_obsidian2.normalizePath)(join(directory, filenameWithExt));
    yield ensureFolderExists(app2, path);
    return path;
  });
}
function join(...partSegments) {
  let parts = [];
  for (let i = 0, l = partSegments.length; i < l; i++) {
    parts = parts.concat(partSegments[i].split("/"));
  }
  const newParts = [];
  for (let i = 0, l = parts.length; i < l; i++) {
    const part = parts[i];
    if (!part || part === ".")
      continue;
    else
      newParts.push(part);
  }
  if (parts[0] === "")
    newParts.unshift("");
  return newParts.join("/");
}
function ensureFolderExists(app2, path) {
  return __async(this, null, function* () {
    const dirs = path.replace(/\\/g, "/").split("/");
    dirs.pop();
    if (dirs.length) {
      const dir = join(...dirs);
      if (!app2.vault.getAbstractFileByPath(dir)) {
        yield app2.vault.createFolder(dir);
      }
    }
  });
}
function getDaysOfWeek() {
  const { moment } = window;
  let weekStart = moment.localeData()._week.dow;
  const daysOfWeek = [
    "sunday",
    "monday",
    "tuesday",
    "wednesday",
    "thursday",
    "friday",
    "saturday"
  ];
  while (weekStart) {
    const day = daysOfWeek.shift();
    if (day)
      daysOfWeek.push(day);
    weekStart--;
  }
  return daysOfWeek;
}
function getDayOfWeekNumericalValue(dayOfWeekName) {
  return getDaysOfWeek().indexOf(dayOfWeekName.toLowerCase());
}

// src/drawUI.ts
function drawUI() {
  const navHeader = createDiv("nav-header");
  const navButtonContainer = navHeader.createDiv("nav-buttons-container");
  const granularity = GRANULARITY_LIST[this.activeGranularity];
  uiPreviousPage.call(this, navButtonContainer, granularity);
  uiNextPage.call(this, navButtonContainer, granularity);
  uiReturnHome.call(this, navButtonContainer);
  uiSetting.call(this, navButtonContainer, granularity);
  uiCreateDailyNote.call(this, navButtonContainer, granularity);
  uiExtract.call(this, navButtonContainer);
  uiCollapse.call(this, navButtonContainer);
  const navDateRange = navHeader.createDiv("nav-date-range");
  let latest = this.searchRange.latest.clone();
  let earliest = this.searchRange.earliest.clone();
  if (this.settings.initialSearchType == "backward") {
    earliest = latest.clone().subtract(this.settings.duration[granularity] - 1, granularity);
    if (latest.isSame(window.moment(), "day")) {
      latest = latest.add(Math.ceil(this.settings.offset / DAYS_PER_UNIT[granularity]), granularity);
    }
  }
  if (this.settings.initialSearchType == "forward") {
    latest = earliest.clone().add(this.settings.duration[granularity] - 1, granularity);
  }
  const dateRange = earliest.format("YYYY/MM/DD [-] ") + latest.format(earliest.isSame(latest, "year") ? "MM/DD" : "YYYY/MM/DD");
  navDateRange.createDiv("nav-date-range-content").setText(dateRange);
  navDateRange.addEventListener("click", (event) => __async(this, null, function* () {
    event.preventDefault();
    const onsetDate = window.moment(this.settings.onset, "YYYY-MM-DD");
    if (onsetDate.isValid()) {
      this.searchRange.earliest = onsetDate;
      this.searchRange.latest = onsetDate.clone().add(this.settings.duration.day - 1, "days");
    } else {
      this.searchRange.latest = window.moment().startOf("day");
      this.searchRange.earliest = window.moment().startOf("day").subtract(this.settings.duration.day - 1, "days");
    }
    this.refreshView(false, true, true);
  }));
  if (this.settings.periodicNotesEnabled) {
    const navGranularity = navHeader.createDiv("nav-date-range");
    navGranularity.createDiv("nav-date-range-content").setText(GRANULARITY_LIST[this.activeGranularity]);
    navGranularity.addEventListener("click", (evet) => {
      var _a, _b, _c;
      if (this.settings.showDebugInfo) {
        console.log("DNO:clicked to change granularity. verPN, calendarSets:", this.activeGranularity, this.verPN, this.calendarSets);
      }
      const initialGranularity = this.activeGranularity;
      do {
        this.activeGranularity = (this.activeGranularity + 1) % GRANULARITY_LIST.length;
      } while ((this.verPN == 2 && !((_a = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _a.enabled) || this.verPN == 1 && !((_c = (_b = this.app.plugins.getPlugin("periodic-notes").settings) == null ? void 0 : _b[GRANULARITY_TO_PERIODICITY[GRANULARITY_LIST[this.activeGranularity]]]) == null ? void 0 : _c.enabled)) && this.activeGranularity != initialGranularity);
      this.app.workspace.requestSaveLayout();
      this.refreshView(true, true, true);
    });
    navGranularity.addEventListener("contextmenu", (event) => {
      var _a, _b, _c;
      const menu = new import_obsidian3.Menu();
      for (let i = 0; i < GRANULARITY_LIST.length; i++) {
        if (this.verPN == 2 && ((_a = this.calendarSets[this.activeSet][GRANULARITY_LIST[i]]) == null ? void 0 : _a.enabled) || this.verPN == 1 && ((_c = (_b = this.app.plugins.getPlugin("periodic-notes").settings) == null ? void 0 : _b[GRANULARITY_TO_PERIODICITY[GRANULARITY_LIST[i]]]) == null ? void 0 : _c.enabled)) {
          const icon = i == this.activeGranularity ? "check" : "";
          menu.addItem((item) => item.setTitle(GRANULARITY_LIST[i]).setIcon(icon).onClick(() => {
            this.activeGranularity = i;
            this.app.workspace.requestSaveLayout();
            this.refreshView(true, true, true);
          }));
        }
      }
      menu.showAtMouseEvent(event);
    });
  }
  if (this.settings.calendarSetsEnabled) {
    const navCalendarSet = navHeader.createDiv("nav-date-range");
    navCalendarSet.createDiv("nav-date-range-content").setText(this.calendarSets[this.activeSet].id);
    navCalendarSet.addEventListener("click", (evet) => {
      this.activeSet = (this.activeSet + 1) % this.calendarSets.length;
      this.app.workspace.requestSaveLayout();
      this.refreshView(false, true, true);
    });
    navCalendarSet.addEventListener("contextmenu", (event) => {
      const menu = new import_obsidian3.Menu();
      for (let i = 0; i < this.calendarSets.length; i++) {
        const icon = i == this.activeSet ? "check" : "";
        menu.addItem((item) => item.setTitle(this.calendarSets[i].id).setIcon(icon).onClick(() => {
          this.activeSet = i;
          this.app.workspace.requestSaveLayout();
          this.refreshView(false, true, true);
        }));
      }
      menu.showAtMouseEvent(event);
    });
  }
  this.contentEl.empty();
  this.contentEl.appendChild(navHeader);
}
function uiPreviousPage(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "previous notes";
  (0, import_obsidian3.setIcon)(navActionButton, "arrow-left");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.searchRange.latest = this.searchRange.latest.subtract(this.settings.duration[granularity], granularity);
    this.searchRange.earliest = this.searchRange.earliest.subtract(this.settings.duration[granularity], granularity);
    this.refreshView(false, true, true);
  }));
}
function uiNextPage(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "next notes";
  (0, import_obsidian3.setIcon)(navActionButton, "arrow-right");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.searchRange.latest = this.searchRange.latest.add(this.settings.duration[granularity], granularity);
    this.searchRange.earliest = this.searchRange.earliest.add(this.settings.duration[granularity], granularity);
    this.refreshView(false, true, true);
  }));
}
function uiReturnHome(parentEl) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "home";
  (0, import_obsidian3.setIcon)(navActionButton, "home");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.resetSearchRange();
    this.refreshView(false, true, true);
  }));
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian3.Menu();
    menu.addItem((item) => item.setTitle("refresh view").setIcon("refresh-cw").onClick(() => __async(this, null, function* () {
      this.refreshView(true, true, true);
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiSetting(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  navActionButton.ariaLabel = "open settings";
  (0, import_obsidian3.setIcon)(navActionButton, "settings");
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    this.app.setting.open();
    this.app.setting.openTabById(this.plugin.manifest.id);
  }));
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian3.Menu();
    for (const element in this.settings.showElements) {
      const icon2 = this.settings.showElements[element] == true ? "check" : "";
      menu.addItem((item) => item.setTitle(`show ${element}`).setIcon(icon2).onClick(() => __async(this, null, function* () {
        this.settings.showElements[element] = !this.settings.showElements[element];
        yield this.plugin.saveSettings();
        this.refreshView(false, false, false);
      })));
    }
    if (this.settings.showElements.listItems) {
      const icon2 = this.settings.taskOnly ? "check" : "";
      menu.addItem((item) => item.setTitle("tasks only").setIcon(icon2).onClick(() => __async(this, null, function* () {
        this.settings.taskOnly = !this.settings.taskOnly;
        yield this.plugin.saveSettings();
        this.refreshView(false, false, false);
      })));
    }
    menu.addSeparator();
    if (granularity == "day") {
      for (let index in FILEINFO_TO_DISPLAY_DAY) {
        const icon2 = index == this.settings.displayFileInfoDaily ? "check" : "";
        menu.addItem((item) => item.setTitle(FILEINFO_TO_DISPLAY_DAY[index]).setIcon(icon2).onClick(() => __async(this, null, function* () {
          this.settings.displayFileInfoDaily = index;
          yield this.plugin.saveSettings();
          this.refreshView(false, false, false);
        })));
      }
    } else {
      for (let index in FILEINFO_TO_DISPLAY) {
        const icon2 = index == this.settings.displayFileInfoPeriodic ? "check" : "";
        menu.addItem((item) => item.setTitle(FILEINFO_TO_DISPLAY[index]).setIcon(icon2).onClick(() => __async(this, null, function* () {
          this.settings.displayFileInfoPeriodic = index;
          yield this.plugin.saveSettings();
          this.refreshView(false, false, false);
        })));
      }
    }
    menu.addSeparator();
    const icon = this.settings.tooltipPreview ? "check" : "";
    menu.addItem((item) => item.setTitle("show tooltip preview").setIcon(icon).onClick(() => __async(this, null, function* () {
      this.settings.tooltipPreview = !this.settings.tooltipPreview;
      yield this.plugin.saveSettings();
      this.refreshView(false, false, false);
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiCreateDailyNote(parentEl, granularity) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  let labelForToday = "create/open ";
  let labelForNext = "create/open ";
  if (granularity == "day") {
    labelForToday = labelForToday + "today's ";
    labelForNext = labelForNext + "tomorrow's ";
  } else {
    labelForToday = labelForToday + "present ";
    labelForNext = labelForNext + "next ";
  }
  labelForToday = labelForToday + GRANULARITY_TO_PERIODICITY[granularity] + " note";
  labelForNext = labelForNext + GRANULARITY_TO_PERIODICITY[granularity] + " note";
  if (this.verPN == 2) {
    labelForToday = labelForToday + " for " + this.calendarSets[this.activeSet].id;
    labelForNext = labelForNext + " for " + this.calendarSets[this.activeSet].id;
  }
  navActionButton.ariaLabel = labelForToday;
  (0, import_obsidian3.setIcon)(navActionButton, "calendar-plus", 20);
  navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
    event.preventDefault;
    const date = window.moment();
    if (this.verPN == 2) {
      createAndOpenPeriodicNote(granularity, date, this.calendarSets[this.activeSet]);
    } else {
      createAndOpenDailyNote(granularity, date, this.allDailyNotes);
    }
  }));
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian3.Menu();
    menu.addItem((item) => item.setTitle(labelForNext).setIcon("calendar-plus").onClick(() => __async(this, null, function* () {
      const date = window.moment().add(1, granularity);
      if (this.verPN == 2) {
        createAndOpenPeriodicNote(granularity, date, this.calendarSets[this.activeSet]);
      } else {
        createAndOpenDailyNote(granularity, date, this.allDailyNotes);
      }
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiExtract(parentEl) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  if (!this.extractMode) {
    navActionButton.ariaLabel = "extract";
    (0, import_obsidian3.setIcon)(navActionButton, "search", 20);
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      event.preventDefault;
      const onSubmit = (enableExtract) => {
        if (enableExtract) {
          this.extractMode = true;
          this.refreshView(false, false, false);
        }
      };
      new ModalExtract(this.app, this.plugin, onSubmit).open();
    }));
  } else {
    navActionButton.ariaLabel = "unextract";
    (0, import_obsidian3.setIcon)(navActionButton, "x-circle", 20);
    navActionButton.classList.add("is-active");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      this.extractMode = false;
      this.extractTask = false;
      this.refreshView(false, false, false);
    }));
  }
  navActionButton.addEventListener("contextmenu", (event) => {
    const menu = new import_obsidian3.Menu();
    menu.addItem((item) => item.setTitle("extract tasks").setIcon("check-square").onClick(() => __async(this, null, function* () {
      this.extractMode = true;
      this.extractTask = true;
      this.refreshView(false, false, false);
    })));
    menu.showAtMouseEvent(event);
  });
}
function uiCollapse(parentEl) {
  let navActionButton = parentEl.createDiv("clickable-icon nav-action-button");
  if (this.collapseAll) {
    navActionButton.classList.add("is-active");
  }
  if (!this.collapseAll) {
    navActionButton.ariaLabel = "collapse all";
    (0, import_obsidian3.setIcon)(navActionButton, "chevrons-down-up");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      this.collapseAll = true;
      this.refreshView(false, false, false);
    }));
  } else {
    navActionButton.ariaLabel = "expand";
    (0, import_obsidian3.setIcon)(navActionButton, "chevrons-down-up");
    navActionButton.addEventListener("click", (event) => __async(this, null, function* () {
      this.collapseAll = false;
      this.refreshView(false, false, false);
    }));
  }
}

// src/getTargetFiles.ts
var import_obsidian4 = __toModule(require("obsidian"));
var import_obsidian_daily_notes_interface2 = __toModule(require_main());
function getTargetFiles(allFiles, granularity) {
  let files = [];
  let checkDate = this.searchRange.latest.clone();
  let checkDateEarliest = this.searchRange.earliest.clone();
  if (this.settings.initialSearchType == "backward") {
    if (checkDate.isSame(window.moment(), "day")) {
      checkDate.add(Math.ceil(this.settings.offset / DAYS_PER_UNIT[granularity]), granularity);
    }
    checkDateEarliest = this.searchRange.latest.clone().subtract(this.settings.duration[granularity] - 1, granularity);
  } else {
    checkDate = this.searchRange.earliest.clone().add(this.settings.duration[granularity] - 1, granularity);
  }
  while (checkDate.isSameOrAfter(checkDateEarliest, granularity)) {
    if (allFiles[(0, import_obsidian_daily_notes_interface2.getDateUID)(checkDate, granularity)]) {
      files.push(allFiles[(0, import_obsidian_daily_notes_interface2.getDateUID)(checkDate, granularity)]);
    }
    checkDate.subtract(1, granularity);
  }
  return files;
}
function getTargetPeriodicNotes(calendarSet, granularity) {
  var _a;
  let files = [];
  let checkDate = this.searchRange.latest.clone();
  let checkDateEarliest = this.searchRange.earliest.clone();
  if (this.settings.initialSearchType == "backward") {
    if (checkDate.isSame(window.moment(), "day")) {
      checkDate.add(Math.ceil(this.settings.offset / DAYS_PER_UNIT[granularity]), granularity);
    }
    checkDateEarliest = this.searchRange.latest.clone().subtract(this.settings.duration[granularity] - 1, granularity);
  } else {
    checkDate = this.searchRange.earliest.clone().add(this.settings.duration[granularity] - 1, granularity);
  }
  if (this.settings.showDebugInfo) {
    console.log("DNO:searching caches of Periodic Notes... calendar set:", calendarSet);
  }
  while (checkDate.isSameOrAfter(checkDateEarliest, granularity)) {
    const caches = this.app.plugins.getPlugin("periodic-notes").cache.getPeriodicNotes(calendarSet.id, granularity, checkDate);
    for (const file of caches) {
      if (this.settings.exactMatchOnly && !((_a = file == null ? void 0 : file.matchData) == null ? void 0 : _a.exact)) {
        continue;
      }
      if (this.settings.markdownOnly && !(file == null ? void 0 : file.filePath.endsWith(".md"))) {
        continue;
      }
      if (!file.filePath.startsWith(calendarSet[granularity].folder.concat("/")) && calendarSet[granularity].folder) {
        continue;
      }
      const fileobj = this.app.vault.getAbstractFileByPath(file.filePath);
      if (fileobj instanceof import_obsidian4.TFile) {
        files.push(fileobj);
      }
    }
    checkDate.subtract(1, granularity);
  }
  return files;
}

// src/getOutline.ts
var import_obsidian_daily_notes_interface3 = __toModule(require_main());
function getFileInfo(files) {
  return __async(this, null, function* () {
    let fileInfo = [];
    for (let i = 0; i < files.length; i++) {
      const content = yield this.app.vault.cachedRead(files[i]);
      const lines = content.split("\n");
      let info = {
        date: (0, import_obsidian_daily_notes_interface3.getDateFromFile)(files[i], GRANULARITY_LIST[this.activeGranularity]),
        lines,
        numOfLines: lines.length,
        isFolded: false
      };
      if (this.verPN == 2) {
        info.date = this.app.plugins.getPlugin("periodic-notes").cache.cachedFiles.get(this.calendarSets[this.activeSet].id).get(files[i].path).date;
      }
      fileInfo.push(info);
    }
    return fileInfo;
  });
}
function getOutline(files) {
  return __async(this, null, function* () {
    let data = [];
    for (let i = 0; i < files.length; i++) {
      const cache = this.app.metadataCache.getFileCache(files[i]);
      data[i] = [];
      if (cache.hasOwnProperty("headings")) {
        for (let j = 0; j < cache.headings.length; j++) {
          const element = {
            typeOfElement: "heading",
            position: cache.headings[j].position,
            displayText: cache.headings[j].heading,
            level: cache.headings[j].level
          };
          data[i].push(element);
        }
      }
      if (cache.hasOwnProperty("links")) {
        for (let j = 0; j < cache.links.length; j++) {
          const element = {
            typeOfElement: "link",
            position: cache.links[j].position,
            displayText: cache.links[j].displayText == "" ? cache.links[j].original.substring(1, cache.links[j].original.indexOf("]")) : cache.links[j].displayText,
            link: cache.links[j].link
          };
          data[i].push(element);
        }
      }
      if (cache.hasOwnProperty("listItems")) {
        for (let j = 0; j < cache.listItems.length; j++) {
          let listLevel = 0;
          if (cache.listItems[j].parent > 0) {
            listLevel = 2;
          } else if (j > 0) {
            if (!(Math.abs(cache.listItems[j].parent) == cache.listItems[j].position.start.line) && cache.listItems[j].position.start.line - cache.listItems[j - 1].position.start.line == 1) {
              listLevel = 1;
            }
          }
          const element = {
            typeOfElement: "listItems",
            position: cache.listItems[j].position,
            displayText: this.fileInfo[i].lines[cache.listItems[j].position.start.line].replace(/^(\s|\t)*-\s(\[.\]\s)*/, ""),
            level: listLevel,
            task: cache.listItems[j].task
          };
          data[i].push(element);
        }
      }
      if (cache.hasOwnProperty("tags")) {
        for (let j = 0; j < cache.tags.length; j++) {
          const element = {
            typeOfElement: "tag",
            position: cache.tags[j].position,
            displayText: cache.tags[j].tag.substring(1)
          };
          data[i].push(element);
        }
      }
      data[i].sort((a, b) => {
        return a.position.start.offset - b.position.start.offset;
      });
    }
    return data;
  });
}

// src/constructDOM.ts
var import_obsidian5 = __toModule(require("obsidian"));

// src/util.ts
function cleanFileFlag(file, settings) {
  if (Object.keys(settings.fileFlag[file.path]).length == 0) {
    delete settings.fileFlag[file.path];
  }
}
function checkFlag(file, flag, settings) {
  var _a;
  return (_a = settings.fileFlag[file.path]) == null ? void 0 : _a[flag];
}
function addFlag(file, flag, settings) {
  if (!settings.fileFlag.hasOwnProperty(file.path)) {
    settings.fileFlag[file.path] = {};
  }
  settings.fileFlag[file.path][flag] = true;
}
function removeFlag(file, flag, settings) {
  delete settings.fileFlag[file.path][flag];
  cleanFileFlag(file, settings);
}

// src/constructDOM.ts
function drawOutline(files, info, data) {
  var _a, _b, _c;
  const containerEl = createDiv("nav-files-container node-insert-event");
  const rootEl = containerEl.createDiv("tree-item nav-folder mod-root");
  const rootChildrenEl = rootEl.createDiv("tree-item-children nav-folder-children");
  if (files.length == 0) {
    rootChildrenEl.createEl("h4", {
      text: "No daily/periodic note found"
    });
  }
  let includeMode = this.settings.includeOnly != "none" && (Boolean(this.settings.wordsToInclude.length) || this.settings.includeBeginning);
  let maxLevel = this.settings.headingLevel.indexOf(true);
  for (let i = 0; i < files.length; i++) {
    let latestHeadingLevel = 0;
    const dailyNoteEl = rootChildrenEl.createDiv("tree-item nav-folder");
    const dailyNoteTitleEl = dailyNoteEl.createDiv("tree-item-self is-clickable mod-collapsible nav-folder-title");
    const dailyNoteChildrenEl = dailyNoteEl.createDiv("tree-item-children nav-folder-children");
    const changeColor = this.settings.noteTitleBackgroundColor;
    if (changeColor != "none") {
      const customColor = this.settings.customNoteTitleBackgroundColor;
      const customColorHover = this.settings.customNoteTitleBackgroundColorHover;
      const theme = Boolean(document.getElementsByTagName("body")[0].classList.contains("theme-light")) ? "light" : "dark";
      dailyNoteTitleEl.style.backgroundColor = customColor[changeColor][theme];
      dailyNoteTitleEl.addEventListener("mouseover", function() {
        this.style.backgroundColor = customColorHover[changeColor][theme];
      });
      dailyNoteTitleEl.addEventListener("mouseout", function() {
        this.style.backgroundColor = customColor[changeColor][theme];
      });
    }
    const noteCollapseIcon = dailyNoteTitleEl.createDiv("tree-item-icon collapse-icon nav-folder-collapse-indicator");
    (0, import_obsidian5.setIcon)(noteCollapseIcon, "right-triangle");
    noteCollapseIcon.addEventListener("click", (event) => __async(this, null, function* () {
      event.stopPropagation();
      if (info[i].isFolded) {
        if (!this.collapseAll) {
          if (checkFlag(files[i], "fold", this.settings)) {
            removeFlag(files[i], "fold", this.settings);
            yield this.plugin.saveSettings();
          }
        }
        dailyNoteEl.classList.remove("is-collapsed");
        noteCollapseIcon.classList.remove("is-collapsed");
        info[i].isFolded = false;
        dailyNoteChildrenEl.style.display = "block";
      } else {
        if (!this.collapseAll) {
          addFlag(files[i], "fold", this.settings);
        }
        yield this.plugin.saveSettings();
        dailyNoteEl.classList.add("is-collapsed");
        noteCollapseIcon.classList.add("is-collapsed");
        info[i].isFolded = true;
        dailyNoteChildrenEl.style.display = "none";
      }
    }));
    let name = files[i].basename;
    if (this.settings.attachWeeklyNotesName && GRANULARITY_LIST[this.activeGranularity] == "week") {
      name = name + " (" + this.fileInfo[i].date.clone().startOf("week").format("MM/DD [-] ") + this.fileInfo[i].date.clone().endOf("week").format("MM/DD") + ")";
    }
    dailyNoteTitleEl.createDiv("tree-item-inner nav-folder-title-content").setText(name);
    const infoToDisplay = this.activeGranularity == 0 ? this.settings.displayFileInfoDaily : this.settings.displayFileInfoPeriodic;
    switch (infoToDisplay) {
      case "lines":
        dailyNoteTitleEl.dataset.subinfo = info[i].numOfLines.toString();
        break;
      case "days":
        let basedate = this.settings.initialSearchType == "backward" ? window.moment() : window.moment(this.settings.onset);
        dailyNoteTitleEl.dataset.subinfo = Math.abs(info[i].date.diff(basedate.startOf(GRANULARITY_LIST[this.activeGranularity]), GRANULARITY_LIST[this.activeGranularity])).toString();
        break;
      case "dow":
        dailyNoteTitleEl.dataset.subinfo = info[i].date.format("dddd");
        break;
      case "dowshort":
        dailyNoteTitleEl.dataset.subinfo = info[i].date.format("ddd");
        break;
      case "weeknumber":
        dailyNoteTitleEl.dataset.subinfo = info[i].date.format("[w]ww");
        break;
      case "tag":
        let firsttagIndex = data[i].findIndex((element, index) => data[i][index].typeOfElement == "tag");
        if (firsttagIndex >= 0) {
          dailyNoteTitleEl.dataset.subinfo = data[i][firsttagIndex].displayText;
        }
        break;
      case "none":
        break;
      default:
        break;
    }
    dailyNoteTitleEl.addEventListener("click", (event) => {
      event.preventDefault();
      this.app.workspace.getLeaf().openFile(files[i]);
    }, false);
    dailyNoteTitleEl.addEventListener("contextmenu", (event) => {
      const menu = new import_obsidian5.Menu();
      menu.addItem((item) => item.setTitle("Open in new tab").setIcon("file-plus").onClick(() => {
        event.preventDefault();
        this.app.workspace.getLeaf("tab").openFile(files[i]);
      }));
      menu.addItem((item) => item.setTitle("Open to the right").setIcon("separator-vertical").onClick(() => {
        event.preventDefault();
        this.app.workspace.getLeaf("split").openFile(files[i]);
      }));
      this.app.workspace.trigger("file-menu", menu, files[i], "link-context-menu");
      menu.showAtMouseEvent(event);
    });
    let isIncluded = this.settings.includeBeginning;
    let includeModeHeadingLevel;
    let isExcluded = false;
    let excludeType;
    let excludeModeHeadingLevel;
    let primeType = this.settings.includeOnly == "none" ? this.settings.primeElement : this.settings.includeOnly;
    let isExtracted = false;
    if (data[i].length > 0) {
      elementloop:
        for (let j = 0; j < data[i].length; j++) {
          const element = data[i][j].typeOfElement;
          if (includeMode && this.settings.includeOnly == element) {
            if (isIncluded == true && element == "heading" && data[i][j].level > includeModeHeadingLevel) {
            } else {
              isIncluded = false;
              for (const value of this.settings.wordsToInclude) {
                if (value && data[i][j].displayText.includes(value)) {
                  isIncluded = true;
                  if (element == "heading") {
                    includeModeHeadingLevel = data[i][j].level;
                  }
                }
              }
            }
          }
          if (!isIncluded) {
            continue;
          }
          if (!isExcluded || isExcluded && (excludeType == element || primeType == element)) {
            if (element == "heading" && data[i][j].level > excludeModeHeadingLevel) {
            } else {
              isExcluded = false;
              for (const value of this.settings.wordsToExclude[element]) {
                if (value && data[i][j].displayText.includes(value)) {
                  isExcluded = true;
                  excludeType = element;
                  if (element == "heading") {
                    excludeModeHeadingLevel = data[i][j].level;
                  }
                }
              }
            }
          }
          if (isExcluded) {
            continue;
          }
          if (this.settings.showElements[element] == false) {
            continue;
          }
          for (const value of this.settings.wordsToIgnore[element]) {
            if (value && data[i][j].displayText.includes(value)) {
              continue elementloop;
            }
          }
          if (this.extractMode == true) {
            if (this.extractTask == false && !data[i][j].displayText.toLowerCase().includes(this.settings.wordsToExtract.toLowerCase())) {
              continue;
            } else if (this.extractTask == true && data[i][j].task === void 0) {
              continue;
            } else {
              isExtracted = true;
            }
          }
          if (element == "heading") {
            latestHeadingLevel = data[i][j].level;
            if (!this.settings.headingLevel[data[i][j].level - 1]) {
              continue;
            }
          }
          if (element == "link") {
          }
          if (element == "tag") {
          }
          if (element == "listItems") {
            if (this.settings.hideCompletedTasks == true && data[i][j].task == "x") {
              continue;
            } else if (this.settings.taskOnly == true && data[i][j].task === void 0) {
              continue;
            } else if (this.settings.allTasks == false || data[i][j].task === void 0) {
              if (data[i][j].level == 2 || data[i][j].level == 1 && this.settings.allRootItems == false) {
                continue;
              }
            }
          }
          const outlineEl = dailyNoteChildrenEl.createDiv("tree-item nav-file");
          const outlineTitle = outlineEl.createDiv("tree-item-self is-clickable nav-file-title");
          switch (this.settings.icon[element]) {
            case "none":
              break;
            case "headingwithnumber":
              (0, import_obsidian5.setIcon)(outlineTitle, `heading-${data[i][j].level}`);
              break;
            case "custom":
              (0, import_obsidian5.setIcon)(outlineTitle, this.settings.customIcon[element]);
              break;
            default:
              (0, import_obsidian5.setIcon)(outlineTitle, this.settings.icon[element]);
              break;
          }
          if (element == "listItems" && data[i][j].task !== void 0) {
            if (data[i][j].task == "x") {
              (0, import_obsidian5.setIcon)(outlineTitle, this.settings.icon.taskDone == "custom" ? this.settings.customIcon.taskDone : this.settings.icon.taskDone);
            } else {
              (0, import_obsidian5.setIcon)(outlineTitle, this.settings.icon.task == "custom" ? this.settings.customIcon.task : this.settings.icon.task);
            }
            const customStatus = Object.keys(this.settings.taskIcon).find((customStatus2) => this.settings.taskIcon[customStatus2].symbol === data[i][j].task);
            if (customStatus) {
              (0, import_obsidian5.setIcon)(outlineTitle, this.settings.taskIcon[customStatus].icon);
            }
          }
          let prefix = this.settings.prefix[element];
          if (element == "heading") {
            switch (this.settings.repeatHeadingPrefix) {
              case "level":
                prefix = prefix.repeat(data[i][j].level);
                break;
              case "levelminus1":
                prefix = prefix.repeat(data[i][j].level - 1);
                break;
            }
          }
          let indent = 0.5;
          if (element == "heading" && this.settings.indent.heading == true) {
            indent = indent + (data[i][j].level - (maxLevel + 1)) * 1.5;
          }
          if (element != "heading" && this.settings.indentFollowHeading) {
            const additionalIndent = (latestHeadingLevel - (maxLevel + 1) + (this.settings.indentFollowHeading == 2 ? 1 : 0)) * 1.5;
            indent = indent + (additionalIndent > 0 ? additionalIndent : 0);
          }
          if (element == "link" && data[i][j].position.start.line == ((_a = data[i][j - 1]) == null ? void 0 : _a.position.start.line)) {
            indent = indent + 1.5;
          }
          outlineTitle.style.paddingLeft = `${indent}em`;
          if (element == "listItems" && data[i][j].task !== void 0) {
            prefix = data[i][j].task == "x" ? this.settings.prefix.taskDone : this.settings.prefix.task;
            if (this.settings.addCheckboxText) {
              prefix = prefix + "[" + data[i][j].task + "] ";
            }
          }
          let dispText = this.stripMarkdownSympol(data[i][j].displayText);
          outlineTitle.createDiv("tree-item-inner nav-file-title-content").setText(prefix + dispText);
          if (this.settings.inlinePreview) {
            let previewText = "";
            if ((element == "link" || element == "tag") && data[i][j].position.end.col < info[i].lines[data[i][j].position.start.line].length) {
              previewText = info[i].lines[data[i][j].position.start.line].slice(data[i][j].position.end.col);
            } else {
              previewText = data[i][j].position.start.line < info[i].numOfLines - 1 ? info[i].lines[data[i][j].position.start.line + 1] : "";
            }
            outlineTitle.createDiv("nav-file-title-preview").setText(previewText);
          }
          if (this.settings.tooltipPreview) {
            let previewText2 = "";
            let endLine = info[i].numOfLines - 1;
            let k = j + 1;
            endpreviewloop:
              while (k < data[i].length) {
                if (this.settings.showElements[data[i][k].typeOfElement]) {
                  if (data[i][k].typeOfElement == "listItems" && (data[i][k].level >= 2 || this.settings.allRootItems == false && data[i][k].level == 1 && (this.settings.allTasks == false || data[i][k].task === void 0) || this.settings.taskOnly && data[i][k].task === void 0 || this.settings.hideCompletedTasks && data[i][k].task == "x")) {
                    k++;
                    continue;
                  } else if (data[i][k].typeOfElement == "heading" && this.settings.headingLevel[data[i][k].level - 1] == false) {
                    k++;
                    continue;
                  } else {
                    for (const value of this.settings.wordsToIgnore[data[i][k].typeOfElement]) {
                      if (value && data[i][k].displayText.includes(value)) {
                        k++;
                        continue endpreviewloop;
                      }
                    }
                    endLine = data[i][k].position.start.line - 1;
                    break;
                  }
                }
                k++;
              }
            for (let l = data[i][j].position.start.line; l <= endLine; l++) {
              previewText2 = previewText2 + info[i].lines[l] + "\n";
            }
            previewText2 = previewText2.replace(/\n$|\n(?=\n)/g, "");
            outlineTitle.ariaLabel = previewText2;
            outlineTitle.dataset.tooltipPosition = this.settings.tooltipPreviewDirection;
            outlineTitle.setAttribute("aria-label-delay", "10");
            outlineTitle.setAttribute("aria-label-classes", "daily-note-preview");
          }
          outlineTitle.addEventListener("click", (event) => __async(this, null, function* () {
            event.preventDefault();
            yield this.app.workspace.getLeaf().openFile(files[i]);
            const view = this.app.workspace.getActiveViewOfType(import_obsidian5.MarkdownView);
            if (view) {
              view.editor.focus();
              view.editor.setCursor(data[i][j].position.start.line, data[i][j].position.start.col);
              view.editor.scrollIntoView({
                from: {
                  line: data[i][j].position.start.line,
                  ch: 0
                },
                to: {
                  line: data[i][j].position.start.line,
                  ch: 0
                }
              }, true);
            }
          }), false);
          outlineTitle.addEventListener("mouseover", (event) => {
            this.app.workspace.trigger("hover-link", {
              event,
              source: DailyNoteOutlineViewType,
              hoverParent: rootEl,
              targetEl: outlineTitle,
              linktext: files[i].path,
              state: { scroll: data[i][j].position.start.line }
            });
          });
          outlineTitle.addEventListener("contextmenu", (event) => {
            const menu = new import_obsidian5.Menu();
            menu.addItem((item) => item.setTitle("Extract").setIcon("search").onClick(() => __async(this, null, function* () {
              this.plugin.settings.wordsToExtract = data[i][j].displayText;
              yield this.plugin.saveSettings();
              this.extractMode = true;
              this.extractTask = false;
              this.refreshView(false, false, false);
            })));
            menu.addSeparator();
            if (element == "link") {
              menu.addItem((item) => item.setTitle("Open linked file").setIcon("links-going-out").onClick(() => __async(this, null, function* () {
                const linkedFile = app.metadataCache.getFirstLinkpathDest(data[i][j].link, files[i].path);
                this.app.workspace.getLeaf().openFile(linkedFile);
              })));
              menu.addSeparator();
            }
            menu.addItem((item) => item.setTitle("Open in new tab").setIcon("file-plus").onClick(() => __async(this, null, function* () {
              yield this.app.workspace.getLeaf("tab").openFile(files[i]);
              this.scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col);
            })));
            menu.addItem((item) => item.setTitle("Open to the right").setIcon("separator-vertical").onClick(() => __async(this, null, function* () {
              yield this.app.workspace.getLeaf("split").openFile(files[i]);
              this.scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col);
            })));
            menu.addItem((item) => item.setTitle("Open in new window").setIcon("scan").onClick(() => __async(this, null, function* () {
              yield this.app.workspace.getLeaf("window").openFile(files[i]);
              this.scrollToElement(data[i][j].position.start.line, data[i][j].position.start.col);
            })));
            menu.showAtMouseEvent(event);
          });
        }
    } else {
      if (this.extractMode == false) {
        for (let j = 0; j < info[i].lines.length; j++) {
          if (info[i].lines[j] == "") {
            continue;
          } else {
            const outlineEl = dailyNoteChildrenEl.createDiv("tree-item nav-file");
            const outlineTitle = outlineEl.createDiv("tree-item-self is-clickable nav-file-title");
            outlineTitle.createDiv("tree-item-inner nav-file-title-content").setText(info[i].lines[j]);
            outlineTitle.addEventListener("click", (event) => __async(this, null, function* () {
              event.preventDefault();
              yield this.app.workspace.getLeaf().openFile(files[i]);
            }), false);
            break;
          }
        }
      }
    }
    if (this.collapseAll || ((_c = (_b = this.settings.fileFlag) == null ? void 0 : _b[files[i].path]) == null ? void 0 : _c.fold)) {
      dailyNoteEl.classList.add("is-collpased");
      noteCollapseIcon.classList.add("is-collapsed");
      info[i].isFolded = true;
      dailyNoteChildrenEl.style.display = "none";
    } else {
      info[i].isFolded = false;
    }
    if (this.extractMode == true && isExtracted == false) {
      dailyNoteEl.remove();
    }
  }
  this.contentEl.appendChild(containerEl);
}

// src/view.ts
var DailyNoteOutlineViewType = "daily-note-outline";
var DailyNoteOutlineView = class extends import_obsidian7.ItemView {
  constructor(leaf, plugin, settings) {
    super(leaf);
    this.searchRange = {
      latest: window.moment(),
      earliest: window.moment()
    };
    this.extractMode = false;
    this.extractTask = false;
    this.collapseAll = false;
    this.activeSet = 0;
    this.activeGranularity = 0;
    this.plugin = plugin;
    this.settings = settings;
  }
  getViewType() {
    return DailyNoteOutlineViewType;
  }
  getDisplayText() {
    return "Daily Note Outline";
  }
  getIcon() {
    return "calendar-clock";
  }
  onOpen() {
    return __async(this, null, function* () {
      this.initView();
      const debouncerRequestRefresh = (0, import_obsidian6.debounce)(this.autoRefresh, 2e3, true);
      this.flagRedraw = false;
      this.flagRegetAll = false;
      this.registerEvent(this.app.metadataCache.on("changed", (file) => {
        var _a;
        if ((_a = this.targetFiles) == null ? void 0 : _a.includes(file)) {
          this.flagRedraw = true;
          debouncerRequestRefresh.call(this);
        }
      }));
      this.registerEvent(this.app.vault.on("create", (file) => {
        this.flagRegetAll = true;
        debouncerRequestRefresh.call(this);
      }));
      this.registerEvent(this.app.vault.on("delete", (file) => {
        this.flagRegetAll = true;
        debouncerRequestRefresh.call(this);
      }));
    });
  }
  onClose() {
    return __async(this, null, function* () {
    });
  }
  setState(state, result) {
    var __superGet = (key) => super[key];
    return __async(this, null, function* () {
      if (state.activeSet) {
        this.activeSet = state.activeSet;
      }
      if (state.activeGranularity) {
        this.activeGranularity = state.activeGranularity;
      }
      return __superGet("setState").call(this, state, result);
    });
  }
  getState() {
    return {
      activeSet: this.activeSet,
      activeGranularity: this.activeGranularity
    };
  }
  initView() {
    return __async(this, null, function* () {
      yield this.bootDelay();
      this.collapseAll = this.settings.collapseAllAtStartup;
      this.verPN = yield this.checkPeriodicNotes();
      this.resetSearchRange();
      this.refreshView(true, true, true);
    });
  }
  bootDelay() {
    return __async(this, null, function* () {
      return new Promise((resolve) => {
        setTimeout(resolve, 200);
      });
    });
  }
  autoRefresh() {
    return __async(this, null, function* () {
      if (!(this.flagRedraw || this.flagRegetAll)) {
        return;
      }
      this.refreshView(this.flagRegetAll, this.flagRegetAll, true);
      this.flagRegetAll = false;
      this.flagRedraw = false;
    });
  }
  refreshView(flagRegetAll, flagGetTarget, flagGetOutline) {
    return __async(this, null, function* () {
      var _a;
      const startTime = performance.now();
      if (this.settings.showDebugInfo) {
        console.log("DNO:start refreshing view. CalendarSets:", this.calendarSets);
      }
      this.verPN = yield this.checkPeriodicNotes();
      if (this.verPN != 2) {
        if (flagRegetAll) {
          this.allDailyNotes = this.getAllNotes();
        }
        if (flagGetTarget) {
          this.targetFiles = getTargetFiles.call(this, this.allDailyNotes, GRANULARITY_LIST[this.activeGranularity]);
        }
        if (flagGetOutline) {
          this.fileInfo = yield getFileInfo.call(this, this.targetFiles);
          this.outlineData = yield getOutline.call(this, this.targetFiles);
        }
        drawUI.call(this);
        drawOutline.call(this, this.targetFiles, this.fileInfo, this.outlineData);
      } else {
        if (!this.calendarSets[this.activeSet]) {
          this.activeSet = 0;
        }
        if (!((_a = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _a.enabled)) {
          if (this.settings.showDebugInfo) {
            console.log("DNO: Calender set is not enabled. this.activeGranularity is set to 0. Calendarsets, this.activeSet, this.activeGranularity:", this.calendarSets, this.activeSet, this.activeGranularity);
          }
          this.activeGranularity = 0;
        }
        if (flagGetTarget) {
          this.targetFiles = getTargetPeriodicNotes.call(this, this.calendarSets[this.activeSet], GRANULARITY_LIST[this.activeGranularity]);
        }
        if (flagGetOutline) {
          this.fileInfo = yield getFileInfo.call(this, this.targetFiles);
          this.outlineData = yield getOutline.call(this, this.targetFiles);
        }
        drawUI.call(this);
        drawOutline.call(this, this.targetFiles, this.fileInfo, this.outlineData);
      }
      const endTime = performance.now();
      if (this.settings.showDebugInfo) {
        console.log("DNO: time required to refresh view: ", endTime - startTime);
      }
    });
  }
  scrollToElement(line, col) {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian6.MarkdownView);
    if (view) {
      view.editor.focus();
      view.editor.setCursor(line, col);
      view.editor.scrollIntoView({
        from: {
          line,
          ch: 0
        },
        to: {
          line,
          ch: 0
        }
      }, true);
    }
  }
  stripMarkdownSympol(text) {
    return text.replace(/(\[\[)|(\]\])/g, "");
  }
  resetSearchRange() {
    if (this.settings.initialSearchType == "forward") {
      const onsetDate = window.moment(this.settings.onset, "YYYY-MM-DD");
      if (onsetDate.isValid()) {
        this.searchRange.earliest = onsetDate;
        this.searchRange.latest = onsetDate.clone().add(this.settings.duration.day - 1, "days");
      } else {
        new import_obsidian6.Notice("onset date is invalid");
        this.searchRange.latest = window.moment().startOf("day");
        this.searchRange.earliest = window.moment().startOf("day").subtract(this.settings.duration.day - 1, "days");
      }
    }
    if (this.settings.initialSearchType == "backward") {
      this.searchRange.latest = window.moment().startOf("day");
      this.searchRange.earliest = window.moment().startOf("day").subtract(this.settings.duration.day - 1, "days");
    }
  }
  checkPeriodicNotes() {
    return __async(this, null, function* () {
      var _a, _b, _c, _d, _e, _f;
      if (this.settings.showDebugInfo) {
        console.log("DNO:checking the version of Periodic Notes plugin");
      }
      if (app.plugins.plugins["periodic-notes"]) {
        if (Number(app.plugins.plugins["periodic-notes"].manifest.version.split(".")[0]) >= 1) {
          this.calendarSets = (_a = this.app.plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.calendarSetManager.getCalendarSets();
          if (this.settings.showDebugInfo) {
            console.log("return of this.app.PN.calendarSetManager.getCalendarSets(): ", (_b = this.app.plugins.getPlugin("periodic-notes")) == null ? void 0 : _b.calendarSetManager.getCalendarSets());
            console.log("return of window.app.PN.calendarSetManager.getCalendarSets(): ", (_c = window.app.plugins.getPlugin("periodic-notes")) == null ? void 0 : _c.calendarSetManager.getCalendarSets());
          }
          if (!this.calendarSets.length) {
            new import_obsidian6.Notice("failed to import calendar sets to Daily Note Outline");
          }
          const initialGranularity = this.activeGranularity;
          while (!((_d = this.calendarSets[this.activeSet][GRANULARITY_LIST[this.activeGranularity]]) == null ? void 0 : _d.enabled)) {
            this.activeGranularity = (this.activeGranularity + 1) % GRANULARITY_LIST.length;
            if (this.activeGranularity == initialGranularity) {
              break;
            }
          }
          this.app.workspace.requestSaveLayout();
          if (this.settings.showDebugInfo) {
            console.log("obtained verPN: ", this.verPN, " calendarSets: ", this.calendarSets);
          }
          return 2;
        } else {
          this.settings.calendarSetsEnabled = false;
          this.activeSet = 0;
          yield this.plugin.saveSettings();
          const initialGranularity = this.activeGranularity;
          while (!((_f = (_e = this.app.plugins.getPlugin("periodic-notes").settings) == null ? void 0 : _e[GRANULARITY_TO_PERIODICITY[GRANULARITY_LIST[this.activeGranularity]]]) == null ? void 0 : _f.enabled)) {
            this.activeGranularity = (this.activeGranularity + 1) % GRANULARITY_LIST.length;
            if (this.activeGranularity == initialGranularity) {
              break;
            }
          }
          this.app.workspace.requestSaveLayout();
          return 1;
        }
      } else {
        this.settings.periodicNotesEnabled = false;
        this.settings.calendarSetsEnabled = false;
        this.activeGranularity = 0;
        this.activeSet = 0;
        yield this.plugin.saveSettings();
        return 0;
      }
    });
  }
  getAllNotes() {
    switch (this.activeGranularity) {
      case 0:
        return (0, import_obsidian_daily_notes_interface4.getAllDailyNotes)();
      case 1:
        return (0, import_obsidian_daily_notes_interface4.getAllWeeklyNotes)();
      case 2:
        return (0, import_obsidian_daily_notes_interface4.getAllMonthlyNotes)();
      case 3:
        return (0, import_obsidian_daily_notes_interface4.getAllQuarterlyNotes)();
      case 4:
        return (0, import_obsidian_daily_notes_interface4.getAllYearlyNotes)();
    }
  }
};

// src/setting.ts
var import_obsidian8 = __toModule(require("obsidian"));
var DailyNoteOutlineSettingTab = class extends import_obsidian8.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    var _a, _b;
    let { containerEl } = this;
    containerEl.empty();
    if (!((_a = app.internalPlugins.plugins["daily-notes"]) == null ? void 0 : _a.enabled) && !app.plugins.plugins["periodic-notes"]) {
      this.containerEl.createDiv("settings-banner", (banner) => {
        banner.createEl("h3", {
          text: "Neither Daily Note plugin nor Periodic Notes community plugin is enabled"
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Basics",
      cls: "setting-category"
    });
    new import_obsidian8.Setting(containerEl).setName("Initial search type").setDesc("search backward from today / forward from a specific date").addDropdown((dropdown) => {
      dropdown.addOption("backward", "backward").addOption("forward", "forward").setValue(this.plugin.settings.initialSearchType).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.initialSearchType = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Search duration").setDesc("number of days to search per page (default = 28)").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.duration.day)).setValue(String(this.plugin.settings.duration.day));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let parsed = parseInt(e.target.value, 10);
        if (parsed <= 0 || parsed >= 366) {
          parsed = DEFAULT_SETTINGS.duration.day;
        }
        this.plugin.settings.duration.day = parsed;
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      });
    });
    new import_obsidian8.Setting(containerEl).setName("Include future daily notes").setClass("setting-indent").setDesc("in backward search, include n days of future daily notes (default = 5)").addText((text) => {
      text.inputEl.setAttr("type", "number");
      text.setPlaceholder(String(DEFAULT_SETTINGS.offset)).setValue(String(this.plugin.settings.offset));
      text.inputEl.onblur = (e) => __async(this, null, function* () {
        let inputedValue = Number(e.target.value);
        if (inputedValue < 0) {
          inputedValue = 0;
        } else if (inputedValue >= 366) {
          inputedValue = 366;
        }
        this.plugin.settings.offset = inputedValue;
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      });
    });
    new import_obsidian8.Setting(containerEl).setName("Onset date").setClass("setting-indent").setDesc("onset date in forward search (YYYY-MM-DD)").addText((text) => {
      text.setPlaceholder(DEFAULT_SETTINGS.onset).setValue(this.plugin.settings.onset).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.onset = value;
        yield this.plugin.saveSettings();
        this.plugin.view.resetSearchRange();
        this.plugin.view.refreshView(false, true, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show headings").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.heading).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.heading = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show links").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.link).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.link = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show tags").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.tag).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.tag = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show list items & tasks").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showElements.listItems).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showElements.listItems = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.showElements.listItems) {
      new import_obsidian8.Setting(containerEl).setName("Show all root list items").setDesc("if disabled, only top item of the list is displayed").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.allRootItems).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.allRootItems = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      new import_obsidian8.Setting(containerEl).setName("Show all tasks").setDesc("show all task items regardless of their level").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.allTasks).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.allTasks = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      new import_obsidian8.Setting(containerEl).setName("Task only").setDesc("if enabled, normal list items are hidden").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.taskOnly).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.taskOnly = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      new import_obsidian8.Setting(containerEl).setName("Hide completed tasks").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.hideCompletedTasks).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.hideCompletedTasks = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    new import_obsidian8.Setting(containerEl).setName("Collapse all at startup").setDesc("enable collapse all function at startup").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.collapseAllAtStartup).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.collapseAllAtStartup = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, false);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Display file information for daily notes").setDesc("choose type of file information to display with the file name for daily notes").addDropdown((dropdown) => {
      dropdown.addOption("none", "none").addOption("lines", "lines of the note").addOption("days", "days from base date").addOption("dow", "day of the week").addOption("dowshort", "day of the week(short)").addOption("weeknumber", "week number").addOption("tag", "first tag").setValue(this.plugin.settings.displayFileInfoDaily).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.displayFileInfoDaily = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.periodicNotesEnabled) {
      new import_obsidian8.Setting(containerEl).setName("Display file information for periodic notes").setDesc("choose type of file information to display for periodic notes other than daily notes").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("lines", "lines of the note").addOption("days", "distance from base date").addOption("tag", "first tag").setValue(this.plugin.settings.displayFileInfoPeriodic).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.displayFileInfoPeriodic = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    new import_obsidian8.Setting(containerEl).setName("Position of the plugin view").setDesc("Specify default position where this plugin's view appears").addDropdown((dropdown) => {
      dropdown.addOption("right", "right side pane").addOption("left", "left side pane").addOption("tab", "new tab in main pane").addOption("split", "splitted pane").addOption("popout", "popout window").setValue(this.plugin.settings.viewPosition).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.viewPosition = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    this.containerEl.createEl("h4", {
      text: "Periodic Notes",
      cls: "setting-category"
    });
    if (!app.plugins.plugins["periodic-notes"]) {
      this.containerEl.createEl("p", {
        text: "Periodic Notes community plugin is not enabled",
        cls: "setting-item-description"
      });
    } else {
      const verCheck = Number((_b = app.plugins.plugins["periodic-notes"]) == null ? void 0 : _b.manifest.version.split(".")[0]);
      if (verCheck >= 1) {
        new import_obsidian8.Setting(containerEl).setName("calendar sets").setDesc("enable calendar sets feature. You have to activate and configure the beta version of the Periodic Notes Plugin first.").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.calendarSetsEnabled).onChange((value) => __async(this, null, function* () {
            this.plugin.settings.calendarSetsEnabled = value;
            this.display();
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(true, true, true);
          }));
        });
      }
      new import_obsidian8.Setting(containerEl).setName("periodic notes").setDesc("enable weekly/monthly/quarterly/yearly notes. You have to activate and configure the Periodic Notes Plugin first.").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.periodicNotesEnabled).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.periodicNotesEnabled = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.resetSearchRange();
          this.plugin.view.refreshView(true, true, true);
        }));
      });
      if (this.plugin.settings.periodicNotesEnabled) {
        this.containerEl.createEl("p", {
          text: "Search duration for periodic notes",
          cls: "setting-category"
        });
        new import_obsidian8.Setting(containerEl).setName("weekly notes").setClass("setting-indent").setDesc("number of weeks to search per page (default = 12)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.week)).setValue(String(this.plugin.settings.duration.week));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.week;
            }
            this.plugin.settings.duration.week = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
        new import_obsidian8.Setting(containerEl).setName("monthly notes").setClass("setting-indent").setDesc("number of months to search per page (default = 12)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.month)).setValue(String(this.plugin.settings.duration.month));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.month;
            }
            this.plugin.settings.duration.month = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
        new import_obsidian8.Setting(containerEl).setName("quarterly notes").setClass("setting-indent").setDesc("number of quarters to search per page (default = 8)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.quarter)).setValue(String(this.plugin.settings.duration.quarter));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.quarter;
            }
            this.plugin.settings.duration.quarter = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
        new import_obsidian8.Setting(containerEl).setName("yearly notes").setClass("setting-indent").setDesc("number of years to search per page (default = 12)").addText((text) => {
          text.inputEl.setAttr("type", "number");
          text.setPlaceholder(String(DEFAULT_SETTINGS.duration.year)).setValue(String(this.plugin.settings.duration.year));
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            let parsed = parseInt(e.target.value, 10);
            if (parsed <= 0 || parsed >= 366) {
              parsed = DEFAULT_SETTINGS.duration.year;
            }
            this.plugin.settings.duration.year = parsed;
            yield this.plugin.saveSettings();
            this.plugin.view.resetSearchRange();
            this.plugin.view.refreshView(false, true, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("attach date range to weekly notes").setDesc("display date range next to weekly notes' name").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.attachWeeklyNotesName).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.attachWeeklyNotesName = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    this.containerEl.createEl("h4", {
      text: "Headings",
      cls: "setting-category"
    });
    if (this.plugin.settings.showElements.heading) {
      this.containerEl.createEl("p", {
        text: "Heading level to display",
        cls: "setting-item-description"
      });
      this.plugin.settings.headingLevel.forEach((value, index, arry) => {
        new import_obsidian8.Setting(containerEl).setName(`Level${index + 1}`).setClass("setting-indent").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.headingLevel[index]).onChange((value2) => __async(this, null, function* () {
            this.plugin.settings.headingLevel[index] = value2;
            this.display();
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          }));
        });
      });
    } else {
      this.containerEl.createEl("p", {
        text: "To display this section, activate 'Show headings' in Basics section.",
        cls: "setting-item-description"
      });
    }
    this.containerEl.createEl("h4", {
      text: "Preview"
    });
    new import_obsidian8.Setting(containerEl).setName("Inline preview").setDesc("Show a few subsequent words next to the outline element name").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.inlinePreview).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.inlinePreview = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Tooltip preview").setDesc("Show subsequent sentences as a tooltip when hover").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.tooltipPreview).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.tooltipPreview = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.tooltipPreview) {
      new import_obsidian8.Setting(containerEl).setName("Tooltip preview direction").setClass("setting-indent").setDesc("specify the direction to display tooltip preview").addDropdown((dropdown) => {
        dropdown.addOption("left", "left").addOption("right", "right").addOption("bottom", "bottom").addOption("top", "top").setValue(this.plugin.settings.tooltipPreviewDirection).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.tooltipPreviewDirection = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    this.containerEl.createEl("h4", {
      text: "Simple filter",
      cls: "setting-category"
    });
    if (this.plugin.settings.showElements.heading) {
      new import_obsidian8.Setting(containerEl).setName("Headings to ignore").setDesc("Headings which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.heading.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.heading = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.link) {
      new import_obsidian8.Setting(containerEl).setName("Links to ignore").setDesc("Links which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.link.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.link = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.tag) {
      new import_obsidian8.Setting(containerEl).setName("Tags to ignore").setDesc("tags which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.tag.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.tag = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.listItems) {
      new import_obsidian8.Setting(containerEl).setName("List items to ignore").setDesc("List items which include listed words will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToIgnore.listItems.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToIgnore.listItems = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Include",
      cls: "setting-category"
    });
    this.containerEl.createEl("p", {
      text: "If you specify one outline element type and words to include, only elements which belong to the included elements are displayed.",
      cls: "setting-item-description"
    });
    this.containerEl.createEl("p", {
      text: "**NOTE**: If Include filter is set incorrectly, a number of outlines may not be displayed. In such a case, try setting 'Element type for include' to 'no Include filter'.",
      cls: "setting-item-description"
    });
    new import_obsidian8.Setting(containerEl).setName("Element type for include").addDropdown((dropdown) => {
      dropdown.addOption("none", "no Include filter").addOption("heading", "heading").addOption("link", "link").addOption("tag", "tag").addOption("listItems", "listItems").setValue(this.plugin.settings.includeOnly).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.includeOnly = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.includeOnly != "none") {
      new import_obsidian8.Setting(containerEl).setName("Words to include").setClass("setting-indent").setDesc("Only elements specified in 'Element type for include' which include listed words will be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToInclude.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToInclude = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian8.Setting(containerEl).setName("Include the beginning part").setClass("setting-indent").setDesc("Specify whether to include the beginning parts of each daily note with no element to include ").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.includeBeginning).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.includeBeginning = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    this.containerEl.createEl("h4", {
      text: "Exclude",
      cls: "setting-category"
    });
    this.containerEl.createEl("p", {
      text: "Specified outline elements and elements belonging to that element will not be displayed.",
      cls: "setting-item-description"
    });
    new import_obsidian8.Setting(containerEl).setName("Exclusion ends at").setDesc("Excluding elements specified below ends at the selected type of elements. If you specified 'Element type for include' above, this value is ignored and excludeing elements ends at that type of elements.").addDropdown((dropdown) => {
      dropdown.addOption("none", "none").addOption("heading", "heading").addOption("link", "link").addOption("tag", "tag").addOption("listItems", "listItems").setValue(this.plugin.settings.primeElement).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.primeElement = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.showElements.heading) {
      new import_obsidian8.Setting(containerEl).setName("Headings to exclude").setDesc("Headings which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.heading.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.heading = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.link) {
      new import_obsidian8.Setting(containerEl).setName("Links to exclude").setDesc("Links which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.link.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.link = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.tag) {
      new import_obsidian8.Setting(containerEl).setName("Tags to exclude").setDesc("tags which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.tag.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.tag = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.listItems) {
      new import_obsidian8.Setting(containerEl).setName("List items to exclude").setDesc("List items which include listed words and elements which belong to them will not be displayed. Separate with a new line.").addTextArea((textArea) => {
        textArea.setValue(this.plugin.settings.wordsToExclude.listItems.join("\n"));
        textArea.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.wordsToExclude.listItems = inputedValue.split("\n");
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Appearance",
      cls: "setting-category"
    });
    new import_obsidian8.Setting(containerEl).setName("Indent other than headings").setDesc("Whether other elements should be indented to preceding headings").addDropdown((dropdown) => {
      dropdown.addOption("0", "none").addOption("1", "follow preceding heading").addOption("2", "preceding heading + 1").setValue(String(this.plugin.settings.indentFollowHeading)).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.indentFollowHeading = Number(value);
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Note title background color").setDesc("No change: use the current CSS theme setting values. Accent: highlight file names. Custom: Specify any color code. Please update the view when you toggled Obsidian's base theme(light/dark). (default = no change)").addDropdown((dropdown) => {
      dropdown.addOption("none", "no change").addOption("accent", "accent").addOption("custom", "custom").setValue(this.plugin.settings.noteTitleBackgroundColor).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.noteTitleBackgroundColor = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    if (this.plugin.settings.noteTitleBackgroundColor == "custom") {
      new import_obsidian8.Setting(containerEl).setName("Custom note title background color (light)").setClass("setting-indent").setDesc("Specify background color (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColor.custom.light);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColor.custom.light = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian8.Setting(containerEl).setName("Custom note title background color (light, on hover)").setClass("setting-indent").setDesc("Specify background color on hover (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColorHover.custom.light);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColorHover.custom.light = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian8.Setting(containerEl).setName("Custom note title background color (dark)").setClass("setting-indent").setDesc("Specify background color (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColor.custom.dark);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColor.custom.dark = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian8.Setting(containerEl).setName("Custom note title background color (dark, on hover)").setClass("setting-indent").setDesc("Specify background color on hover (ex. #FFFFFF or rgb(255,255,255))").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setValue(this.plugin.settings.customNoteTitleBackgroundColorHover.custom.dark);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.customNoteTitleBackgroundColorHover.custom.dark = inputedValue;
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.heading) {
      this.containerEl.createEl("p", {
        text: "Headings",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("hash", "hash").addOption("chevron-right", "chevron-right").addOption("custom", "custom").setValue(this.plugin.settings.icon.heading).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.heading = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.heading == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.heading).setValue(this.plugin.settings.customIcon.heading);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.heading = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.heading).setValue(this.plugin.settings.prefix.heading);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.heading = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      if (this.plugin.settings.prefix.heading != "") {
        new import_obsidian8.Setting(containerEl).setName("Repeat heading prefix").setClass("setting-indent-2").addDropdown((dropdown) => {
          dropdown.addOption("none", "none").addOption("level", "as many times as its level").addOption("levelminus1", "level - 1").setValue(this.plugin.settings.repeatHeadingPrefix).onChange((value) => __async(this, null, function* () {
            this.plugin.settings.repeatHeadingPrefix = value;
            this.display();
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          }));
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Add indent").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.indent.heading).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.indent.heading = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
    }
    if (this.plugin.settings.showElements.link) {
      this.containerEl.createEl("p", {
        text: "Links",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("link", "link").addOption("link-2", "link-2").addOption("custom", "custom").setValue(this.plugin.settings.icon.link).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.link = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.link == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.link).setValue(this.plugin.settings.customIcon.link);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.link = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.link).setValue(this.plugin.settings.prefix.link);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.link = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.tag) {
      this.containerEl.createEl("p", {
        text: "Tags",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("tag", "tag").addOption("hash", "hash").addOption("custom", "custom").setValue(this.plugin.settings.icon.tag).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.tag = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.tag == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.tag).setValue(this.plugin.settings.customIcon.tag);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.tag = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.tag).setValue(this.plugin.settings.prefix.tag);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.tag = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    if (this.plugin.settings.showElements.link) {
      this.containerEl.createEl("p", {
        text: "List items",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("list", "list").addOption("chevron-right", "chevron-right").addOption("minus", "minus").addOption("circle-dot", "circle-dot").addOption("asterisk", "asterisk").addOption("custom", "custom").setValue(this.plugin.settings.icon.listItems).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.listItems = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.listItems == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.listItems).setValue(this.plugin.settings.customIcon.listItems);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.listItems = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.listItems).setValue(this.plugin.settings.prefix.listItems);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.listItems = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      this.containerEl.createEl("p", {
        text: "Tasks",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("square", "square").addOption("circle", "circle").addOption("list-checks", "list-checks").addOption("custom", "custom").setValue(this.plugin.settings.icon.task).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.task = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.task == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.task).setValue(this.plugin.settings.customIcon.task);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.task = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.task).setValue(this.plugin.settings.prefix.task);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.task = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
      new import_obsidian8.Setting(containerEl).setName("Add checkbox text to prefix").setDesc("add [ ] or [x]").setClass("setting-indent").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.addCheckboxText).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.addCheckboxText = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      this.containerEl.createEl("p", {
        text: "Completed tasks",
        cls: "setting-category"
      });
      new import_obsidian8.Setting(containerEl).setName("Icon").setClass("setting-indent").addDropdown((dropdown) => {
        dropdown.addOption("none", "none").addOption("check-square", "check-square").addOption("check-circle", "check-circle").addOption("check", "check").addOption("custom", "custom").setValue(this.plugin.settings.icon.taskDone).onChange((value) => __async(this, null, function* () {
          this.plugin.settings.icon.taskDone = value;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        }));
      });
      if (this.plugin.settings.icon.taskDone == "custom") {
        new import_obsidian8.Setting(containerEl).setName("Custom icon").setClass("setting-indent-2").setDesc("enter Lucide Icon name").addText((text) => {
          text.inputEl.setAttr("type", "string");
          text.setPlaceholder(DEFAULT_SETTINGS.customIcon.taskDone).setValue(this.plugin.settings.customIcon.taskDone);
          text.inputEl.onblur = (e) => __async(this, null, function* () {
            const inputedValue = e.target.value;
            this.plugin.settings.customIcon.taskDone = inputedValue;
            yield this.plugin.saveSettings();
            this.plugin.view.refreshView(false, false, true);
          });
        });
      }
      new import_obsidian8.Setting(containerEl).setName("Prefix").setClass("setting-indent").addText((text) => {
        text.inputEl.setAttr("type", "string");
        text.setPlaceholder(DEFAULT_SETTINGS.prefix.taskDone).setValue(this.plugin.settings.prefix.taskDone);
        text.inputEl.onblur = (e) => __async(this, null, function* () {
          const inputedValue = e.target.value;
          this.plugin.settings.prefix.taskDone = inputedValue;
          this.display();
          yield this.plugin.saveSettings();
          this.plugin.view.refreshView(false, false, true);
        });
      });
    }
    this.containerEl.createEl("h4", {
      text: "Others",
      cls: "setting-category"
    });
    new import_obsidian8.Setting(containerEl).setName("Show only .md files").setDesc("Turn on if non-md files are displayed in the view").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.markdownOnly).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.markdownOnly = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    new import_obsidian8.Setting(containerEl).setName("Show only exactly matched files").setDesc("Turn on if you do not want to see files that do not exactly match the format").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.exactMatchOnly).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.exactMatchOnly = value;
        this.display();
        yield this.plugin.saveSettings();
        this.plugin.view.refreshView(false, false, true);
      }));
    });
    this.containerEl.createEl("h4", {
      text: "Debug",
      cls: "setting-category"
    });
    new import_obsidian8.Setting(containerEl).setName("show debug information").setDesc("display debug information in the console").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showDebugInfo).onChange((value) => __async(this, null, function* () {
        this.plugin.settings.showDebugInfo = value;
        this.display();
        yield this.plugin.saveSettings();
      }));
    });
  }
};

// src/main.ts
var DEFAULT_SETTINGS = {
  initialSearchType: "backward",
  offset: 7,
  onset: "2020-03-30",
  duration: {
    day: 28,
    week: 12,
    month: 12,
    quarter: 8,
    year: 3
  },
  showElements: {
    heading: true,
    link: true,
    tag: true,
    listItems: true
  },
  headingLevel: [true, true, true, false, false, false],
  allRootItems: false,
  allTasks: true,
  taskOnly: false,
  hideCompletedTasks: false,
  displayFileInfo: "lines",
  displayFileInfoDaily: "lines",
  displayFileInfoPeriodic: "lines",
  viewPosition: "right",
  markdownOnly: true,
  exactMatchOnly: false,
  wordsToIgnore: {
    heading: [],
    link: [],
    tag: [],
    listItems: []
  },
  inlinePreview: true,
  tooltipPreview: true,
  tooltipPreviewDirection: "left",
  includeOnly: "none",
  wordsToInclude: [],
  includeBeginning: true,
  primeElement: "none",
  wordsToExclude: {
    heading: [],
    link: [],
    tag: [],
    listItems: []
  },
  wordsToExtract: "",
  icon: {
    heading: "none",
    link: "link",
    tag: "tag",
    listItems: "list",
    note: "file",
    task: "square",
    taskDone: "check-square"
  },
  customIcon: {
    heading: "hash",
    link: "link",
    tag: "tag",
    listItems: "list",
    note: "file",
    task: "square",
    taskDone: "check-square"
  },
  indent: {
    heading: true,
    link: true,
    listItems: true
  },
  indentFollowHeading: 0,
  prefix: {
    heading: "",
    link: "",
    tag: "",
    listItems: "",
    task: "",
    taskDone: ""
  },
  repeatHeadingPrefix: "none",
  addCheckboxText: false,
  periodicNotesEnabled: true,
  calendarSetsEnabled: true,
  attachWeeklyNotesName: true,
  showDebugInfo: false,
  noteTitleBackgroundColor: "none",
  customNoteTitleBackgroundColor: {
    accent: {
      light: "#E3E3E3",
      dark: "#363636"
    },
    custom: {
      light: "#BEBEBE",
      dark: "#4E4E4E"
    }
  },
  customNoteTitleBackgroundColorHover: {
    accent: {
      light: "#D3D3D3",
      dark: "#464646"
    },
    custom: {
      light: "#AEAEAE",
      dark: "#5E5E5E"
    }
  },
  fileFlag: {},
  taskIcon: {
    incomplete: { symbol: "/", icon: "columns" },
    canceled: { symbol: "-", icon: "minus-square" },
    fowarded: { symbol: ">", icon: "send" },
    scheduling: { symbol: "<", icon: "calendar" },
    question: { symbol: "?", icon: "help-circle" },
    important: { symbol: "!", icon: "alert-triangle" },
    star: { symbol: "*", icon: "star" },
    quote: { symbol: '"', icon: "quote" },
    location: { symbol: "l", icon: "map-pin" },
    bookmark: { symbol: "b", icon: "bookmark" },
    information: { symbol: "i", icon: "info" },
    savings: { symbol: "S", icon: "dollar-sign" },
    idea: { symbol: "I", icon: "siren" },
    pros: { symbol: "p", icon: "thumbs-up" },
    cons: { symbol: "c", icon: "thumbs-down" },
    fire: { symbol: "f", icon: "flame" },
    key: { symbol: "k", icon: "key" },
    win: { symbol: "w", icon: "cake" },
    up: { symbol: "u", icon: "trending-up" },
    down: { symbol: "d", icon: "trending-down" }
  },
  collapseAllAtStartup: false
};
var DAYS_PER_UNIT = {
  day: 1,
  week: 7,
  month: 30,
  quarter: 90,
  year: 365
};
var GRANULARITY_LIST = ["day", "week", "month", "quarter", "year"];
var GRANULARITY_TO_PERIODICITY = {
  day: "daily",
  week: "weekly",
  month: "monthly",
  quarter: "quarterly",
  year: "yearly"
};
var FILEINFO_TO_DISPLAY = {
  none: "none",
  lines: "num of lines",
  days: "distance",
  tag: "first tag"
};
var FILEINFO_TO_DISPLAY_DAY = {
  none: "none",
  lines: "num of lines",
  days: "distance",
  tag: "first tag",
  dow: "day of week",
  dowshort: "day of week(short)",
  weeknumber: "week number"
};
var DailyNoteOutlinePlugin3 = class extends import_obsidian9.Plugin {
  constructor() {
    super(...arguments);
    this.checkView = (activateView) => __async(this, null, function* () {
      let [leaf] = this.app.workspace.getLeavesOfType(DailyNoteOutlineViewType);
      if (!leaf) {
        switch (this.settings.viewPosition) {
          case "right":
            leaf = this.app.workspace.getRightLeaf(false);
            break;
          case "left":
            leaf = this.app.workspace.getLeftLeaf(false);
            break;
          case "tab":
            leaf = this.app.workspace.getLeaf("tab");
            break;
          case "split":
            leaf = this.app.workspace.getLeaf("split");
            break;
          case "popout":
            leaf = this.app.workspace.getLeaf("window");
            break;
        }
        yield leaf.setViewState({ type: DailyNoteOutlineViewType });
      }
      if (activateView) {
        this.app.workspace.revealLeaf(leaf);
      }
    });
  }
  onload() {
    return __async(this, null, function* () {
      yield this.loadSettings();
      this.registerView(DailyNoteOutlineViewType, (leaf) => this.view = new DailyNoteOutlineView(leaf, this, this.settings));
      this.addCommand({
        id: "daily-note-outline-open",
        name: "Open Outline",
        callback: () => __async(this, null, function* () {
          this.checkView(true);
        })
      });
      this.app.workspace.onLayoutReady(() => __async(this, null, function* () {
        this.checkView(false);
      }));
      this.addSettingTab(new DailyNoteOutlineSettingTab(this.app, this));
    });
  }
  onunload() {
    this.app.workspace.detachLeavesOfType(DailyNoteOutlineViewType);
  }
  loadSettings() {
    return __async(this, null, function* () {
      this.settings = Object.assign({}, DEFAULT_SETTINGS, yield this.loadData());
      if (typeof this.settings.duration === "number") {
        this.settings.duration = DEFAULT_SETTINGS.duration;
      }
    });
  }
  saveSettings() {
    return __async(this, null, function* () {
      yield this.saveData(this.settings);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibm9kZV9tb2R1bGVzL29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZS9kaXN0L21haW4uanMiLCAic3JjL21haW4udHMiLCAic3JjL3ZpZXcudHMiLCAic3JjL2RyYXdVSS50cyIsICJzcmMvY3JlYXRlQW5kT3BlbkRhaWx5Tm90ZS50cyIsICJzcmMvbW9kYWxFeHRyYWN0LnRzIiwgInNyYy9jcmVhdGVBbmRPcGVuUGVyaW9kaWNOb3RlLnRzIiwgInNyYy9nZXRUYXJnZXRGaWxlcy50cyIsICJzcmMvZ2V0T3V0bGluZS50cyIsICJzcmMvY29uc3RydWN0RE9NLnRzIiwgInNyYy91dGlsLnRzIiwgInNyYy9zZXR0aW5nLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyIndXNlIHN0cmljdCc7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG5cbnZhciBvYnNpZGlhbiA9IHJlcXVpcmUoJ29ic2lkaWFuJyk7XG5cbmNvbnN0IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQgPSBcIllZWVktTU0tRERcIjtcbmNvbnN0IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFUID0gXCJnZ2dnLVtXXXd3XCI7XG5jb25zdCBERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQgPSBcIllZWVktTU1cIjtcbmNvbnN0IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFUID0gXCJZWVlZLVtRXVFcIjtcbmNvbnN0IERFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFUID0gXCJZWVlZXCI7XG5cbmZ1bmN0aW9uIHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhwZXJpb2RpY2l0eSkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IHdpbmRvdy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy5bcGVyaW9kaWNpdHldPy5lbmFibGVkO1xufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYGRhaWx5LW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXREYWlseU5vdGVTZXR0aW5ncygpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCB7IGludGVybmFsUGx1Z2lucywgcGx1Z2lucyB9ID0gd2luZG93LmFwcDtcbiAgICAgICAgaWYgKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcImRhaWx5XCIpKSB7XG4gICAgICAgICAgICBjb25zdCB7IGZvcm1hdCwgZm9sZGVyLCB0ZW1wbGF0ZSB9ID0gcGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LmRhaWx5IHx8IHt9O1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCB8fCBERUZBVUxUX0RBSUxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgICAgIGZvbGRlcjogZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCB7IGZvbGRlciwgZm9ybWF0LCB0ZW1wbGF0ZSB9ID0gaW50ZXJuYWxQbHVnaW5zLmdldFBsdWdpbkJ5SWQoXCJkYWlseS1ub3Rlc1wiKT8uaW5zdGFuY2U/Lm9wdGlvbnMgfHwge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IGZvcm1hdCB8fCBERUZBVUxUX0RBSUxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBmb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gZGFpbHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgd2Vla2x5LW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRXZWVrbHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICAgICAgY29uc3QgY2FsZW5kYXJTZXR0aW5ncyA9IHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwiY2FsZW5kYXJcIik/Lm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IHBlcmlvZGljTm90ZXNTZXR0aW5ncyA9IHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy53ZWVrbHk7XG4gICAgICAgIGlmIChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJ3ZWVrbHlcIikpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiBwZXJpb2RpY05vdGVzU2V0dGluZ3MuZm9ybWF0IHx8IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgICAgIGZvbGRlcjogcGVyaW9kaWNOb3Rlc1NldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IHBlcmlvZGljTm90ZXNTZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gY2FsZW5kYXJTZXR0aW5ncyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogc2V0dGluZ3Mud2Vla2x5Tm90ZUZvcm1hdCB8fCBERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3Mud2Vla2x5Tm90ZUZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3Mud2Vla2x5Tm90ZVRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gd2Vla2x5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRNb250aGx5Tm90ZVNldHRpbmdzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJtb250aGx5XCIpICYmXG4gICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ubW9udGhseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9NT05USExZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy5mb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gbW9udGhseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGBwZXJpb2RpYy1ub3Rlc2AgcGx1Z2luXG4gKiB0byBrZWVwIGJlaGF2aW9yIG9mIGNyZWF0aW5nIGEgbmV3IG5vdGUgaW4tc3luYy5cbiAqL1xuZnVuY3Rpb24gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzKCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGx1Z2luTWFuYWdlciA9IHdpbmRvdy5hcHAucGx1Z2lucztcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IChzaG91bGRVc2VQZXJpb2RpY05vdGVzU2V0dGluZ3MoXCJxdWFydGVybHlcIikgJiZcbiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy5xdWFydGVybHkpIHx8XG4gICAgICAgICAgICB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogc2V0dGluZ3MuZm9ybWF0IHx8IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy5mb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgdGVtcGxhdGU6IHNldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmluZm8oXCJObyBjdXN0b20gcXVhcnRlcmx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcInllYXJseVwiKSAmJlxuICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LnllYXJseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSB5ZWFybHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG5cbi8vIENyZWRpdDogQGNyZWF0aW9uaXgvcGF0aC5qc1xuZnVuY3Rpb24gam9pbiguLi5wYXJ0U2VnbWVudHMpIHtcbiAgICAvLyBTcGxpdCB0aGUgaW5wdXRzIGludG8gYSBsaXN0IG9mIHBhdGggY29tbWFuZHMuXG4gICAgbGV0IHBhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0U2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHBhcnRzID0gcGFydHMuY29uY2F0KHBhcnRTZWdtZW50c1tpXS5zcGxpdChcIi9cIikpO1xuICAgIH1cbiAgICAvLyBJbnRlcnByZXQgdGhlIHBhdGggY29tbWFuZHMgdG8gZ2V0IHRoZSBuZXcgcmVzb2x2ZWQgcGF0aC5cbiAgICBjb25zdCBuZXdQYXJ0cyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gcGFydHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgICAgLy8gUmVtb3ZlIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXNcbiAgICAgICAgLy8gQWxzbyByZW1vdmUgXCIuXCIgc2VnbWVudHNcbiAgICAgICAgaWYgKCFwYXJ0IHx8IHBhcnQgPT09IFwiLlwiKVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIC8vIFB1c2ggbmV3IHBhdGggc2VnbWVudHMuXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIG5ld1BhcnRzLnB1c2gocGFydCk7XG4gICAgfVxuICAgIC8vIFByZXNlcnZlIHRoZSBpbml0aWFsIHNsYXNoIGlmIHRoZXJlIHdhcyBvbmUuXG4gICAgaWYgKHBhcnRzWzBdID09PSBcIlwiKVxuICAgICAgICBuZXdQYXJ0cy51bnNoaWZ0KFwiXCIpO1xuICAgIC8vIFR1cm4gYmFjayBpbnRvIGEgc2luZ2xlIHN0cmluZyBwYXRoLlxuICAgIHJldHVybiBuZXdQYXJ0cy5qb2luKFwiL1wiKTtcbn1cbmZ1bmN0aW9uIGJhc2VuYW1lKGZ1bGxQYXRoKSB7XG4gICAgbGV0IGJhc2UgPSBmdWxsUGF0aC5zdWJzdHJpbmcoZnVsbFBhdGgubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgaWYgKGJhc2UubGFzdEluZGV4T2YoXCIuXCIpICE9IC0xKVxuICAgICAgICBiYXNlID0gYmFzZS5zdWJzdHJpbmcoMCwgYmFzZS5sYXN0SW5kZXhPZihcIi5cIikpO1xuICAgIHJldHVybiBiYXNlO1xufVxuYXN5bmMgZnVuY3Rpb24gZW5zdXJlRm9sZGVyRXhpc3RzKHBhdGgpIHtcbiAgICBjb25zdCBkaXJzID0gcGF0aC5yZXBsYWNlKC9cXFxcL2csIFwiL1wiKS5zcGxpdChcIi9cIik7XG4gICAgZGlycy5wb3AoKTsgLy8gcmVtb3ZlIGJhc2VuYW1lXG4gICAgaWYgKGRpcnMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGRpciA9IGpvaW4oLi4uZGlycyk7XG4gICAgICAgIGlmICghd2luZG93LmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZGlyKSkge1xuICAgICAgICAgICAgYXdhaXQgd2luZG93LmFwcC52YXVsdC5jcmVhdGVGb2xkZXIoZGlyKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGdldE5vdGVQYXRoKGRpcmVjdG9yeSwgZmlsZW5hbWUpIHtcbiAgICBpZiAoIWZpbGVuYW1lLmVuZHNXaXRoKFwiLm1kXCIpKSB7XG4gICAgICAgIGZpbGVuYW1lICs9IFwiLm1kXCI7XG4gICAgfVxuICAgIGNvbnN0IHBhdGggPSBvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGpvaW4oZGlyZWN0b3J5LCBmaWxlbmFtZSkpO1xuICAgIGF3YWl0IGVuc3VyZUZvbGRlckV4aXN0cyhwYXRoKTtcbiAgICByZXR1cm4gcGF0aDtcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSkge1xuICAgIGNvbnN0IHsgbWV0YWRhdGFDYWNoZSwgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgdGVtcGxhdGVQYXRoID0gb2JzaWRpYW4ubm9ybWFsaXplUGF0aCh0ZW1wbGF0ZSk7XG4gICAgaWYgKHRlbXBsYXRlUGF0aCA9PT0gXCIvXCIpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShbXCJcIiwgbnVsbF0pO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSBtZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHRlbXBsYXRlUGF0aCwgXCJcIik7XG4gICAgICAgIGNvbnN0IGNvbnRlbnRzID0gYXdhaXQgdmF1bHQuY2FjaGVkUmVhZCh0ZW1wbGF0ZUZpbGUpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBJRm9sZEluZm8gPSB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLmxvYWQodGVtcGxhdGVGaWxlKTtcbiAgICAgICAgcmV0dXJuIFtjb250ZW50cywgSUZvbGRJbmZvXTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gcmVhZCB0aGUgZGFpbHkgbm90ZSB0ZW1wbGF0ZSAnJHt0ZW1wbGF0ZVBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJGYWlsZWQgdG8gcmVhZCB0aGUgZGFpbHkgbm90ZSB0ZW1wbGF0ZVwiKTtcbiAgICAgICAgcmV0dXJuIFtcIlwiLCBudWxsXTtcbiAgICB9XG59XG5cbi8qKlxuICogZGF0ZVVJRCBpcyBhIHdheSBvZiB3ZWVrbHkgaWRlbnRpZnlpbmcgZGFpbHkvd2Vla2x5L21vbnRobHkgbm90ZXMuXG4gKiBUaGV5IGFyZSBwcmVmaXhlZCB3aXRoIHRoZSBncmFudWxhcml0eSB0byBhdm9pZCBhbWJpZ3VpdHkuXG4gKi9cbmZ1bmN0aW9uIGdldERhdGVVSUQoZGF0ZSwgZ3JhbnVsYXJpdHkgPSBcImRheVwiKSB7XG4gICAgY29uc3QgdHMgPSBkYXRlLmNsb25lKCkuc3RhcnRPZihncmFudWxhcml0eSkuZm9ybWF0KCk7XG4gICAgcmV0dXJuIGAke2dyYW51bGFyaXR5fS0ke3RzfWA7XG59XG5mdW5jdGlvbiByZW1vdmVFc2NhcGVkQ2hhcmFjdGVycyhmb3JtYXQpIHtcbiAgICByZXR1cm4gZm9ybWF0LnJlcGxhY2UoL1xcW1teXFxdXSpcXF0vZywgXCJcIik7IC8vIHJlbW92ZSBldmVyeXRoaW5nIHdpdGhpbiBicmFja2V0c1xufVxuLyoqXG4gKiBYWFg6IFdoZW4gcGFyc2luZyBkYXRlcyB0aGF0IGNvbnRhaW4gYm90aCB3ZWVrIG51bWJlcnMgYW5kIG1vbnRocyxcbiAqIE1vbWVudCBjaG9zZXMgdG8gaWdub3JlIHRoZSB3ZWVrIG51bWJlcnMuIEZvciB0aGUgd2VlayBkYXRlVUlELCB3ZVxuICogd2FudCB0aGUgb3Bwb3NpdGUgYmVoYXZpb3IuIFN0cmlwIHRoZSBNTU0gZnJvbSB0aGUgZm9ybWF0IHRvIHBhdGNoLlxuICovXG5mdW5jdGlvbiBpc0Zvcm1hdEFtYmlndW91cyhmb3JtYXQsIGdyYW51bGFyaXR5KSB7XG4gICAgaWYgKGdyYW51bGFyaXR5ID09PSBcIndlZWtcIikge1xuICAgICAgICBjb25zdCBjbGVhbkZvcm1hdCA9IHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCk7XG4gICAgICAgIHJldHVybiAoL3d7MSwyfS9pLnRlc3QoY2xlYW5Gb3JtYXQpICYmXG4gICAgICAgICAgICAoL017MSw0fS8udGVzdChjbGVhbkZvcm1hdCkgfHwgL0R7MSw0fS8udGVzdChjbGVhbkZvcm1hdCkpKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21GaWxlKGZpbGUsIGdyYW51bGFyaXR5KSB7XG4gICAgcmV0dXJuIGdldERhdGVGcm9tRmlsZW5hbWUoZmlsZS5iYXNlbmFtZSwgZ3JhbnVsYXJpdHkpO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21QYXRoKHBhdGgsIGdyYW51bGFyaXR5KSB7XG4gICAgcmV0dXJuIGdldERhdGVGcm9tRmlsZW5hbWUoYmFzZW5hbWUocGF0aCksIGdyYW51bGFyaXR5KTtcbn1cbmZ1bmN0aW9uIGdldERhdGVGcm9tRmlsZW5hbWUoZmlsZW5hbWUsIGdyYW51bGFyaXR5KSB7XG4gICAgY29uc3QgZ2V0U2V0dGluZ3MgPSB7XG4gICAgICAgIGRheTogZ2V0RGFpbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHdlZWs6IGdldFdlZWtseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgbW9udGg6IGdldE1vbnRobHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHF1YXJ0ZXI6IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgeWVhcjogZ2V0WWVhcmx5Tm90ZVNldHRpbmdzLFxuICAgIH07XG4gICAgY29uc3QgZm9ybWF0ID0gZ2V0U2V0dGluZ3NbZ3JhbnVsYXJpdHldKCkuZm9ybWF0LnNwbGl0KFwiL1wiKS5wb3AoKTtcbiAgICBjb25zdCBub3RlRGF0ZSA9IHdpbmRvdy5tb21lbnQoZmlsZW5hbWUsIGZvcm1hdCwgdHJ1ZSk7XG4gICAgaWYgKCFub3RlRGF0ZS5pc1ZhbGlkKCkpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmIChpc0Zvcm1hdEFtYmlndW91cyhmb3JtYXQsIGdyYW51bGFyaXR5KSkge1xuICAgICAgICBpZiAoZ3JhbnVsYXJpdHkgPT09IFwid2Vla1wiKSB7XG4gICAgICAgICAgICBjb25zdCBjbGVhbkZvcm1hdCA9IHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCk7XG4gICAgICAgICAgICBpZiAoL3d7MSwyfS9pLnRlc3QoY2xlYW5Gb3JtYXQpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5tb21lbnQoZmlsZW5hbWUsIFxuICAgICAgICAgICAgICAgIC8vIElmIGZvcm1hdCBjb250YWlucyB3ZWVrLCByZW1vdmUgZGF5ICYgbW9udGggZm9ybWF0dGluZ1xuICAgICAgICAgICAgICAgIGZvcm1hdC5yZXBsYWNlKC9NezEsNH0vZywgXCJcIikucmVwbGFjZSgvRHsxLDR9L2csIFwiXCIpLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vdGVEYXRlO1xufVxuXG5jbGFzcyBEYWlseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVEYWlseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IGFwcCA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gYXBwO1xuICAgIGNvbnN0IG1vbWVudCA9IHdpbmRvdy5tb21lbnQ7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldERhaWx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgbW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IG1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqeWVzdGVyZGF5XFxzKn19L2dpLCBkYXRlLmNsb25lKCkuc3VidHJhY3QoMSwgXCJkYXlcIikuZm9ybWF0KGZvcm1hdCkpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdG9tb3Jyb3dcXHMqfX0vZ2ksIGRhdGUuY2xvbmUoKS5hZGQoMSwgXCJkXCIpLmZvcm1hdChmb3JtYXQpKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldERhaWx5Tm90ZShkYXRlLCBkYWlseU5vdGVzKSB7XG4gICAgcmV0dXJuIGRhaWx5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcImRheVwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbERhaWx5Tm90ZXMoKSB7XG4gICAgLyoqXG4gICAgICogRmluZCBhbGwgZGFpbHkgbm90ZXMgaW4gdGhlIGRhaWx5IG5vdGUgZm9sZGVyXG4gICAgICovXG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0RGFpbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBkYWlseU5vdGVzRm9sZGVyID0gdmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoZm9sZGVyKSk7XG4gICAgaWYgKCFkYWlseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBEYWlseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgZGFpbHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBjb25zdCBkYWlseU5vdGVzID0ge307XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKGRhaWx5Tm90ZXNGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJkYXlcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwiZGF5XCIpO1xuICAgICAgICAgICAgICAgIGRhaWx5Tm90ZXNbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGRhaWx5Tm90ZXM7XG59XG5cbmNsYXNzIFdlZWtseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuZnVuY3Rpb24gZ2V0RGF5c09mV2VlaygpIHtcbiAgICBjb25zdCB7IG1vbWVudCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgbGV0IHdlZWtTdGFydCA9IG1vbWVudC5sb2NhbGVEYXRhKCkuX3dlZWsuZG93O1xuICAgIGNvbnN0IGRheXNPZldlZWsgPSBbXG4gICAgICAgIFwic3VuZGF5XCIsXG4gICAgICAgIFwibW9uZGF5XCIsXG4gICAgICAgIFwidHVlc2RheVwiLFxuICAgICAgICBcIndlZG5lc2RheVwiLFxuICAgICAgICBcInRodXJzZGF5XCIsXG4gICAgICAgIFwiZnJpZGF5XCIsXG4gICAgICAgIFwic2F0dXJkYXlcIixcbiAgICBdO1xuICAgIHdoaWxlICh3ZWVrU3RhcnQpIHtcbiAgICAgICAgZGF5c09mV2Vlay5wdXNoKGRheXNPZldlZWsuc2hpZnQoKSk7XG4gICAgICAgIHdlZWtTdGFydC0tO1xuICAgIH1cbiAgICByZXR1cm4gZGF5c09mV2Vlaztcbn1cbmZ1bmN0aW9uIGdldERheU9mV2Vla051bWVyaWNhbFZhbHVlKGRheU9mV2Vla05hbWUpIHtcbiAgICByZXR1cm4gZ2V0RGF5c09mV2VlaygpLmluZGV4T2YoZGF5T2ZXZWVrTmFtZS50b0xvd2VyQ2FzZSgpKTtcbn1cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVdlZWtseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldFdlZWtseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKHN1bmRheXxtb25kYXl8dHVlc2RheXx3ZWRuZXNkYXl8dGh1cnNkYXl8ZnJpZGF5fHNhdHVyZGF5KVxccyo6KC4qPyl9fS9naSwgKF8sIGRheU9mV2VlaywgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkYXkgPSBnZXREYXlPZldlZWtOdW1lcmljYWxWYWx1ZShkYXlPZldlZWspO1xuICAgICAgICAgICAgcmV0dXJuIGRhdGUud2Vla2RheShkYXkpLmZvcm1hdChtb21lbnRGb3JtYXQudHJpbSgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0V2Vla2x5Tm90ZShkYXRlLCB3ZWVrbHlOb3Rlcykge1xuICAgIHJldHVybiB3ZWVrbHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwid2Vla1wiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbFdlZWtseU5vdGVzKCkge1xuICAgIGNvbnN0IHdlZWtseU5vdGVzID0ge307XG4gICAgaWYgKCFhcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiB3ZWVrbHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3Qgd2Vla2x5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIXdlZWtseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBXZWVrbHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHdlZWtseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbih3ZWVrbHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcIndlZWtcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwid2Vla1wiKTtcbiAgICAgICAgICAgICAgICB3ZWVrbHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gd2Vla2x5Tm90ZXM7XG59XG5cbmNsYXNzIE1vbnRobHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlTW9udGhseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRNb250aGx5Tm90ZShkYXRlLCBtb250aGx5Tm90ZXMpIHtcbiAgICByZXR1cm4gbW9udGhseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJtb250aFwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbE1vbnRobHlOb3RlcygpIHtcbiAgICBjb25zdCBtb250aGx5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiBtb250aGx5Tm90ZXM7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBtb250aGx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIW1vbnRobHlOb3Rlc0ZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgTW9udGhseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgbW9udGhseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbihtb250aGx5Tm90ZXNGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJtb250aFwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJtb250aFwiKTtcbiAgICAgICAgICAgICAgICBtb250aGx5Tm90ZXNbZGF0ZVN0cmluZ10gPSBub3RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIG1vbnRobHlOb3Rlcztcbn1cblxuY2xhc3MgUXVhcnRlcmx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVF1YXJ0ZXJseU5vdGUoZGF0ZSkge1xuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyB0ZW1wbGF0ZSwgZm9ybWF0LCBmb2xkZXIgfSA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldFF1YXJ0ZXJseU5vdGUoZGF0ZSwgcXVhcnRlcmx5KSB7XG4gICAgcmV0dXJuIHF1YXJ0ZXJseVtnZXREYXRlVUlEKGRhdGUsIFwicXVhcnRlclwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbFF1YXJ0ZXJseU5vdGVzKCkge1xuICAgIGNvbnN0IHF1YXJ0ZXJseSA9IHt9O1xuICAgIGlmICghYXBwSGFzUXVhcnRlcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSkge1xuICAgICAgICByZXR1cm4gcXVhcnRlcmx5O1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBxdWFydGVybHlGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIXF1YXJ0ZXJseUZvbGRlcikge1xuICAgICAgICB0aHJvdyBuZXcgUXVhcnRlcmx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBxdWFydGVybHkgbm90ZXMgZm9sZGVyXCIpO1xuICAgIH1cbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4ocXVhcnRlcmx5Rm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwicXVhcnRlclwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJxdWFydGVyXCIpO1xuICAgICAgICAgICAgICAgIHF1YXJ0ZXJseVtkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcXVhcnRlcmx5O1xufVxuXG5jbGFzcyBZZWFybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlWWVhcmx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0WWVhcmx5Tm90ZShkYXRlLCB5ZWFybHlOb3Rlcykge1xuICAgIHJldHVybiB5ZWFybHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwieWVhclwiKV0gPz8gbnVsbDtcbn1cbmZ1bmN0aW9uIGdldEFsbFllYXJseU5vdGVzKCkge1xuICAgIGNvbnN0IHllYXJseU5vdGVzID0ge307XG4gICAgaWYgKCFhcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiB5ZWFybHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgeWVhcmx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIXllYXJseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBZZWFybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHllYXJseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbih5ZWFybHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcInllYXJcIik7XG4gICAgICAgICAgICBpZiAoZGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRhdGVTdHJpbmcgPSBnZXREYXRlVUlEKGRhdGUsIFwieWVhclwiKTtcbiAgICAgICAgICAgICAgICB5ZWFybHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4geWVhcmx5Tm90ZXM7XG59XG5cbmZ1bmN0aW9uIGFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IGRhaWx5Tm90ZXNQbHVnaW4gPSBhcHAuaW50ZXJuYWxQbHVnaW5zLnBsdWdpbnNbXCJkYWlseS1ub3Rlc1wiXTtcbiAgICBpZiAoZGFpbHlOb3Rlc1BsdWdpbiAmJiBkYWlseU5vdGVzUGx1Z2luLmVuYWJsZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LmRhaWx5Py5lbmFibGVkO1xufVxuLyoqXG4gKiBYWFg6IFwiV2Vla2x5IE5vdGVzXCIgbGl2ZSBpbiBlaXRoZXIgdGhlIENhbGVuZGFyIHBsdWdpbiBvciB0aGUgcGVyaW9kaWMtbm90ZXMgcGx1Z2luLlxuICogQ2hlY2sgYm90aCB1bnRpbCB0aGUgd2Vla2x5IG5vdGVzIGZlYXR1cmUgaXMgcmVtb3ZlZCBmcm9tIHRoZSBDYWxlbmRhciBwbHVnaW4uXG4gKi9cbmZ1bmN0aW9uIGFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBpZiAoYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwiY2FsZW5kYXJcIikpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LndlZWtseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/Lm1vbnRobHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgcGVyaW9kaWNOb3RlcyA9IGFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LnF1YXJ0ZXJseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ueWVhcmx5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gZ2V0UGVyaW9kaWNOb3RlU2V0dGluZ3MoZ3JhbnVsYXJpdHkpIHtcbiAgICBjb25zdCBnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgZGF5OiBnZXREYWlseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgd2VlazogZ2V0V2Vla2x5Tm90ZVNldHRpbmdzLFxuICAgICAgICBtb250aDogZ2V0TW9udGhseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgcXVhcnRlcjogZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB5ZWFyOiBnZXRZZWFybHlOb3RlU2V0dGluZ3MsXG4gICAgfVtncmFudWxhcml0eV07XG4gICAgcmV0dXJuIGdldFNldHRpbmdzKCk7XG59XG5mdW5jdGlvbiBjcmVhdGVQZXJpb2RpY05vdGUoZ3JhbnVsYXJpdHksIGRhdGUpIHtcbiAgICBjb25zdCBjcmVhdGVGbiA9IHtcbiAgICAgICAgZGF5OiBjcmVhdGVEYWlseU5vdGUsXG4gICAgICAgIG1vbnRoOiBjcmVhdGVNb250aGx5Tm90ZSxcbiAgICAgICAgd2VlazogY3JlYXRlV2Vla2x5Tm90ZSxcbiAgICB9O1xuICAgIHJldHVybiBjcmVhdGVGbltncmFudWxhcml0eV0oZGF0ZSk7XG59XG5cbmV4cG9ydHMuREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQ7XG5leHBvcnRzLkRFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQgPSBERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc0RhaWx5Tm90ZXNQbHVnaW5Mb2FkZWQ7XG5leHBvcnRzLmFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc01vbnRobHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzUXVhcnRlcmx5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQgPSBhcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuY3JlYXRlRGFpbHlOb3RlID0gY3JlYXRlRGFpbHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVNb250aGx5Tm90ZSA9IGNyZWF0ZU1vbnRobHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVQZXJpb2RpY05vdGUgPSBjcmVhdGVQZXJpb2RpY05vdGU7XG5leHBvcnRzLmNyZWF0ZVF1YXJ0ZXJseU5vdGUgPSBjcmVhdGVRdWFydGVybHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVXZWVrbHlOb3RlID0gY3JlYXRlV2Vla2x5Tm90ZTtcbmV4cG9ydHMuY3JlYXRlWWVhcmx5Tm90ZSA9IGNyZWF0ZVllYXJseU5vdGU7XG5leHBvcnRzLmdldEFsbERhaWx5Tm90ZXMgPSBnZXRBbGxEYWlseU5vdGVzO1xuZXhwb3J0cy5nZXRBbGxNb250aGx5Tm90ZXMgPSBnZXRBbGxNb250aGx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbFF1YXJ0ZXJseU5vdGVzID0gZ2V0QWxsUXVhcnRlcmx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbFdlZWtseU5vdGVzID0gZ2V0QWxsV2Vla2x5Tm90ZXM7XG5leHBvcnRzLmdldEFsbFllYXJseU5vdGVzID0gZ2V0QWxsWWVhcmx5Tm90ZXM7XG5leHBvcnRzLmdldERhaWx5Tm90ZSA9IGdldERhaWx5Tm90ZTtcbmV4cG9ydHMuZ2V0RGFpbHlOb3RlU2V0dGluZ3MgPSBnZXREYWlseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0RGF0ZUZyb21GaWxlID0gZ2V0RGF0ZUZyb21GaWxlO1xuZXhwb3J0cy5nZXREYXRlRnJvbVBhdGggPSBnZXREYXRlRnJvbVBhdGg7XG5leHBvcnRzLmdldERhdGVVSUQgPSBnZXREYXRlVUlEO1xuZXhwb3J0cy5nZXRNb250aGx5Tm90ZSA9IGdldE1vbnRobHlOb3RlO1xuZXhwb3J0cy5nZXRNb250aGx5Tm90ZVNldHRpbmdzID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0UGVyaW9kaWNOb3RlU2V0dGluZ3MgPSBnZXRQZXJpb2RpY05vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0UXVhcnRlcmx5Tm90ZSA9IGdldFF1YXJ0ZXJseU5vdGU7XG5leHBvcnRzLmdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncyA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncztcbmV4cG9ydHMuZ2V0VGVtcGxhdGVJbmZvID0gZ2V0VGVtcGxhdGVJbmZvO1xuZXhwb3J0cy5nZXRXZWVrbHlOb3RlID0gZ2V0V2Vla2x5Tm90ZTtcbmV4cG9ydHMuZ2V0V2Vla2x5Tm90ZVNldHRpbmdzID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRZZWFybHlOb3RlID0gZ2V0WWVhcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0WWVhcmx5Tm90ZVNldHRpbmdzID0gZ2V0WWVhcmx5Tm90ZVNldHRpbmdzO1xuIiwgImltcG9ydCB7IFBsdWdpbiwgUG9zLCBURmlsZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8vIERhaWx5IE5vdGUgSW50ZXJmYWNlXHJcbmltcG9ydCB7IGdldEFsbERhaWx5Tm90ZXMsIGdldERhaWx5Tm90ZSwgZ2V0RGF0ZUZyb21GaWxlLCBJR3JhbnVsYXJpdHkgfSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XHJcbi8vIG1vbWVudC5qc1xyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcclxuXHJcbmltcG9ydCB7IERhaWx5Tm90ZU91dGxpbmVWaWV3LCBEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUgfSBmcm9tICdzcmMvdmlldydcclxuaW1wb3J0IHsgRGFpbHlOb3RlT3V0bGluZVNldHRpbmdUYWIgfSBmcm9tICdzcmMvc2V0dGluZydcclxuXHJcblxyXG5cclxuLy8gXHU4QTJEXHU1QjlBXHU5ODA1XHU3NkVFIFxyXG5leHBvcnQgaW50ZXJmYWNlIERhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyB7XHJcblx0aW5pdGlhbFNlYXJjaFR5cGU6IHN0cmluZzsgLy9mb3J3YXJkIG9yIGJhY2t3YXJkIFx1NzI3OVx1NUI5QVx1NjVFNVx1MzA0Qlx1MzA4OVx1NTI0RFx1NjVCOVx1NjNBMlx1N0QyMm9yXHU1RjUzXHU2NUU1XHUzMDRCXHUzMDg5XHU1RjhDXHU2NUI5XHU2M0EyXHU3RDIyXHJcblx0b2Zmc2V0OiBudW1iZXI7XHRcdC8vIFx1NjcyQVx1Njc2NVx1MzA2RVx1NjVFNVx1NEVEOFx1MzA4Mlx1NTQyQlx1MzA4MFx1NTgzNFx1NTQwOFx1NEY1NVx1NjVFNVx1NTIwNlx1NTQyQlx1MzA4MVx1MzA4Qlx1MzA0QiBudW1iZXIgb2YgZnV0dXJlIGRheXMgdG8gc2hvdyBcclxuXHRvbnNldDogc3RyaW5nO1x0XHQvLyBcdTcyNzlcdTVCOUFcdTY1RTVcdTMwNEJcdTMwODlmb3J3YXJkXHUzMDZCXHU2M0EyXHU3RDIyXHUzMDU5XHUzMDhCXHU1ODM0XHU1NDA4XHUzMDZFXHU4RDc3XHU3MEI5XHU2NUU1IG9uc2V0IGRhdGVcclxuXHRkdXJhdGlvbjp7XHJcblx0XHRkYXk6bnVtYmVyO1xyXG5cdFx0d2VlazpudW1iZXI7XHJcblx0XHRtb250aDpudW1iZXI7XHJcblx0XHRxdWFydGVyOm51bWJlcjtcclxuXHRcdHllYXI6bnVtYmVyO1xyXG5cdH0gLy8gXHU2M0EyXHU3RDIyXHU2NUU1XHU2NTcwIG51bWJlciBvZiBkYXlzIHRvIHNlYXJjaCBwZXIgcGFnZVxyXG5cdHNob3dFbGVtZW50czp7XHJcblx0XHRoZWFkaW5nOiBib29sZWFuO1xyXG5cdFx0bGluazogYm9vbGVhbjtcclxuXHRcdHRhZzogYm9vbGVhbjtcclxuXHRcdGxpc3RJdGVtczogYm9vbGVhblxyXG5cdH07XHJcblx0aGVhZGluZ0xldmVsOiBib29sZWFuW107XHJcblx0YWxsUm9vdEl0ZW1zOiBib29sZWFuO1xyXG5cdGFsbFRhc2tzOiBib29sZWFuO1xyXG5cdHRhc2tPbmx5OiBib29sZWFuO1xyXG5cdGhpZGVDb21wbGV0ZWRUYXNrczogYm9vbGVhbjtcclxuXHRkaXNwbGF5RmlsZUluZm86IHN0cmluZzsgLy8gbm9uZSB8fCBsaW5lcyB8fCBkYXlzICAgbGVnYWN5XHJcblx0ZGlzcGxheUZpbGVJbmZvRGFpbHk6IHN0cmluZzsgLy8gbm9uZSxsaW5lcyxkYXlzLGRvdyhkYXkgb2YgdGhlIHdlZWspLGRvd3Nob3J0LHdlZWtudW1iZXIsdGFnXHJcblx0ZGlzcGxheUZpbGVJbmZvUGVyaW9kaWM6IHN0cmluZzsgLy8gbm9uZSxsaW5lcyxkYXlzLHRhZ1xyXG5cclxuXHR2aWV3UG9zaXRpb246IHN0cmluZztcdC8vcmlnaHQgfHwgbGVmdCB8fCB0YWIgfHwgc3BsaXQgfHwgcG9wb3V0IFxyXG5cclxuXHRtYXJrZG93bk9ubHk6IGJvb2xlYW47XHJcblx0ZXhhY3RNYXRjaE9ubHk6IGJvb2xlYW47XHJcblxyXG5cdHdvcmRzVG9JZ25vcmU6e1x0Ly9maWx0ZXJcclxuXHRcdGhlYWRpbmc6IHN0cmluZ1tdO1xyXG5cdFx0bGluazogc3RyaW5nW107XHJcblx0XHR0YWc6IHN0cmluZ1tdO1xyXG5cdFx0bGlzdEl0ZW1zOiBzdHJpbmdbXVxyXG5cdH07XHJcblxyXG5cdGlubGluZVByZXZpZXc6IGJvb2xlYW47XHJcblx0dG9vbHRpcFByZXZpZXc6IGJvb2xlYW47XHJcblx0dG9vbHRpcFByZXZpZXdEaXJlY3Rpb246IHN0cmluZzsgLy8gbGVmdCB8fCByaWdodFxyXG5cclxuXHJcblx0aW5jbHVkZU9ubHk6IHN0cmluZztcdC8vIG5vbmUgfHwgaGVhZGluZywgbGluaywgdGFnLCBsaXN0SXRlbXNcclxuXHR3b3Jkc1RvSW5jbHVkZTogc3RyaW5nW107XHJcblx0aW5jbHVkZUJlZ2lubmluZzogYm9vbGVhbjtcclxuXHJcblx0cHJpbWVFbGVtZW50OiBzdHJpbmc7IC8vIG5vbmUgfHwgaGVhZGluZywgbGluaywgdGFnLCBsaXN0SXRlbXNcclxuXHR3b3Jkc1RvRXhjbHVkZTp7XHJcblx0XHRoZWFkaW5nOiBzdHJpbmdbXTtcclxuXHRcdGxpbms6IHN0cmluZ1tdO1xyXG5cdFx0dGFnOiBzdHJpbmdbXTtcclxuXHRcdGxpc3RJdGVtczogc3RyaW5nW11cclxuXHR9O1xyXG5cdHdvcmRzVG9FeHRyYWN0OiBzdHJpbmc7XHJcblxyXG5cdGljb246e1x0Ly9pY29uIGZvciBlYWNoIHR5cGUgb2YgZWxlbWVudFxyXG5cdFx0aGVhZGluZzogc3RyaW5nO1xyXG5cdFx0bGluazogc3RyaW5nO1xyXG5cdFx0dGFnOiBzdHJpbmc7XHJcblx0XHRsaXN0SXRlbXM6IHN0cmluZztcclxuXHRcdG5vdGU6IHN0cmluZztcclxuXHRcdHRhc2s6IHN0cmluZztcclxuXHRcdHRhc2tEb25lOiBzdHJpbmc7XHJcblx0fTtcclxuXHJcblx0Y3VzdG9tSWNvbjp7XHJcblx0XHRoZWFkaW5nOiBzdHJpbmc7XHJcblx0XHRsaW5rOiBzdHJpbmc7XHJcblx0XHR0YWc6IHN0cmluZztcclxuXHRcdGxpc3RJdGVtczogc3RyaW5nO1xyXG5cdFx0bm90ZTogc3RyaW5nO1xyXG5cdFx0dGFzazogc3RyaW5nO1xyXG5cdFx0dGFza0RvbmU6IHN0cmluZztcclxuXHR9O1xyXG5cclxuXHRpbmRlbnQ6e1xyXG5cdFx0aGVhZGluZzogYm9vbGVhbjtcclxuXHRcdGxpbms6IGJvb2xlYW47XHJcblx0XHRsaXN0SXRlbXM6IGJvb2xlYW47XHJcblx0fTtcclxuXHRpbmRlbnRGb2xsb3dIZWFkaW5nOiBudW1iZXI7IC8vIDAgZG9uJ3QgZm9sbG93IDE6c2FtZSBsZXZlbCAyOiBsZXZlbCsxXHJcblxyXG5cdHByZWZpeDp7XHJcblx0XHRoZWFkaW5nOiBzdHJpbmc7XHJcblx0XHRsaW5rOiBzdHJpbmc7XHJcblx0XHR0YWc6IHN0cmluZztcclxuXHRcdGxpc3RJdGVtczogc3RyaW5nO1xyXG5cdFx0dGFzazogc3RyaW5nO1xyXG5cdFx0dGFza0RvbmU6IHN0cmluZztcclxuXHR9O1xyXG5cdHJlcGVhdEhlYWRpbmdQcmVmaXg6IHN0cmluZzsgLy8gbm9uZSwgbGV2ZWwsIGxldmVsLTFcclxuXHRhZGRDaGVja2JveFRleHQ6IGJvb2xlYW47XHJcblxyXG5cdHBlcmlvZGljTm90ZXNFbmFibGVkOiBib29sZWFuO1xyXG5cdGNhbGVuZGFyU2V0c0VuYWJsZWQ6IGJvb2xlYW47XHJcblx0YXR0YWNoV2Vla2x5Tm90ZXNOYW1lOiBib29sZWFuO1xyXG5cclxuXHRzaG93RGVidWdJbmZvOiBib29sZWFuO1xyXG5cclxuXHRub3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3I6IHN0cmluZzsgLy8gbm9uZSwgYWNjZW50LCBjdXN0b21cclxuXHRjdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3I6IHtcclxuXHRcdGFjY2VudDoge1xyXG5cdFx0XHRsaWdodDogc3RyaW5nO1xyXG5cdFx0XHRkYXJrOiBzdHJpbmc7XHJcblx0XHR9O1xyXG5cdFx0Y3VzdG9tOiB7XHJcblx0XHRcdGxpZ2h0OiBzdHJpbmc7XHJcblx0XHRcdGRhcms6IHN0cmluZztcclxuXHRcdH07XHJcblx0fTtcclxuXHRjdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3JIb3Zlcjoge1xyXG5cdFx0YWNjZW50OiB7XHJcblx0XHRcdGxpZ2h0OiBzdHJpbmc7XHJcblx0XHRcdGRhcms6IHN0cmluZztcclxuXHRcdH07XHJcblx0XHRjdXN0b206IHtcclxuXHRcdFx0bGlnaHQ6IHN0cmluZztcclxuXHRcdFx0ZGFyazogc3RyaW5nO1xyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHQvLyBcdTU0MDRcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNkVcdTYwQzVcdTU4MzFcclxuXHRmaWxlRmxhZzoge1xyXG5cdFx0W3BhdGg6IHN0cmluZ106IHtcclxuXHRcdFx0J2ZvbGQnPzogYm9vbGVhbjtcclxuXHRcdH07XHJcblx0fTtcclxuXHJcblx0Ly8gdGFza1x1MzA2RWN1c3RvbSBzdGF0dXNcclxuXHR0YXNrSWNvbjoge1xyXG5cdFx0W3N0YXR1czogc3RyaW5nXToge1xyXG5cdFx0XHRzeW1ib2w6IHN0cmluZztcclxuXHRcdFx0aWNvbjogc3RyaW5nO1xyXG5cdFx0fTtcclxuXHR9O1xyXG5cclxuXHRjb2xsYXBzZUFsbEF0U3RhcnR1cDogYm9vbGVhbjtcclxuXHJcbn1cclxuXHJcbi8vIFx1OEEyRFx1NUI5QVx1OTgwNVx1NzZFRVx1MzBDN1x1MzBENVx1MzBBOVx1MzBFQlx1MzBDOFxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzID0ge1xyXG5cdGluaXRpYWxTZWFyY2hUeXBlOiAnYmFja3dhcmQnLFxyXG5cdG9mZnNldDogNyxcclxuXHRvbnNldDogJzIwMjAtMDMtMzAnLFxyXG5cdGR1cmF0aW9uOiB7XHJcblx0XHRkYXk6MjgsXHJcblx0XHR3ZWVrOjEyLFxyXG5cdFx0bW9udGg6MTIsXHJcblx0XHRxdWFydGVyOjgsXHJcblx0XHR5ZWFyOjNcclxuXHR9LFxyXG5cdHNob3dFbGVtZW50czoge1xyXG5cdFx0aGVhZGluZzogdHJ1ZSxcclxuXHRcdGxpbms6IHRydWUsXHJcblx0XHR0YWc6IHRydWUsXHJcblx0XHRsaXN0SXRlbXM6IHRydWVcclxuXHR9LFxyXG5cdFxyXG5cdGhlYWRpbmdMZXZlbDogW3RydWUsIHRydWUsIHRydWUsIGZhbHNlLCBmYWxzZSwgZmFsc2VdLFxyXG5cdGFsbFJvb3RJdGVtczogZmFsc2UsXHJcblx0YWxsVGFza3M6IHRydWUsXHJcblx0dGFza09ubHk6IGZhbHNlLFxyXG5cdGhpZGVDb21wbGV0ZWRUYXNrczogZmFsc2UsXHJcblx0ZGlzcGxheUZpbGVJbmZvOiAnbGluZXMnLFxyXG5cdGRpc3BsYXlGaWxlSW5mb0RhaWx5OiAnbGluZXMnLCAvLyBub25lLGxpbmVzLGRheXMsZG93KGRheSBvZiB0aGUgd2VlayksZG93c2hvcnQsd2Vla251bWJlcix0YWdcclxuXHRkaXNwbGF5RmlsZUluZm9QZXJpb2RpYzogJ2xpbmVzJywgLy8gbm9uZSxsaW5lcyxkYXlzLHRhZ1xyXG5cdHZpZXdQb3NpdGlvbjogJ3JpZ2h0JyxcclxuXHJcblx0bWFya2Rvd25Pbmx5OiB0cnVlLFxyXG5cdGV4YWN0TWF0Y2hPbmx5OiBmYWxzZSxcclxuXHJcblx0d29yZHNUb0lnbm9yZTp7XHJcblx0XHRoZWFkaW5nOiBbXSxcclxuXHRcdGxpbms6IFtdLFxyXG5cdFx0dGFnOiBbXSxcclxuXHRcdGxpc3RJdGVtczogW11cclxuXHR9LFxyXG5cclxuXHRpbmxpbmVQcmV2aWV3OiB0cnVlLFxyXG5cdHRvb2x0aXBQcmV2aWV3OiB0cnVlLFxyXG5cdHRvb2x0aXBQcmV2aWV3RGlyZWN0aW9uOiAnbGVmdCcsXHJcblxyXG5cdFxyXG5cdGluY2x1ZGVPbmx5OiAnbm9uZScsXHJcblx0d29yZHNUb0luY2x1ZGU6IFtdLFxyXG5cdGluY2x1ZGVCZWdpbm5pbmc6IHRydWUsXHJcblxyXG5cdHByaW1lRWxlbWVudDogJ25vbmUnLFxyXG5cdHdvcmRzVG9FeGNsdWRlOntcclxuXHRcdGhlYWRpbmc6IFtdLFxyXG5cdFx0bGluazogW10sXHJcblx0XHR0YWc6IFtdLFxyXG5cdFx0bGlzdEl0ZW1zOiBbXVxyXG5cdH0sXHJcblx0d29yZHNUb0V4dHJhY3Q6ICcnLFxyXG5cclxuXHRpY29uOntcdFxyXG5cdFx0aGVhZGluZzogJ25vbmUnLFxyXG5cdFx0bGluazogJ2xpbmsnLFxyXG5cdFx0dGFnOiAndGFnJyxcclxuXHRcdGxpc3RJdGVtczogJ2xpc3QnLFxyXG5cdFx0bm90ZTogJ2ZpbGUnLFxyXG5cdFx0dGFzazogJ3NxdWFyZScsXHJcblx0XHR0YXNrRG9uZTogJ2NoZWNrLXNxdWFyZSdcclxuXHR9LFxyXG5cdGN1c3RvbUljb246e1xyXG5cdFx0aGVhZGluZzogJ2hhc2gnLFxyXG5cdFx0bGluazogJ2xpbmsnLFxyXG5cdFx0dGFnOiAndGFnJyxcclxuXHRcdGxpc3RJdGVtczogJ2xpc3QnLFxyXG5cdFx0bm90ZTonZmlsZScsXHJcblx0XHR0YXNrOidzcXVhcmUnLFxyXG5cdFx0dGFza0RvbmU6J2NoZWNrLXNxdWFyZSdcclxuXHR9LFxyXG5cclxuXHRpbmRlbnQ6e1xyXG5cdFx0aGVhZGluZzogdHJ1ZSxcclxuXHRcdGxpbms6IHRydWUsXHJcblx0XHRsaXN0SXRlbXM6IHRydWUsXHJcblx0fSxcclxuXHRpbmRlbnRGb2xsb3dIZWFkaW5nOiAwLFxyXG5cdHByZWZpeDp7XHJcblx0XHRoZWFkaW5nOiAnJyxcclxuXHRcdGxpbms6ICcnLFxyXG5cdFx0dGFnOiAnJyxcclxuXHRcdGxpc3RJdGVtczogJycsXHJcblx0XHR0YXNrOiAnJyxcclxuXHRcdHRhc2tEb25lOiAnJ1xyXG5cdH0sXHJcblx0cmVwZWF0SGVhZGluZ1ByZWZpeDonbm9uZScsXHJcblx0YWRkQ2hlY2tib3hUZXh0OiBmYWxzZSxcclxuXHJcblx0Ly8gZGFpbHlOb3RlQ29yZTogdHJ1ZSxcclxuXHRwZXJpb2RpY05vdGVzRW5hYmxlZDogdHJ1ZSxcclxuXHRjYWxlbmRhclNldHNFbmFibGVkOiB0cnVlLFxyXG5cdGF0dGFjaFdlZWtseU5vdGVzTmFtZTogdHJ1ZSxcclxuXHJcblx0c2hvd0RlYnVnSW5mbzogZmFsc2UsXHJcblxyXG5cdG5vdGVUaXRsZUJhY2tncm91bmRDb2xvcjogJ25vbmUnLCAvLyBub25lLCBhY2NlbnQsIGN1c3RvbVxyXG5cdGN1c3RvbU5vdGVUaXRsZUJhY2tncm91bmRDb2xvcjoge1xyXG5cdFx0YWNjZW50OiB7XHJcblx0XHRcdGxpZ2h0OiAnI0UzRTNFMycsXHJcblx0XHRcdGRhcms6ICcjMzYzNjM2JyxcclxuXHRcdH0sXHJcblx0XHRjdXN0b206IHtcclxuXHRcdFx0bGlnaHQ6ICcjQkVCRUJFJyxcclxuXHRcdFx0ZGFyazogJyM0RTRFNEUnLFxyXG5cdFx0fSxcclxuXHR9LFxyXG5cdGN1c3RvbU5vdGVUaXRsZUJhY2tncm91bmRDb2xvckhvdmVyOiB7XHJcblx0XHRhY2NlbnQ6IHtcclxuXHRcdFx0bGlnaHQ6ICcjRDNEM0QzJyxcclxuXHRcdFx0ZGFyazogJyM0NjQ2NDYnLFxyXG5cdFx0fSxcclxuXHRcdGN1c3RvbToge1xyXG5cdFx0XHRsaWdodDogJyNBRUFFQUUnLFxyXG5cdFx0XHRkYXJrOiAnIzVFNUU1RScsXHJcblx0XHR9LFxyXG5cdH0sXHJcblx0XHJcblx0ZmlsZUZsYWc6IHt9LFxyXG5cclxuXHQvLyB0YXNrXHUzMDZFY3VzdG9tIHN0YXR1c1xyXG5cdHRhc2tJY29uOiB7XHJcblx0XHQvLyB0b2RvOiB7c3ltYm9sOicgJywgaWNvbjonc3F1YXJlJ30sXHJcblx0XHRpbmNvbXBsZXRlOiB7c3ltYm9sOicvJywgaWNvbjonY29sdW1ucyd9LFxyXG5cdFx0Ly8gZG9uZToge3N5bWJvbDoneCcsIGljb246J2NoZWNrLXNxdWFyZSd9LFxyXG5cdFx0Y2FuY2VsZWQ6IHtzeW1ib2w6Jy0nLCBpY29uOidtaW51cy1zcXVhcmUnfSxcclxuXHRcdGZvd2FyZGVkOiB7c3ltYm9sOic+JywgaWNvbjonc2VuZCd9LFxyXG5cdFx0c2NoZWR1bGluZzoge3N5bWJvbDonPCcsIGljb246J2NhbGVuZGFyJ30sXHJcblx0XHRxdWVzdGlvbjoge3N5bWJvbDonPycsIGljb246J2hlbHAtY2lyY2xlJ30sXHJcblx0XHRpbXBvcnRhbnQ6IHtzeW1ib2w6JyEnLCBpY29uOidhbGVydC10cmlhbmdsZSd9LFxyXG5cdFx0c3Rhcjoge3N5bWJvbDonKicsIGljb246J3N0YXInfSxcclxuXHRcdHF1b3RlOiB7c3ltYm9sOidcIicsIGljb246J3F1b3RlJ30sXHJcblx0XHRsb2NhdGlvbjoge3N5bWJvbDonbCcsIGljb246J21hcC1waW4nfSxcclxuXHRcdGJvb2ttYXJrOiB7c3ltYm9sOidiJywgaWNvbjonYm9va21hcmsnfSxcclxuXHRcdGluZm9ybWF0aW9uOiB7c3ltYm9sOidpJywgaWNvbjonaW5mbyd9LFxyXG5cdFx0c2F2aW5nczoge3N5bWJvbDonUycsIGljb246J2RvbGxhci1zaWduJ30sXHJcblx0XHRpZGVhOiB7c3ltYm9sOidJJywgaWNvbjonc2lyZW4nfSxcclxuXHRcdHByb3M6IHtzeW1ib2w6J3AnLCBpY29uOid0aHVtYnMtdXAnfSxcclxuXHRcdGNvbnM6IHtzeW1ib2w6J2MnLCBpY29uOid0aHVtYnMtZG93bid9LFxyXG5cdFx0ZmlyZToge3N5bWJvbDonZicsIGljb246J2ZsYW1lJ30sXHJcblx0XHRrZXk6IHtzeW1ib2w6J2snLCBpY29uOidrZXknfSxcclxuXHRcdHdpbjoge3N5bWJvbDondycsIGljb246J2Nha2UnfSxcclxuXHRcdHVwOiB7c3ltYm9sOid1JywgaWNvbjondHJlbmRpbmctdXAnfSxcclxuXHRcdGRvd246IHtzeW1ib2w6J2QnLCBpY29uOid0cmVuZGluZy1kb3duJ30sXHJcblx0fSxcclxuXHJcblx0Y29sbGFwc2VBbGxBdFN0YXJ0dXA6IGZhbHNlLFxyXG59XHJcblxyXG4vLyBleHBvcnQgaW50ZXJmYWNlIEZpbGVTdGF0dXMge1xyXG4vLyBcdGlzRm9sZGVkOiBib29sZWFuO1xyXG4vLyB9XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVJbmZvIHtcclxuXHQvLyBmaWxlOlRGaWxlO1xyXG5cdGRhdGU6IG1vbWVudDtcclxuXHQvL2NvbnRlbnQ6IHN0cmluZztcclxuXHRsaW5lczogc3RyaW5nW107XHJcblx0bnVtT2ZMaW5lczogbnVtYmVyXHJcblx0aXNGb2xkZWQ6IGJvb2xlYW47XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgT3V0bGluZURhdGEge1x0XHJcblxyXG5cdHR5cGVPZkVsZW1lbnQ6J2hlYWRpbmcnfCdsaW5rJ3wndGFnJ3wnbGlzdEl0ZW1zJztcclxuXHRwb3NpdGlvbjpQb3M7XHJcblx0bGluaz86c3RyaW5nO1xyXG5cdGRpc3BsYXlUZXh0Pzogc3RyaW5nO1xyXG5cdC8vIGxldmVsIFx1RkYxQWxpc3RJdGVtc1x1MzA2Qlx1MzA2NFx1MzA0NFx1MzA2Nlx1MzA2RjBcdUZGMUFcdTMwQzhcdTMwQzNcdTMwRDdcdTMwMDExXHVGRjFBXHUzMEVCXHUzMEZDXHUzMEM4XHUzMDAxMlx1RkYxQVx1MzA1RFx1MzA4Q1x1NEVFNVx1NEUwQlxyXG5cdGxldmVsPzpudW1iZXI7XHJcblx0dGFzaz86IHN0cmluZ3x1bmRlZmluZWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBEQVlTX1BFUl9VTklUID17XHJcblx0ZGF5OiAxLFxyXG5cdHdlZWs6IDcsXHJcblx0bW9udGg6IDMwLFxyXG5cdHF1YXJ0ZXI6IDkwLFxyXG5cdHllYXI6MzY1XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBHUkFOVUxBUklUWV9MSVNUOiBJR3JhbnVsYXJpdHlbXSA9IFsnZGF5Jywnd2VlaycsJ21vbnRoJywncXVhcnRlcicsJ3llYXInXVxyXG5cclxuZXhwb3J0IGNvbnN0IEdSQU5VTEFSSVRZX1RPX1BFUklPRElDSVRZID0ge1xyXG5cdGRheTogJ2RhaWx5JyxcclxuXHR3ZWVrOiAnd2Vla2x5JyxcclxuXHRtb250aDogJ21vbnRobHknLFxyXG5cdHF1YXJ0ZXI6ICdxdWFydGVybHknLFxyXG5cdHllYXI6ICd5ZWFybHknXHJcbn0gXHJcblxyXG5leHBvcnQgY29uc3QgRklMRUlORk9fVE9fRElTUExBWSA9IHtcclxuXHRub25lOiAnbm9uZScsXHJcblx0bGluZXM6ICdudW0gb2YgbGluZXMnLFxyXG5cdGRheXM6ICdkaXN0YW5jZScsXHJcblx0dGFnOiAnZmlyc3QgdGFnJ1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgRklMRUlORk9fVE9fRElTUExBWV9EQVkgPSB7XHJcblx0bm9uZTogJ25vbmUnLFxyXG5cdGxpbmVzOiAnbnVtIG9mIGxpbmVzJyxcclxuXHRkYXlzOiAnZGlzdGFuY2UnLFxyXG5cdHRhZzogJ2ZpcnN0IHRhZycsXHJcblx0ZG93OiAnZGF5IG9mIHdlZWsnLFxyXG5cdGRvd3Nob3J0OiAnZGF5IG9mIHdlZWsoc2hvcnQpJyxcclxuXHR3ZWVrbnVtYmVyOiAnd2VlayBudW1iZXInXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERhaWx5Tm90ZU91dGxpbmVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cclxuXHRzZXR0aW5nczogRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzO1xyXG5cdHZpZXc6IERhaWx5Tm90ZU91dGxpbmVWaWV3O1xyXG5cclxuXHRhc3luYyBvbmxvYWQoKSB7XHJcblx0XHRcclxuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblx0XHQvL3JlZ2lzdGVyIGN1c3RvbWUgdmlldyBhY2NvcmRpbmcgdG8gRGV2bG9wZXIgRG9jc1xyXG5cdFx0dGhpcy5yZWdpc3RlclZpZXcoXHJcblx0XHRcdERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZSxcclxuXHRcdFx0KGxlYWYpID0+ICh0aGlzLnZpZXcgPSBuZXcgRGFpbHlOb3RlT3V0bGluZVZpZXcobGVhZiwgdGhpcywgdGhpcy5zZXR0aW5ncykpXHJcblx0XHQpO1xyXG5cclxuXHRcdC8vXHUzMEIzXHUzMERFXHUzMEYzXHUzMEM5XHU4RkZEXHU1MkEwXHJcblx0XHQvLyBPcGVuIE91dGxpbmU6IFx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1ODg2OFx1NzkzQVx1NzUyOFx1MzA2RVx1MzBBQlx1MzBCOVx1MzBCRlx1MzBFMFx1MzBEM1x1MzBFNVx1MzBGQ1x1MzA5Mlx1OTU4Qlx1MzA0RlxyXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcclxuXHRcdFx0aWQ6ICdkYWlseS1ub3RlLW91dGxpbmUtb3BlbicsXHJcblx0XHRcdG5hbWU6ICdPcGVuIE91dGxpbmUnLFxyXG5cclxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpPT4ge1xyXG5cdFx0XHRcdHRoaXMuY2hlY2tWaWV3KHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblxyXG5cdFx0XHJcblx0XHQvLyAvLyBnZXQgVG9kYXkncyBOb3RlOiBEYWlseU5vdGVJbnRlcmZhY2VcdTMwNkV0ZXN0XHUzMDZFXHUzMDVGXHUzMDgxXHUzMDZFXHU5NThCXHU3NjdBXHU3NTI4XHUzMEIzXHUzMERFXHUzMEYzXHUzMEM5XHUzMDAyXHJcblx0XHQvLyAvLyBcdTUxNjhEYWlseU5vdGVcdTMwOTJcdTUzRDZcdTVGOTdcdTMwNTdcdTMwNUZcdTMwNkVcdTMwNjFcdTMwMDFcdTY3MkNcdTY1RTVcdTUyMDZcdTMwOTJcdTUzRDZcdTVGOTdcdTMwNTdcdTMwNjZcdTMwMDFjb25zb2xlXHUzMDZCXHU4ODY4XHU3OTNBXHUzMDU5XHUzMDhCXHUzMDAyXHJcblx0XHRcclxuXHRcdC8vIHRoaXMuYWRkQ29tbWFuZCh7XHJcblx0XHQvLyBcdGlkOiAnZGFpbHktbm90ZS1vdXRsaW5lLWdldFRvZGF5c05vdGUnLFxyXG5cdFx0Ly8gXHRuYW1lOiBcIkdldCBUb2RheSdzIE5vdGVcIixcclxuXHRcdC8vIFx0Y2FsbGJhY2s6IGFzeW5jICgpPT57XHJcblx0XHQvLyBcdFx0Ly8gXHU1MTY4XHUzMDY2XHUzMDZFXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU1M0Q2XHU1Rjk3XHJcblx0XHQvLyBcdFx0Y29uc3QgYWxsRGFpbHlOb3RlcyA9IGdldEFsbERhaWx5Tm90ZXMoKTtcclxuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyhhbGxEYWlseU5vdGVzKTtcclxuXHRcdC8vIFx0XHRjb25zb2xlLmxvZyh0eXBlb2YgYWxsRGFpbHlOb3Rlcyk7XHJcblx0XHQvLyBcdFx0Y29uc29sZS5sb2coJ21vbWVudFx1MzA1RFx1MzA2RVx1MzA3RVx1MzA3RScsbW9tZW50KCkpO1xyXG5cdFx0Ly8gXHRcdGNvbnNvbGUubG9nKGBEYWlseU5vdGVJbnRlcmZhY2VcdTMwNkVcdTMwQURcdTMwRkNcdTMwNkVcdTVGNjJcdTVGMEZcdTMwNkJcdTMwMDJkYXktJHt3aW5kb3cubW9tZW50KCkuc3RhcnRPZignZGF5JykuZm9ybWF0KCl9YCk7XHJcblxyXG5cdFx0Ly8gXHRcdC8vXHU2NzJDXHU2NUU1XHUzMDZFXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU1M0Q2XHU1Rjk3XHJcblx0XHQvLyBcdFx0Y29uc3QgdG9kYXlzTm90ZSA9IGdldERhaWx5Tm90ZShtb21lbnQoKSwgYWxsRGFpbHlOb3Rlcyk7XHJcblx0XHQvLyBcdFx0aWYgKHRvZGF5c05vdGUpe1xyXG5cdFx0Ly8gXHRcdFx0Y29uc29sZS5sb2codG9kYXlzTm90ZSlcclxuXHRcdC8vIFx0XHRcdC8vIFx1NjVFNVx1NEVEOFx1MzA2RVx1NTNENlx1NUY5N1xyXG5cdFx0Ly8gXHRcdFx0Y29uc3Qgbm90ZURhdGUgPSBnZXREYXRlRnJvbUZpbGUodG9kYXlzTm90ZSxcImRheVwiKTtcclxuXHRcdC8vIFx0XHRcdGNvbnNvbGUubG9nKGBcdTY1RTVcdTRFRDhcdTMwNkYgJHtub3RlRGF0ZX1cdTMwNjdcdTMwNTlgKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0Ly8gXHRcdFx0Y29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSh0b2RheXNOb3RlKTtcclxuXHRcdC8vIFx0XHRcdGNvbnNvbGUubG9nKCdjYWNoZTonLCBjYWNoZSk7XHJcblxyXG5cdFx0Ly8gXHRcdFx0Y29uc3Qgbm90ZSA9IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQodG9kYXlzTm90ZSk7XHJcblx0XHQvLyBcdFx0XHRjb25zb2xlLmxvZyhub3RlKTtcclxuXHJcblx0XHQvLyBcdFx0fSBlbHNlIHtcclxuXHRcdC8vIFx0XHRcdGNvbnNvbGUubG9nKCdcdTRFQ0FcdTY1RTVcdTMwNkVcdTMwQ0VcdTMwRkNcdTMwQzhcdTMwNENcdTMwN0ZcdTMwNDJcdTMwNUZcdTMwOEFcdTMwN0VcdTMwNUJcdTMwOTMnKTtcclxuXHRcdC8vIFx0XHR9XHJcblx0XHQvLyBcdH1cclxuXHRcdC8vIH0pO1xyXG5cdFxyXG5cdC8vICB2aWV3XHUzMDZFXHU2NkY0XHU2NUIwKFx1MzBBMlx1MzBDM1x1MzBEN1x1MzBDN1x1MzBGQ1x1MzBDOFx1NjY0Mlx1NzUyOClcclxuXHR0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeShhc3luYygpPT57XHJcblx0XHR0aGlzLmNoZWNrVmlldyhmYWxzZSk7XHJcblx0fSlcclxuXHJcblx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cclxuXHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IERhaWx5Tm90ZU91dGxpbmVTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG5cdH1cclxuXHJcblx0b251bmxvYWQoKSB7XHJcblx0XHQvLyBEZXZlbG9wZXIgRG9jc1x1MzA2Qlx1NUY5M1x1MzA2M1x1MzA2Nlx1MzBBQlx1MzBCOVx1MzBCRlx1MzBFMFx1MzBEM1x1MzBFNVx1MzBGQ1x1MzA5Mlx1MzBDN1x1MzBCRlx1MzBDM1x1MzBDMVxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUpO1xyXG5cdH1cclxuXHJcblx0YXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcblx0XHQvLyB2MC42LjBcdTRFRTVcdTUyNERcdTMwNkVcdThBMkRcdTVCOUFcdTMwQzdcdTMwRkNcdTMwQkZcdTMwNkJcdTVCRkVcdTMwNTdcdTMwNjZcdTRFOTJcdTYzREJcdTYwMjdcdTMwOTJcdTdEQURcdTYzMDFcdTMwNTlcdTMwOEJcdTMwNUZcdTMwODFcdTMwNkVcdTVCRkVcdTVGRENcclxuXHRcdC8vIDAuNlx1RkYwRTBcdTRFRTVcdTUyNERcdTMwNkZkdXJhdGlvblx1MzA2RiBudW1iZXJcdTU3OEJcdTMwNjBcdTMwNjNcdTMwNUZcdTMwNENcdTMwMDEgZGF5fnllYXJcdTMwNkVcdTMwRDdcdTMwRURcdTMwRDFcdTMwQzZcdTMwQTNcdTMwOTJcdTYzMDFcdTMwNjRcdTMwQUFcdTMwRDZcdTMwQjhcdTMwQTdcdTMwQUZcdTMwQzhcdTMwNkJcdTU5MDlcdTY2RjRcdTMwNTdcdTMwNUZcdTMwMDJcclxuXHRcdGlmICh0eXBlb2YgdGhpcy5zZXR0aW5ncy5kdXJhdGlvbiA9PT0gXCJudW1iZXJcIil7XHJcblx0XHRcdHRoaXMuc2V0dGluZ3MuZHVyYXRpb24gPSBERUZBVUxUX1NFVFRJTkdTLmR1cmF0aW9uO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuXHR9XHJcblxyXG5cdGNoZWNrVmlldyA9IGFzeW5jKGFjdGl2YXRlVmlldzogYm9vbGVhbik6UHJvbWlzZTx2b2lkPiA9PiB7XHJcblxyXG5cdFx0bGV0IFtsZWFmXSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoRGFpbHlOb3RlT3V0bGluZVZpZXdUeXBlKTtcclxuXHRcdGlmICghbGVhZikge1xyXG5cdFx0XHRzd2l0Y2ggKHRoaXMuc2V0dGluZ3Mudmlld1Bvc2l0aW9uKSB7XHJcblx0XHRcdFx0Y2FzZSAncmlnaHQnOlxyXG5cdFx0XHRcdFx0bGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnbGVmdCc6XHJcblx0XHRcdFx0XHRsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlZnRMZWFmKGZhbHNlKTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ3RhYic6XHJcblx0XHRcdFx0XHRsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAnc3BsaXQnOlxyXG5cdFx0XHRcdFx0bGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCdzcGxpdCcpO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSAncG9wb3V0JzpcclxuXHRcdFx0XHRcdGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZignd2luZG93Jyk7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cdFx0XHRhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7IHR5cGU6IERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZX0pO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoYWN0aXZhdGVWaWV3KSB7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xyXG5cdFx0fVxyXG5cdH0gXHJcblx0IFxyXG59IiwgImltcG9ydCB7IE1hcmtkb3duVmlldywgTm90aWNlLCBzZXRJY29uLCBkZWJvdW5jZSwgRGVib3VuY2VyLCBNZW51LCBWaWV3U3RhdGVSZXN1bHQsIFZpZXd9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBURmlsZX0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuaW1wb3J0IHsgZ2V0QWxsRGFpbHlOb3RlcywgZ2V0RGF0ZUZyb21GaWxlLCBjcmVhdGVEYWlseU5vdGUsIGdldERhdGVVSUQsIFxyXG5cdGdldEFsbFdlZWtseU5vdGVzLCBnZXRBbGxNb250aGx5Tm90ZXMsIGdldEFsbFF1YXJ0ZXJseU5vdGVzLCBnZXRBbGxZZWFybHlOb3RlcywgSUdyYW51bGFyaXR5IH0gZnJvbSBcIm9ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZVwiO1xyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIlxyXG5cclxuaW1wb3J0IERhaWx5Tm90ZU91dGxpbmVQbHVnaW4sIHsgRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzLCBPdXRsaW5lRGF0YSwgRmlsZUluZm8sIEZpbGVTdGF0dXMsIERBWVNfUEVSX1VOSVQsR1JBTlVMQVJJVFlfTElTVCwgR1JBTlVMQVJJVFlfVE9fUEVSSU9ESUNJVFksIEZJTEVJTkZPX1RPX0RJU1BMQVksIEZJTEVJTkZPX1RPX0RJU1BMQVlfREFZfSBmcm9tICdzcmMvbWFpbic7XHJcblxyXG5pbXBvcnQgeyBjcmVhdGVBbmRPcGVuRGFpbHlOb3RlIH0gZnJvbSAnc3JjL2NyZWF0ZUFuZE9wZW5EYWlseU5vdGUnO1xyXG5pbXBvcnQgeyBNb2RhbEV4dHJhY3QgfSBmcm9tICdzcmMvbW9kYWxFeHRyYWN0JztcclxuXHJcbi8vIFBlcmlvZGljIE5vdGVzXHJcbmltcG9ydCB7dHlwZSBDYWxlbmRhclNldCx9IGZyb20gJ3NyYy9wZXJpb2RpY05vdGVzVHlwZXMnO1xyXG5pbXBvcnQgeyBjcmVhdGVBbmRPcGVuUGVyaW9kaWNOb3RlIH0gZnJvbSAnLi9jcmVhdGVBbmRPcGVuUGVyaW9kaWNOb3RlJztcclxuXHJcbmltcG9ydCB7IGRyYXdVSSB9IGZyb20gJ3NyYy9kcmF3VUknO1xyXG5pbXBvcnQgeyBnZXRUYXJnZXRGaWxlcywgZ2V0VGFyZ2V0UGVyaW9kaWNOb3RlcyB9IGZyb20gJy4vZ2V0VGFyZ2V0RmlsZXMnO1xyXG5pbXBvcnQgeyBnZXRGaWxlSW5mbywgZ2V0T3V0bGluZSB9IGZyb20gJy4vZ2V0T3V0bGluZSc7XHJcbmltcG9ydCB7IGRyYXdPdXRsaW5lIH0gZnJvbSAnLi9jb25zdHJ1Y3RET00nO1xyXG5cclxuXHJcblxyXG5cclxuXHJcbmV4cG9ydCBjb25zdCBEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUgPSAnZGFpbHktbm90ZS1vdXRsaW5lJztcclxuXHJcbi8vIFN0YXRlXHUzMDY3XHU3M0ZFXHU1NzI4XHU4ODY4XHU3OTNBXHU0RTJEXHUzMDZFXHU3QzkyXHU1RUE2XHUzMDAxXHUzMEFCXHUzMEVDXHUzMEYzXHUzMEMwXHUzMEZDXHUzMEJCXHUzMEMzXHUzMEM4XHUzMDkyXHU0RkREXHU2MzAxXHJcbmludGVyZmFjZSBJRGFpbHlOb3RlT3V0bGluZVN0YXRlIHtcclxuXHRhY3RpdmVTZXQ6IG51bWJlcjtcclxuXHRhY3RpdmVHcmFudWxhcml0eTogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRGFpbHlOb3RlT3V0bGluZVZpZXcgZXh0ZW5kcyBJdGVtVmlldyBpbXBsZW1lbnRzIElEYWlseU5vdGVPdXRsaW5lU3RhdGUge1xyXG5cdFxyXG5cdHBsdWdpbjogRGFpbHlOb3RlT3V0bGluZVBsdWdpbjtcclxuXHRzZXR0aW5nczpEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3M7XHJcblxyXG5cdGFsbERhaWx5Tm90ZXM6IFJlY29yZDxzdHJpbmcsVEZpbGU+O1xyXG5cdFxyXG5cdHRhcmdldEZpbGVzOiBURmlsZVtdO1xyXG5cdC8vIGZpbGVTdGF0dXM6IEZpbGVTdGF0dXNbXTtcclxuXHRmaWxlSW5mbzogRmlsZUluZm9bXTtcclxuXHRzZWFyY2hSYW5nZToge1xyXG5cdFx0bGF0ZXN0OiBtb21lbnQsXHJcblx0XHRlYXJsaWVzdDogbW9tZW50XHJcblx0fSA9IHtcclxuXHRcdGxhdGVzdDogd2luZG93Lm1vbWVudCgpLFxyXG5cdFx0ZWFybGllc3Q6IHdpbmRvdy5tb21lbnQoKVxyXG5cdH07XHJcblx0b3V0bGluZURhdGE6IE91dGxpbmVEYXRhW11bXTtcclxuXHJcblx0ZmxhZ1JlZHJhdzogYm9vbGVhbjtcclxuXHRmbGFnUmVnZXRBbGw6IGJvb2xlYW47XHJcblxyXG5cdGV4dHJhY3RNb2RlOiBib29sZWFuID0gZmFsc2U7XHJcblx0ZXh0cmFjdFRhc2s6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcblx0Ly9cdTUxNjhcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwNkVcdTYyOThcdTMwOEFcdTMwNUZcdTMwNUZcdTMwN0ZcclxuXHRjb2xsYXBzZUFsbDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuXHQvLyBQZXJpb2RpYyBOb3Rlc1xyXG5cdHZlclBOOiBudW1iZXI7ICAvLyBQZXJpb2RpYyBOb3RlcyBwbHVnaW5cdTMwNkVcdTMwRDBcdTMwRkNcdTMwQjhcdTMwRTdcdTMwRjMgIDBcdUZGMUFvZmYgIDFcdUZGMUE8MS4wLjAgIDI6Pj0xLjAuMCBcclxuXHRjYWxlbmRhclNldHM6IENhbGVuZGFyU2V0W107XHJcblx0YWN0aXZlU2V0OiBudW1iZXIgPSAwOyBcclxuXHRhY3RpdmVHcmFudWxhcml0eTogbnVtYmVyID0gMDsgLy8gZGF5IHwgd2VlayB8IG1vbnRoIHwgcXVhcnRlciB8IHllYXIgR1JBTlVMQVJJVFlfTElTVFx1MzA2RVx1NkRGQlx1MzA0OFx1NUI1N1x1MzA2OFx1MzA1N1x1MzA2NlxyXG4gIFxyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0bGVhZjogV29ya3NwYWNlTGVhZixcclxuXHRcdHBsdWdpbjogRGFpbHlOb3RlT3V0bGluZVBsdWdpbixcclxuXHRcdHNldHRpbmdzOiBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3MsXHJcblx0KSB7XHJcblx0XHRzdXBlcihsZWFmKTtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5zZXR0aW5ncyA9IHNldHRpbmdzO1xyXG5cdH1cclxuICBcclxuXHRnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuIERhaWx5Tm90ZU91dGxpbmVWaWV3VHlwZTtcclxuXHR9XHJcbiAgXHJcblx0Z2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuXHRcdHJldHVybiAnRGFpbHkgTm90ZSBPdXRsaW5lJztcclxuXHR9XHJcbiAgXHJcblx0Z2V0SWNvbigpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuICdjYWxlbmRhci1jbG9jayc7XHJcblx0fVxyXG5cclxuXHRcclxuXHRhc3luYyBvbk9wZW4oKXtcclxuXHJcblx0XHR0aGlzLmluaXRWaWV3KCk7XHJcblx0XHQvLyAgXHU1MjFEXHU1NkRFXHUzMDZFXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHU2M0EyXHU3RDIyXHU1MUU2XHU3NDA2XHUzMDZGaW5pdFZpZXcoKVx1MzA2Qlx1NzlGQlx1NTJENVx1MzA1N1x1MzAwMVx1NUI5Rlx1ODg0Q1x1NTI0RFx1MzA2Qlx1MzA4Rlx1MzA1QVx1MzA0Qlx1MzA2Qlx1MzBBNlx1MzBBOFx1MzBBNFx1MzBDOChib290RGVsYXkpXHUzMDkyXHU1MTY1XHUzMDhDXHUzMDVGXHUzMDAyXHJcblx0XHQvLyAgXHUzMDVEXHUzMDQ2XHUzMDU3XHUzMDZBXHUzMDQ0XHUzMDY4XHU4RDc3XHU1MkQ1XHU2NjQyXHUzMDZCXHU1MTY4XHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDZFXHUzMEM3XHUzMEZDXHUzMEJGXHU1M0Q2XHU1Rjk3XHUzMDZCXHU1OTMxXHU2NTU3XHUzMDU5XHUzMDhCXHUzMDg4XHUzMDQ2XHUzMDYwXHUzMDYzXHUzMDVGXHUzMDVGXHUzMDgxXHUzMDAyXHJcblxyXG5cdFx0Ly9cdTgxRUFcdTUyRDVcdTY2RjRcdTY1QjBcdTMwNkVcdTMwNUZcdTMwODFcdTMwNkVcdTMwQzdcdTMwRkNcdTMwQkZcdTU5MDlcdTY2RjRcdTMwMDFcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdThGRkRcdTUyQTAvXHU1MjRBXHU5NjY0XHUzMDZFXHU3NkUzXHU4OTk2IG9ic2VydmUgZmlsZSBjaGFuZ2UvY3JlYXRlL2RlbGV0ZVxyXG5cdFx0Y29uc3QgZGVib3VuY2VyUmVxdWVzdFJlZnJlc2g6RGVib3VuY2VyPFtdPiA9IGRlYm91bmNlKHRoaXMuYXV0b1JlZnJlc2gsMjAwMCx0cnVlKTtcclxuXHRcdHRoaXMuZmxhZ1JlZHJhdyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5mbGFnUmVnZXRBbGwgPSBmYWxzZTsgXHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAubWV0YWRhdGFDYWNoZS5vbignY2hhbmdlZCcsIChmaWxlKSA9PiB7XHJcblx0XHRcdGlmICh0aGlzLnRhcmdldEZpbGVzPy5pbmNsdWRlcyhmaWxlKSl7XHJcblx0XHRcdFx0dGhpcy5mbGFnUmVkcmF3ID0gdHJ1ZTtcclxuXHRcdFx0XHRkZWJvdW5jZXJSZXF1ZXN0UmVmcmVzaC5jYWxsKHRoaXMpO1xyXG5cdFx0XHR9XHJcblx0XHR9KSk7XHJcblxyXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KHRoaXMuYXBwLnZhdWx0Lm9uKCdjcmVhdGUnLChmaWxlKT0+e1xyXG5cdFx0XHR0aGlzLmZsYWdSZWdldEFsbCA9IHRydWU7XHJcblx0XHRcdGRlYm91bmNlclJlcXVlc3RSZWZyZXNoLmNhbGwodGhpcyk7XHJcblx0XHR9KSk7XHJcblx0XHR0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAudmF1bHQub24oJ2RlbGV0ZScsKGZpbGUpPT57XHJcblx0XHRcdHRoaXMuZmxhZ1JlZ2V0QWxsID0gdHJ1ZTtcclxuXHRcdFx0ZGVib3VuY2VyUmVxdWVzdFJlZnJlc2guY2FsbCh0aGlzKTtcclxuXHRcdH0pKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIG9uQ2xvc2UoKXtcclxuXHRcdC8vIE5vdGhpbiB0byBjbGVhbiB1cFxyXG5cdH1cclxuXHJcblx0Ly8gaHR0cHM6Ly9saWFtY2EuaW4vT2JzaWRpYW4vQVBJK0ZBUS92aWV3cy9wZXJzaXN0aW5nK3lvdXIrdmlldytzdGF0ZVxyXG5cdGFzeW5jIHNldFN0YXRlKHN0YXRlOiBJRGFpbHlOb3RlT3V0bGluZVN0YXRlLCByZXN1bHQ6Vmlld1N0YXRlUmVzdWx0KTpQcm9taXNlPHZvaWQ+e1xyXG5cdFx0aWYgKHN0YXRlLmFjdGl2ZVNldCl7XHJcblx0XHRcdHRoaXMuYWN0aXZlU2V0ID0gc3RhdGUuYWN0aXZlU2V0O1xyXG5cdFx0fVxyXG5cdFx0aWYgKHN0YXRlLmFjdGl2ZUdyYW51bGFyaXR5KXtcclxuXHRcdFx0dGhpcy5hY3RpdmVHcmFudWxhcml0eSA9IHN0YXRlLmFjdGl2ZUdyYW51bGFyaXR5O1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHN1cGVyLnNldFN0YXRlKHN0YXRlLCByZXN1bHQpO1xyXG5cdH1cclxuXHJcblx0Z2V0U3RhdGUoKTogSURhaWx5Tm90ZU91dGxpbmVTdGF0ZSB7XHJcblx0XHRyZXR1cm4ge1xyXG5cdFx0XHRhY3RpdmVTZXQ6IHRoaXMuYWN0aXZlU2V0LFxyXG5cdFx0XHRhY3RpdmVHcmFudWxhcml0eTogdGhpcy5hY3RpdmVHcmFudWxhcml0eSxcclxuXHRcdH07XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGluaXRWaWV3KCkge1xyXG5cdFx0YXdhaXQgdGhpcy5ib290RGVsYXkoKTsgLy9cdTVDMTFcdTMwNTdcdTVGODVcdTMwNUZcdTMwNkFcdTMwNDRcdTMwNjhcdThENzdcdTUyRDVcdTc2RjRcdTVGOENcdTMwNkZEYWlseSBOb3RlXHUzMDZFXHU1M0Q2XHU1Rjk3XHUzMDZCXHU1OTMxXHU2NTU3XHUzMDU5XHUzMDhCXHUzMDg4XHUzMDQ2XHUzMDYwXHJcblx0XHR0aGlzLmNvbGxhcHNlQWxsID0gdGhpcy5zZXR0aW5ncy5jb2xsYXBzZUFsbEF0U3RhcnR1cDtcclxuXHRcdFxyXG5cdFx0dGhpcy52ZXJQTiA9IGF3YWl0IHRoaXMuY2hlY2tQZXJpb2RpY05vdGVzKCk7XHJcblx0XHR0aGlzLnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuXHRcdFxyXG5cdFx0dGhpcy5yZWZyZXNoVmlldyh0cnVlLCB0cnVlLCB0cnVlKTtcclxuXHRcclxuXHR9XHJcblxyXG5cdHByaXZhdGUgYXN5bmMgYm9vdERlbGF5KCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4geyBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCk7fSk7XHJcblx0fVxyXG5cclxuXHRwcml2YXRlIGFzeW5jIGF1dG9SZWZyZXNoKCl7XHJcblx0XHRpZiAoISh0aGlzLmZsYWdSZWRyYXcgfHwgdGhpcy5mbGFnUmVnZXRBbGwpKXtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMucmVmcmVzaFZpZXcodGhpcy5mbGFnUmVnZXRBbGwsIHRoaXMuZmxhZ1JlZ2V0QWxsLCB0cnVlKTtcclxuXHRcdHRoaXMuZmxhZ1JlZ2V0QWxsID0gZmFsc2U7XHJcblx0XHR0aGlzLmZsYWdSZWRyYXcgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8vIFx1MzBFQVx1MzBENVx1MzBFQ1x1MzBDM1x1MzBCN1x1MzBFNVx1MzBCQlx1MzBGM1x1MzBCRlx1MzBGQ1xyXG5cdC8vIHJlZ2V0QWxsXHUzMDRDdHJ1ZTogXHU1MTY4XHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU1M0Q2XHU1Rjk3XHUzMDU3XHU3NkY0XHUzMDU5XHJcblx0Ly8gZ2V0VGFyZ2V0XHUzMDRDdHJ1ZTogXHU3M0ZFXHU1NzI4XHUzMDZFXHU2M0EyXHU3RDIyXHU3QkM0XHU1NkYyXHUzMDZCXHU1NDJCXHUzMDdFXHUzMDhDXHUzMDhCXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU3Mjc5XHU1QjlBXHJcblx0Ly8gZ2V0T3V0bGluZVx1MzA0Q3RydWU6IFx1NUJGRVx1OEM2MVx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1N0ZBNFx1MzA2RVx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1NjBDNVx1NTgzMVx1MzAwMVx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1NjBDNVx1NTgzMVx1MzA5Mlx1NTNENlx1NUY5N1xyXG5cdC8vIFx1MzA1RFx1MzA2RVx1NUY4Q1VJXHU5MEU4XHU1MjA2XHUzMDY4XHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU5MEU4XHU1MjA2XHUzMDkyXHU2M0NGXHU3NTNCXHJcblx0YXN5bmMgcmVmcmVzaFZpZXcoZmxhZ1JlZ2V0QWxsOiBib29sZWFuLCBmbGFnR2V0VGFyZ2V0OmJvb2xlYW4sIGZsYWdHZXRPdXRsaW5lOmJvb2xlYW4pe1xyXG5cdFx0Y29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93RGVidWdJbmZvKXtcclxuXHRcdFx0Y29uc29sZS5sb2coJ0ROTzpzdGFydCByZWZyZXNoaW5nIHZpZXcuIENhbGVuZGFyU2V0czonLHRoaXMuY2FsZW5kYXJTZXRzKTtcclxuXHRcdH1cclxuXHRcdHRoaXMudmVyUE4gPSBhd2FpdCB0aGlzLmNoZWNrUGVyaW9kaWNOb3RlcygpO1xyXG5cclxuXHRcdGlmICh0aGlzLnZlclBOICE9IDIpe1xyXG5cdFx0XHQvLyBjb3JlIGRhaWx5IG5vdGUvIHBlcmlvZGljIG5vdGVzIHBsdWdpbiB2MC54IFx1MzA2RVx1NTgzNFx1NTQwOFxyXG5cdFx0XHRpZiAoZmxhZ1JlZ2V0QWxsKXtcclxuXHRcdFx0XHR0aGlzLmFsbERhaWx5Tm90ZXMgPSB0aGlzLmdldEFsbE5vdGVzKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGZsYWdHZXRUYXJnZXQpe1xyXG5cdFx0XHRcdHRoaXMudGFyZ2V0RmlsZXMgPSBnZXRUYXJnZXRGaWxlcy5jYWxsKHRoaXMsIHRoaXMuYWxsRGFpbHlOb3RlcywgR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYoZmxhZ0dldE91dGxpbmUpe1xyXG5cdFx0XHRcdHRoaXMuZmlsZUluZm8gPSBhd2FpdCBnZXRGaWxlSW5mby5jYWxsKHRoaXMsIHRoaXMudGFyZ2V0RmlsZXMpO1xyXG5cdFx0XHRcdHRoaXMub3V0bGluZURhdGEgPSBhd2FpdCBnZXRPdXRsaW5lLmNhbGwodGhpcywgdGhpcy50YXJnZXRGaWxlcyk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZHJhd1VJLmNhbGwodGhpcyk7XHJcblx0XHRcdGRyYXdPdXRsaW5lLmNhbGwodGhpcywgdGhpcy50YXJnZXRGaWxlcywgdGhpcy5maWxlSW5mbywgdGhpcy5vdXRsaW5lRGF0YSk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBwZXJpb2RpYyBub3RlcyBwbHVnaW4gdjEueFx1NUJGRVx1NUZEQ1xyXG5cdFx0XHRpZiAoIXRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XSl7XHJcblx0XHRcdFx0dGhpcy5hY3RpdmVTZXQgPSAwO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICghdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdW0dSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV1dPy5lbmFibGVkKXtcclxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93RGVidWdJbmZvKXtcclxuXHRcdFx0XHRcdGNvbnNvbGUubG9nKCdETk86IENhbGVuZGVyIHNldCBpcyBub3QgZW5hYmxlZC4gdGhpcy5hY3RpdmVHcmFudWxhcml0eSBpcyBzZXQgdG8gMC4gQ2FsZW5kYXJzZXRzLCB0aGlzLmFjdGl2ZVNldCwgdGhpcy5hY3RpdmVHcmFudWxhcml0eTonLHRoaXMuY2FsZW5kYXJTZXRzLCB0aGlzLmFjdGl2ZVNldCwgdGhpcy5hY3RpdmVHcmFudWxhcml0eSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgPSAwO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoZmxhZ0dldFRhcmdldCl7XHJcblx0XHRcdFx0dGhpcy50YXJnZXRGaWxlcyA9IGdldFRhcmdldFBlcmlvZGljTm90ZXMuY2FsbCh0aGlzLCB0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF0sIEdSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV0pXHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKGZsYWdHZXRPdXRsaW5lKXtcclxuXHRcdFx0XHR0aGlzLmZpbGVJbmZvID0gYXdhaXQgZ2V0RmlsZUluZm8uY2FsbCh0aGlzLCB0aGlzLnRhcmdldEZpbGVzKTtcclxuXHRcdFx0XHR0aGlzLm91dGxpbmVEYXRhID0gYXdhaXQgZ2V0T3V0bGluZS5jYWxsKHRoaXMsIHRoaXMudGFyZ2V0RmlsZXMpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRkcmF3VUkuY2FsbCh0aGlzKTtcclxuXHRcdFx0ZHJhd091dGxpbmUuY2FsbCh0aGlzLCB0aGlzLnRhcmdldEZpbGVzLCB0aGlzLmZpbGVJbmZvLCB0aGlzLm91dGxpbmVEYXRhKTtcclxuXHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRjb25zdCBlbmRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93RGVidWdJbmZvKXtcclxuXHRcdFx0Y29uc29sZS5sb2cgKCdETk86IHRpbWUgcmVxdWlyZWQgdG8gcmVmcmVzaCB2aWV3OiAnLCBlbmRUaW1lIC0gc3RhcnRUaW1lKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8vIFx1MzBBOFx1MzBDN1x1MzBBM1x1MzBCRlx1MzA5Mlx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1ODk4MVx1N0QyMFx1MzA2RVx1NEY0RFx1N0Y2RVx1MzA3RVx1MzA2N1x1MzBCOVx1MzBBRlx1MzBFRFx1MzBGQ1x1MzBFQlxyXG5cdHByaXZhdGUgc2Nyb2xsVG9FbGVtZW50KGxpbmU6IG51bWJlciwgY29sOiBudW1iZXIpOiB2b2lkIHtcclxuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xyXG5cdFx0aWYgKHZpZXcpIHtcclxuXHRcdFx0dmlldy5lZGl0b3IuZm9jdXMoKTtcclxuXHRcdFx0dmlldy5lZGl0b3Iuc2V0Q3Vyc29yIChsaW5lLCBjb2wpO1xyXG5cdFx0XHR2aWV3LmVkaXRvci5zY3JvbGxJbnRvVmlldygge1xyXG5cdFx0XHRcdGZyb206IHtcclxuXHRcdFx0XHRcdGxpbmU6IGxpbmUsXHJcblx0XHRcdFx0XHRjaDowXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHR0bzoge1xyXG5cdFx0XHRcdFx0bGluZTogbGluZSxcclxuXHRcdFx0XHRcdGNoOjBcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRydWUpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gXHVGRjNCIFx1RkYzRFx1MzA2RVx1OTY2NFx1NTNCQlxyXG5cdHByaXZhdGUgc3RyaXBNYXJrZG93blN5bXBvbCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0cmV0dXJuICh0ZXh0LnJlcGxhY2UoLyhcXFtcXFspfChcXF1cXF0pL2csJycpKTtcclxuXHR9XHJcblxyXG5cdC8vIFx1NjNBMlx1N0QyMlx1N0JDNFx1NTZGMlx1MzA5Mlx1OEEyRFx1NUI5QVx1MzA2Qlx1NTQwOFx1MzA4Rlx1MzA1Qlx1MzA2Nlx1NTIxRFx1NjcxRlx1NTMxNlxyXG5cdHB1YmxpYyByZXNldFNlYXJjaFJhbmdlKCk6dm9pZCB7XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5pbml0aWFsU2VhcmNoVHlwZSA9PSAnZm9yd2FyZCcpe1xyXG5cdFx0XHRjb25zdCBvbnNldERhdGUgPSB3aW5kb3cubW9tZW50KHRoaXMuc2V0dGluZ3Mub25zZXQsXCJZWVlZLU1NLUREXCIpO1xyXG5cdFx0XHRpZiAob25zZXREYXRlLmlzVmFsaWQoKSl7XHJcblx0XHRcdFx0dGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IG9uc2V0RGF0ZTtcclxuXHRcdFx0XHR0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdCA9IG9uc2V0RGF0ZS5jbG9uZSgpLmFkZCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uLmRheSAtMSwnZGF5cycpO1xyXG5cdFx0XHR9IGVsc2UgeyAgXHJcblx0XHRcdFx0Ly8gb25zZXREYXRlXHUzMDRDXHU0RTBEXHU2QjYzXHUzMDZBXHUzMDg5XHU1RjUzXHU2NUU1XHU4RDc3XHU3MEI5XHUzMDZFYmFja3dhcmQgc2VhcmNoXHUzMDkyXHU4ODRDXHUzMDQ2XHJcblx0XHRcdFx0bmV3IE5vdGljZSgnb25zZXQgZGF0ZSBpcyBpbnZhbGlkJyk7XHJcblx0XHRcdFx0dGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QgPSB3aW5kb3cubW9tZW50KCkuc3RhcnRPZignZGF5Jyk7XHJcblx0XHRcdFx0dGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHdpbmRvdy5tb21lbnQoKS5zdGFydE9mKCdkYXknKS5zdWJ0cmFjdCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uLmRheSAtIDEsJ2RheXMnKVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmluaXRpYWxTZWFyY2hUeXBlID09ICdiYWNrd2FyZCcpe1xyXG5cdFx0XHR0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdCA9IHdpbmRvdy5tb21lbnQoKS5zdGFydE9mKCdkYXknKTtcclxuXHRcdFx0dGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHdpbmRvdy5tb21lbnQoKS5zdGFydE9mKCdkYXknKS5zdWJ0cmFjdCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uLmRheSAtIDEgLCdkYXlzJyk7XHJcblx0XHR9IFxyXG5cdH1cclxuXHJcblx0Ly8gUGVyaW9kaWMgTm90ZXNcdTMwNkVcdTcyQjZcdTYxNEJcdTMwOTJcdTMwQzFcdTMwQTdcdTMwQzNcdTMwQUYgIHJldHVybiAwOlx1MzBBQVx1MzBENSAxOnYwLngueCAyOnYxLjAuMC1cclxuXHRwcml2YXRlIGFzeW5jIGNoZWNrUGVyaW9kaWNOb3RlcygpOiBQcm9taXNlPG51bWJlcj4ge1xyXG5cdFx0XHJcblx0XHRpZiAodGhpcy5zZXR0aW5ncy5zaG93RGVidWdJbmZvKXtcclxuXHRcdFx0Y29uc29sZS5sb2coJ0ROTzpjaGVja2luZyB0aGUgdmVyc2lvbiBvZiBQZXJpb2RpYyBOb3RlcyBwbHVnaW4nKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoYXBwLnBsdWdpbnMucGx1Z2luc1sncGVyaW9kaWMtbm90ZXMnXSl7XHJcblx0XHRcdGlmIChOdW1iZXIoYXBwLnBsdWdpbnMucGx1Z2luc1sncGVyaW9kaWMtbm90ZXMnXS5tYW5pZmVzdC52ZXJzaW9uLnNwbGl0KFwiLlwiKVswXSkgPj0xKXtcclxuXHRcdFx0XHQvLyB2ZXIgMS4wLjBcdTRFRTVcdTRFMEFcclxuXHRcdFx0XHR0aGlzLmNhbGVuZGFyU2V0cyA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LmNhbGVuZGFyU2V0TWFuYWdlci5nZXRDYWxlbmRhclNldHMoKTtcclxuXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0RlYnVnSW5mbyl7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygncmV0dXJuIG9mIHRoaXMuYXBwLlBOLmNhbGVuZGFyU2V0TWFuYWdlci5nZXRDYWxlbmRhclNldHMoKTogJyx0aGlzLmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5jYWxlbmRhclNldE1hbmFnZXIuZ2V0Q2FsZW5kYXJTZXRzKCkpO1xyXG5cdFx0XHRcdFx0Y29uc29sZS5sb2coJ3JldHVybiBvZiB3aW5kb3cuYXBwLlBOLmNhbGVuZGFyU2V0TWFuYWdlci5nZXRDYWxlbmRhclNldHMoKTogJyx3aW5kb3cuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LmNhbGVuZGFyU2V0TWFuYWdlci5nZXRDYWxlbmRhclNldHMoKSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghdGhpcy5jYWxlbmRhclNldHMubGVuZ3RoKXtcclxuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ2ZhaWxlZCB0byBpbXBvcnQgY2FsZW5kYXIgc2V0cyB0byBEYWlseSBOb3RlIE91dGxpbmUnKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgaW5pdGlhbEdyYW51bGFyaXR5ID0gdGhpcy5hY3RpdmVHcmFudWxhcml0eTtcclxuXHRcdFx0XHR3aGlsZSAoIXRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XVtHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldXT8uZW5hYmxlZCl7XHJcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ID0gKHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgKyAxKSAlIEdSQU5VTEFSSVRZX0xJU1QubGVuZ3RoO1xyXG5cdFx0XHRcdFx0aWYodGhpcy5hY3RpdmVHcmFudWxhcml0eSA9PSBpbml0aWFsR3JhbnVsYXJpdHkpe1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHRcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmVxdWVzdFNhdmVMYXlvdXQoKTtcclxuXHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0RlYnVnSW5mbyl7XHJcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnb2J0YWluZWQgdmVyUE46ICcsIHRoaXMudmVyUE4gLCcgY2FsZW5kYXJTZXRzOiAnLCB0aGlzLmNhbGVuZGFyU2V0cyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHJldHVybiAyO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIHZlciAwLngueFxyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MuY2FsZW5kYXJTZXRzRW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMuYWN0aXZlU2V0ID0gMDtcclxuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTsgIFxyXG5cclxuXHRcdFx0XHRjb25zdCBpbml0aWFsR3JhbnVsYXJpdHkgPSB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5O1xyXG5cdFx0XHRcdHdoaWxlICghdGhpcy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKS5zZXR0aW5ncz8uW0dSQU5VTEFSSVRZX1RPX1BFUklPRElDSVRZW0dSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV1dXT8uZW5hYmxlZCl7XHJcblx0XHRcdFx0XHR0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ID0gKHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgKyAxKSAlIEdSQU5VTEFSSVRZX0xJU1QubGVuZ3RoO1xyXG5cdFx0XHRcdFx0aWYodGhpcy5hY3RpdmVHcmFudWxhcml0eSA9PSBpbml0aWFsR3JhbnVsYXJpdHkpe1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHRcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UucmVxdWVzdFNhdmVMYXlvdXQoKTtcclxuXHRcdFx0XHRyZXR1cm4gMTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gUGVyaW9kaWMgTm90ZXNcdTMwNENcdTMwQUFcdTMwRDVcdTMwNEJcdTMwQTRcdTMwRjNcdTMwQjlcdTMwQzhcdTMwRkNcdTMwRUJcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwNkFcdTMwNDRcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5wZXJpb2RpY05vdGVzRW5hYmxlZCA9IGZhbHNlO1xyXG5cdFx0XHR0aGlzLnNldHRpbmdzLmNhbGVuZGFyU2V0c0VuYWJsZWQgPSBmYWxzZTtcclxuXHRcdFx0dGhpcy5hY3RpdmVHcmFudWxhcml0eSA9IDA7XHJcblx0XHRcdHRoaXMuYWN0aXZlU2V0ID0gMDtcclxuXHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcblx0XHRcdHJldHVybiAwO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Ly8gZ3JhbnVsYXJpdHlcdTMwNkJcdTVGOTNcdTMwNjNcdTMwNjZcdTUxNjhcdTMwNjZcdTMwNkVkYWlseS93ZWVrbHkvbW9udGhseS9xdWFydGVybHkveWVhcmx5XHUzMENFXHUzMEZDXHUzMEM4XHUzMDkyXHU1M0Q2XHU1Rjk3XHJcblx0Z2V0QWxsTm90ZXMoKTpSZWNvcmQ8c3RyaW5nLFRGaWxlPiB7XHJcblx0XHRzd2l0Y2ggKHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkpe1xyXG5cdFx0XHRjYXNlIDA6XHJcblx0XHRcdFx0cmV0dXJuIGdldEFsbERhaWx5Tm90ZXMoKTtcclxuXHRcdFx0Y2FzZSAxOlxyXG5cdFx0XHRcdHJldHVybiBnZXRBbGxXZWVrbHlOb3RlcygpO1xyXG5cdFx0XHRjYXNlIDI6XHJcblx0XHRcdFx0cmV0dXJuIGdldEFsbE1vbnRobHlOb3RlcygpO1xyXG5cdFx0XHRjYXNlIDM6XHJcblx0XHRcdFx0cmV0dXJuIGdldEFsbFF1YXJ0ZXJseU5vdGVzKCk7XHJcblx0XHRcdGNhc2UgNDpcclxuXHRcdFx0XHRyZXR1cm4gZ2V0QWxsWWVhcmx5Tm90ZXMoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuIiwgIlxyXG5pbXBvcnQgeyBzZXRJY29uLCBURmlsZSwgTWVudSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgR1JBTlVMQVJJVFlfTElTVCwgR1JBTlVMQVJJVFlfVE9fUEVSSU9ESUNJVFksIEZJTEVJTkZPX1RPX0RJU1BMQVksIEZJTEVJTkZPX1RPX0RJU1BMQVlfREFZLERBWVNfUEVSX1VOSVQsICB9IGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IGNyZWF0ZUFuZE9wZW5EYWlseU5vdGUgfSBmcm9tICdzcmMvY3JlYXRlQW5kT3BlbkRhaWx5Tm90ZSc7XHJcbmltcG9ydCB7IE1vZGFsRXh0cmFjdCB9IGZyb20gJ3NyYy9tb2RhbEV4dHJhY3QnO1xyXG5pbXBvcnQge3R5cGUgQ2FsZW5kYXJTZXQsfSBmcm9tICdzcmMvcGVyaW9kaWNOb3Rlc1R5cGVzJztcclxuaW1wb3J0IHsgY3JlYXRlQW5kT3BlblBlcmlvZGljTm90ZSB9IGZyb20gJy4vY3JlYXRlQW5kT3BlblBlcmlvZGljTm90ZSc7XHJcbmltcG9ydCB7IElHcmFudWxhcml0eSB9IGZyb20gJ29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZSc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZHJhd1VJKCk6IHZvaWQge1xyXG4gICAgXHJcbiAgICBjb25zdCBuYXZIZWFkZXI6IEhUTUxFbGVtZW50ID0gY3JlYXRlRGl2KFwibmF2LWhlYWRlclwiKTtcclxuICAgIGNvbnN0IG5hdkJ1dHRvbkNvbnRhaW5lcjogSFRNTEVsZW1lbnQgPSBuYXZIZWFkZXIuY3JlYXRlRGl2KFwibmF2LWJ1dHRvbnMtY29udGFpbmVyXCIpO1xyXG5cclxuICAgIC8vIHBlcmlvZGljIG5vdGVzXHJcbiAgICBjb25zdCBncmFudWxhcml0eSA9IEdSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV07XHJcbiAgICBcclxuICAgIC8vIFx1MzBBMlx1MzBBNFx1MzBCM1x1MzBGM1x1NjNDRlx1NzUzQlxyXG4gICAgdWlQcmV2aW91c1BhZ2UuY2FsbCh0aGlzLCBuYXZCdXR0b25Db250YWluZXIsIGdyYW51bGFyaXR5KTtcclxuICAgIHVpTmV4dFBhZ2UuY2FsbCh0aGlzLCBuYXZCdXR0b25Db250YWluZXIsIGdyYW51bGFyaXR5KTtcclxuICAgIHVpUmV0dXJuSG9tZS5jYWxsKHRoaXMsIG5hdkJ1dHRvbkNvbnRhaW5lcik7XHJcbiAgICAvLyB1aVVwZGF0ZS5jYWxsKHRoaXMsIG5hdkJ1dHRvbkNvbnRhaW5lcik7XHJcbiAgICB1aVNldHRpbmcuY2FsbCh0aGlzLCBuYXZCdXR0b25Db250YWluZXIsIGdyYW51bGFyaXR5KTtcclxuICAgIHVpQ3JlYXRlRGFpbHlOb3RlLmNhbGwodGhpcywgbmF2QnV0dG9uQ29udGFpbmVyLCBncmFudWxhcml0eSk7XHJcbiAgICB1aUV4dHJhY3QuY2FsbCh0aGlzLCBuYXZCdXR0b25Db250YWluZXIpO1xyXG4gICAgdWlDb2xsYXBzZS5jYWxsKHRoaXMsIG5hdkJ1dHRvbkNvbnRhaW5lcik7XHJcblxyXG4gICAgICAgXHJcbiAgICAvLyBcdTY1RTVcdTRFRDhcdTMwNkVcdTdCQzRcdTU2RjJcdTMwNkVcdTYzQ0ZcdTc1M0JcclxuICAgIGNvbnN0IG5hdkRhdGVSYW5nZTogSFRNTEVsZW1lbnQgPSBuYXZIZWFkZXIuY3JlYXRlRGl2KFwibmF2LWRhdGUtcmFuZ2VcIik7XHJcbiAgICBsZXQgbGF0ZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuY2xvbmUoKTtcclxuICAgIGxldCBlYXJsaWVzdCA9IHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QuY2xvbmUoKTtcclxuXHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5pbml0aWFsU2VhcmNoVHlwZSA9PSdiYWNrd2FyZCcpe1xyXG4gICAgICAgIGVhcmxpZXN0ID0gbGF0ZXN0LmNsb25lKCkuc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0gLSAxICxncmFudWxhcml0eSk7XHJcbiAgICAgICAgaWYgKGxhdGVzdC5pc1NhbWUod2luZG93Lm1vbWVudCgpLFwiZGF5XCIpKXtcclxuICAgICAgICAgICAgbGF0ZXN0ID0gbGF0ZXN0LmFkZChNYXRoLmNlaWwodGhpcy5zZXR0aW5ncy5vZmZzZXQvREFZU19QRVJfVU5JVFtncmFudWxhcml0eV0pLGdyYW51bGFyaXR5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5pbml0aWFsU2VhcmNoVHlwZSA9PSdmb3J3YXJkJyl7XHJcbiAgICAgICAgbGF0ZXN0ID0gZWFybGllc3QuY2xvbmUoKS5hZGQodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0gLTEgLGdyYW51bGFyaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRlUmFuZ2U6IHN0cmluZyA9IGVhcmxpZXN0LmZvcm1hdChcIllZWVkvTU0vREQgWy1dIFwiKSArIFxyXG4gICAgICAgIGxhdGVzdC5mb3JtYXQoIGVhcmxpZXN0LmlzU2FtZShsYXRlc3QsJ3llYXInKSA/ICBcIk1NL0REXCI6IFwiWVlZWS9NTS9ERFwiKTtcclxuICAgIG5hdkRhdGVSYW5nZS5jcmVhdGVEaXYoXCJuYXYtZGF0ZS1yYW5nZS1jb250ZW50XCIpLnNldFRleHQoZGF0ZVJhbmdlKTtcclxuXHJcbiAgICAvL1x1NjVFNVx1NEVEOFx1N0JDNFx1NTZGMlx1MzBBRlx1MzBFQVx1MzBDM1x1MzBBRlx1NjY0Mlx1MzA2RVx1NTJENVx1NEY1QyBcdTVGOENcdTMwNjdcdTU5MDlcdTY2RjRcdTMwNTlcdTMwOEJcclxuICAgIG5hdkRhdGVSYW5nZS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG9uc2V0RGF0ZSA9IHdpbmRvdy5tb21lbnQodGhpcy5zZXR0aW5ncy5vbnNldCxcIllZWVktTU0tRERcIik7XHJcbiAgICAgICAgICAgIGlmIChvbnNldERhdGUuaXNWYWxpZCgpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QgPSBvbnNldERhdGU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaFJhbmdlLmxhdGVzdCA9IG9uc2V0RGF0ZS5jbG9uZSgpLmFkZCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uLmRheSAtMSwnZGF5cycpO1xyXG4gICAgICAgICAgICB9IGVsc2UgeyAgXHJcbiAgICAgICAgICAgICAgICAvLyBvbnNldERhdGVcdTMwNENcdTRFMERcdTZCNjNcdTMwNkFcdTMwODlcdTVGNTNcdTY1RTVcdThENzdcdTcwQjlcdTMwNkViYWNrd2FyZCBzZWFyY2hcdTMwOTJcdTg4NENcdTMwNDZcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0ID0gd2luZG93Lm1vbWVudCgpLnN0YXJ0T2YoJ2RheScpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHdpbmRvdy5tb21lbnQoKS5zdGFydE9mKCdkYXknKS5zdWJ0cmFjdCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uLmRheSAtIDEsJ2RheXMnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsIHRydWUsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgLy8gUGVyaW9kaWMgTm90ZXMgXHU3QzkyXHU1RUE2XHU2M0NGXHU3NTNCICYgXHU3QzkyXHU1RUE2XHU1MjA3XHUzMDhBXHU2NkZGXHUzMDQ4XHU1MUU2XHU3NDA2XHJcbiAgICBpZiAodGhpcy5zZXR0aW5ncy5wZXJpb2RpY05vdGVzRW5hYmxlZCl7XHJcbiAgICAgICAgY29uc3QgbmF2R3JhbnVsYXJpdHk6IEhUTUxFbGVtZW50ID0gbmF2SGVhZGVyLmNyZWF0ZURpdihcIm5hdi1kYXRlLXJhbmdlXCIpO1xyXG4gICAgICAgIG5hdkdyYW51bGFyaXR5LmNyZWF0ZURpdihcIm5hdi1kYXRlLXJhbmdlLWNvbnRlbnRcIikuc2V0VGV4dChHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKTtcclxuXHJcbiAgICAgICAgbmF2R3JhbnVsYXJpdHkuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAoZXZldDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dEZWJ1Z0luZm8pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdETk86Y2xpY2tlZCB0byBjaGFuZ2UgZ3JhbnVsYXJpdHkuIHZlclBOLCBjYWxlbmRhclNldHM6Jyx0aGlzLmFjdGl2ZUdyYW51bGFyaXR5LCB0aGlzLnZlclBOLCB0aGlzLmNhbGVuZGFyU2V0cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbml0aWFsR3JhbnVsYXJpdHkgPSB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5O1xyXG4gICAgICAgICAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgPSAodGhpcy5hY3RpdmVHcmFudWxhcml0eSArIDEpICUgR1JBTlVMQVJJVFlfTElTVC5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICB9IHdoaWxlICgoXHJcbiAgICAgICAgICAgICAgICAgICAgKHRoaXMudmVyUE4gPT0gMiAmJiAhdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdW0dSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV1dPy5lbmFibGVkKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICh0aGlzLnZlclBOID09IDEgJiYgIXRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuc2V0dGluZ3M/LltHUkFOVUxBUklUWV9UT19QRVJJT0RJQ0lUWVtHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldXV0/LmVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgKSAmJiB0aGlzLmFjdGl2ZUdyYW51bGFyaXR5ICE9IGluaXRpYWxHcmFudWxhcml0eSlcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXF1ZXN0U2F2ZUxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyh0cnVlLCB0cnVlLCB0cnVlKTsgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIC8vIFx1MzBCM1x1MzBGM1x1MzBDNlx1MzBBRFx1MzBCOVx1MzBDOFx1MzBFMVx1MzBDQlx1MzBFNVx1MzBGQ1xyXG4gICAgICAgIG5hdkdyYW51bGFyaXR5LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wIDsgaTxHUkFOVUxBUklUWV9MSVNULmxlbmd0aDsgaSsrKXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnZlclBOID09MiAmJiB0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF1bR1JBTlVMQVJJVFlfTElTVFtpXV0/LmVuYWJsZWQpfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMudmVyUE4gPT0xICYmIHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuc2V0dGluZ3M/LltHUkFOVUxBUklUWV9UT19QRVJJT0RJQ0lUWVtHUkFOVUxBUklUWV9MSVNUW2ldXV0/LmVuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGljb24gPSAoIGkgPT0gdGhpcy5hY3RpdmVHcmFudWxhcml0eSk/IFwiY2hlY2tcIjpcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoR1JBTlVMQVJJVFlfTElTVFtpXSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCAoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVHcmFudWxhcml0eSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXF1ZXN0U2F2ZUxheW91dCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KHRydWUsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcbiAgICB9XHJcbiAgICAvLyBQZXJpb2RpYyBOb3RlcyBcdTMwQUJcdTMwRUNcdTMwRjNcdTMwQzBcdTMwRkNcdTMwQkJcdTMwQzNcdTMwQzhcdTYzQ0ZcdTc1M0IgJiBcdTMwQkJcdTMwQzNcdTMwQzhcdTUyMDdcdTMwOEFcdTY2RkZcdTMwNDhcdTUxRTZcdTc0MDZcclxuICAgIGlmICh0aGlzLnNldHRpbmdzLmNhbGVuZGFyU2V0c0VuYWJsZWQpe1xyXG4gICAgICAgIGNvbnN0IG5hdkNhbGVuZGFyU2V0OiBIVE1MRWxlbWVudCA9IG5hdkhlYWRlci5jcmVhdGVEaXYoXCJuYXYtZGF0ZS1yYW5nZVwiKTtcclxuICAgICAgICBuYXZDYWxlbmRhclNldC5jcmVhdGVEaXYoXCJuYXYtZGF0ZS1yYW5nZS1jb250ZW50XCIpLnNldFRleHQodGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdLmlkKTtcclxuICAgIFxyXG4gICAgICAgIG5hdkNhbGVuZGFyU2V0LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgKGV2ZXQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVNldCA9ICh0aGlzLmFjdGl2ZVNldCArIDEpICUgdGhpcy5jYWxlbmRhclNldHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJlcXVlc3RTYXZlTGF5b3V0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApXHJcblxyXG4gICAgICAgIC8vIFx1MzBCM1x1MzBGM1x1MzBDNlx1MzBBRFx1MzBCOVx1MzBDOFx1MzBFMVx1MzBDQlx1MzBFNVx1MzBGQ1xyXG4gICAgICAgIG5hdkNhbGVuZGFyU2V0LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaT0wIDsgaTx0aGlzLmNhbGVuZGFyU2V0cy5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWNvbiA9ICggaSA9PSB0aGlzLmFjdGl2ZVNldCk/IFwiY2hlY2tcIjpcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUodGhpcy5jYWxlbmRhclNldHNbaV0uaWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soICgpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU2V0ID0gaTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmVxdWVzdFNhdmVMYXlvdXQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFx1NjNDRlx1NzUzQlxyXG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKG5hdkhlYWRlcik7XHJcbn1cclxuXHJcblxyXG4vL1x1OTA0RVx1NTNCQlx1MzA2Qlx1NzlGQlx1NTJENVxyXG5mdW5jdGlvbiB1aVByZXZpb3VzUGFnZSAocGFyZW50RWw6IEhUTUxFbGVtZW50LCBncmFudWxhcml0eTogSUdyYW51bGFyaXR5KTp2b2lke1xyXG5cclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b246IEhUTUxFbGVtZW50ID0gcGFyZW50RWwuY3JlYXRlRGl2KFwiY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b25cIik7XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gXCJwcmV2aW91cyBub3Rlc1wiO1xyXG4gICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJhcnJvdy1sZWZ0XCIpO1xyXG5cclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3Quc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0sIGdyYW51bGFyaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3Quc3VidHJhY3QodGhpcy5zZXR0aW5ncy5kdXJhdGlvbltncmFudWxhcml0eV0sZ3JhbnVsYXJpdHkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59XHJcblxyXG4vL1x1NjcyQVx1Njc2NVx1MzA2Qlx1NzlGQlx1NTJENVxyXG5mdW5jdGlvbiB1aU5leHRQYWdlIChwYXJlbnRFbDogSFRNTEVsZW1lbnQsIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHkpOnZvaWR7XHJcbiAgICBsZXQgbmF2QWN0aW9uQnV0dG9uID0gcGFyZW50RWwuY3JlYXRlRGl2KFwiY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b25cIik7XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gXCJuZXh0IG5vdGVzXCI7XHJcbiAgICBzZXRJY29uKG5hdkFjdGlvbkJ1dHRvbixcImFycm93LXJpZ2h0XCIpO1xyXG5cclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuYWRkKHRoaXMuc2V0dGluZ3MuZHVyYXRpb25bZ3JhbnVsYXJpdHldLGdyYW51bGFyaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdCA9IHRoaXMuc2VhcmNoUmFuZ2UuZWFybGllc3QuYWRkKHRoaXMuc2V0dGluZ3MuZHVyYXRpb25bZ3JhbnVsYXJpdHldLGdyYW51bGFyaXR5KTtcclxuICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufVxyXG5cclxuLy8gXHUzMERCXHUzMEZDXHUzMEUwXHUzMDZCXHU2MjNCXHUzMDhCXHJcbmZ1bmN0aW9uIHVpUmV0dXJuSG9tZSAocGFyZW50RWw6IEhUTUxFbGVtZW50KTp2b2lkIHtcclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b24gPSBwYXJlbnRFbC5jcmVhdGVEaXYoXCJjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvblwiKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hcmlhTGFiZWwgPSBcImhvbWVcIjtcclxuICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwiaG9tZVwiKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjb250ZXh0bWVudVwiLFxyXG4gICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHJcbiAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcInJlZnJlc2ggdmlld1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwicmVmcmVzaC1jd1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyh0cnVlLCB0cnVlLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn1cclxuXHJcbi8vXHU2NkY0XHU2NUIwXHJcbmZ1bmN0aW9uIHVpVXBkYXRlIChwYXJlbnRFbDogSFRNTEVsZW1lbnQpOnZvaWQge1xyXG4gICAgbGV0IG5hdkFjdGlvbkJ1dHRvbiA9IHBhcmVudEVsLmNyZWF0ZURpdihcImNsaWNrYWJsZS1pY29uIG5hdi1hY3Rpb24tYnV0dG9uXCIpO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFyaWFMYWJlbCA9IFwicmVmcmVzaFwiO1xyXG4gICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJyZWZyZXNoLWN3XCIpO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgIGFzeW5jIChldmVudDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgLy8gdGhpcy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcodHJ1ZSwgdHJ1ZSwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxufVxyXG5cclxuLy9cdThBMkRcdTVCOUFcclxuZnVuY3Rpb24gdWlTZXR0aW5nKHBhcmVudEVsOiBIVE1MRWxlbWVudCwgZ3JhbnVsYXJpdHk6IElHcmFudWxhcml0eSk6dm9pZHtcclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b24gPSBwYXJlbnRFbC5jcmVhdGVEaXYoXCJjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvblwiKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hcmlhTGFiZWwgPSBcIm9wZW4gc2V0dGluZ3NcIjtcclxuICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwic2V0dGluZ3NcIik7XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgYXN5bmMgKGV2ZW50Ok1vdXNlRXZlbnQpID0+e1xyXG4gICAgICAgICAgICB0aGlzLmFwcC5zZXR0aW5nLm9wZW4oKTtcclxuICAgICAgICAgICAgdGhpcy5hcHAuc2V0dGluZy5vcGVuVGFiQnlJZCh0aGlzLnBsdWdpbi5tYW5pZmVzdC5pZCk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY29udGV4dG1lbnVcIixcclxuICAgICAgICAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWxlbWVudCBpbiB0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50cyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBpY29uID0gKCB0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50c1tlbGVtZW50XSA9PSB0cnVlKT8gXCJjaGVja1wiOlwiXCI7XHJcbiAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShgc2hvdyAke2VsZW1lbnR9YClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oaWNvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHNbZWxlbWVudF0gPSAhdGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHNbZWxlbWVudF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5zaG93RWxlbWVudHMubGlzdEl0ZW1zKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGljb24gPSAodGhpcy5zZXR0aW5ncy50YXNrT25seSk/IFwiY2hlY2tcIjogXCJcIjtcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwidGFza3Mgb25seVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRhc2tPbmx5ID0gIXRoaXMuc2V0dGluZ3MudGFza09ubHk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xyXG4gICAgICAgICAgICBpZiAoZ3JhbnVsYXJpdHkgPT0nZGF5Jyl7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCBpbiBGSUxFSU5GT19UT19ESVNQTEFZX0RBWSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaWNvbiA9ICggaW5kZXggPT0gdGhpcy5zZXR0aW5ncy5kaXNwbGF5RmlsZUluZm9EYWlseSk/IFwiY2hlY2tcIjpcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VGl0bGUoRklMRUlORk9fVE9fRElTUExBWV9EQVlbaW5kZXhdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oaWNvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCBhc3luYygpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuZGlzcGxheUZpbGVJbmZvRGFpbHkgPSBpbmRleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpbmRleCBpbiBGSUxFSU5GT19UT19ESVNQTEFZKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpY29uID0gKCBpbmRleCA9PSB0aGlzLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb1BlcmlvZGljKT8gXCJjaGVja1wiOlwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShGSUxFSU5GT19UT19ESVNQTEFZW2luZGV4XSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKGljb24pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayggYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb1BlcmlvZGljID0gaW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBpY29uID0gKHRoaXMuc2V0dGluZ3MudG9vbHRpcFByZXZpZXcpPyBcImNoZWNrXCI6XCJcIjtcclxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwic2hvdyB0b29sdGlwIHByZXZpZXdcIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihpY29uKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy50b29sdGlwUHJldmlldyA9ICF0aGlzLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbWVudS5zaG93QXRNb3VzZUV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICApO1xyXG59XHJcblxyXG4vLyBcdTMwQzdcdTMwQTRcdTMwRUFcdTMwRkNcdTMwQ0VcdTMwRkNcdTMwQzhcdTRGNUNcdTYyMTBcclxuZnVuY3Rpb24gdWlDcmVhdGVEYWlseU5vdGUocGFyZW50RWw6SFRNTEVsZW1lbnQsIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHkpOnZvaWR7XHJcbiAgICBsZXQgbmF2QWN0aW9uQnV0dG9uID0gcGFyZW50RWwuY3JlYXRlRGl2KFwiY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b25cIik7XHJcblxyXG4gICAgLy8gcGVyaW9kaWMgbm90ZVx1MzA2RVx1MzBBQVx1MzBGM1x1MzBBQVx1MzBENVx1MzA4NFx1N0M5Mlx1NUVBNlx1MzA2Qlx1NUY5M1x1MzA2M1x1MzA2Nlx1MzBFOVx1MzBEOVx1MzBFQlx1MzA5Mlx1NEY1Q1x1NjIxMFxyXG4gICAgbGV0IGxhYmVsRm9yVG9kYXk6IHN0cmluZyA9ICdjcmVhdGUvb3BlbiAnO1xyXG4gICAgbGV0IGxhYmVsRm9yTmV4dDogc3RyaW5nID0gJ2NyZWF0ZS9vcGVuICc7XHJcbiAgICBpZiAoZ3JhbnVsYXJpdHkgPT0gJ2RheScpe1xyXG4gICAgICAgIGxhYmVsRm9yVG9kYXkgPSBsYWJlbEZvclRvZGF5ICsgXCJ0b2RheSdzIFwiO1xyXG4gICAgICAgIGxhYmVsRm9yTmV4dCA9IGxhYmVsRm9yTmV4dCArIFwidG9tb3Jyb3cncyBcIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgbGFiZWxGb3JUb2RheSA9IGxhYmVsRm9yVG9kYXkgKyBcInByZXNlbnQgXCI7XHJcbiAgICAgICAgbGFiZWxGb3JOZXh0ID0gbGFiZWxGb3JOZXh0ICsgXCJuZXh0IFwiO1xyXG4gICAgfVxyXG4gICAgbGFiZWxGb3JUb2RheSA9IGxhYmVsRm9yVG9kYXkgKyBHUkFOVUxBUklUWV9UT19QRVJJT0RJQ0lUWVtncmFudWxhcml0eV0gKyAnIG5vdGUnO1xyXG4gICAgbGFiZWxGb3JOZXh0ID0gbGFiZWxGb3JOZXh0ICsgR1JBTlVMQVJJVFlfVE9fUEVSSU9ESUNJVFlbZ3JhbnVsYXJpdHldICsgJyBub3RlJztcclxuXHJcbiAgICBpZiAodGhpcy52ZXJQTiA9PSAyKXtcclxuICAgICAgICBsYWJlbEZvclRvZGF5ID0gbGFiZWxGb3JUb2RheSArICcgZm9yICcgKyB0aGlzLmNhbGVuZGFyU2V0c1t0aGlzLmFjdGl2ZVNldF0uaWQ7XHJcbiAgICAgICAgbGFiZWxGb3JOZXh0ID0gbGFiZWxGb3JOZXh0ICsgJyBmb3IgJyArIHRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XS5pZDtcclxuICAgIH1cclxuXHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gbGFiZWxGb3JUb2RheTtcclxuICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwiY2FsZW5kYXItcGx1c1wiLDIwKTtcclxuICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0O1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlID0gd2luZG93Lm1vbWVudCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMudmVyUE4gPT0gMil7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVBbmRPcGVuUGVyaW9kaWNOb3RlKCBncmFudWxhcml0eSwgZGF0ZSwgdGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNyZWF0ZUFuZE9wZW5EYWlseU5vdGUoZ3JhbnVsYXJpdHksIGRhdGUsIHRoaXMuYWxsRGFpbHlOb3Rlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICApO1xyXG4gICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjb250ZXh0bWVudVwiLFxyXG4gICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG4gICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIC5zZXRUaXRsZShcImNyZWF0ZS9vcGVuIHRvbW9ycm93J3MgZGFpbHkgbm90ZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShsYWJlbEZvck5leHQpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJjYWxlbmRhci1wbHVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGUgPSB3aW5kb3cubW9tZW50KCkuYWRkKDEsZ3JhbnVsYXJpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52ZXJQTiA9PSAyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZUFuZE9wZW5QZXJpb2RpY05vdGUoZ3JhbnVsYXJpdHksIGRhdGUsIHRoaXMuY2FsZW5kYXJTZXRzW3RoaXMuYWN0aXZlU2V0XSk7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3JlYXRlQW5kT3BlbkRhaWx5Tm90ZShncmFudWxhcml0eSwgZGF0ZSwgdGhpcy5hbGxEYWlseU5vdGVzKTsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBtZW51LnNob3dBdE1vdXNlRXZlbnQoZXZlbnQpO1xyXG4gICAgICAgIH1cclxuICAgICk7XHJcbn1cclxuXHJcbi8vXHU2MkJEXHU1MUZBXHJcbmZ1bmN0aW9uIHVpRXh0cmFjdChwYXJlbnRFbDogSFRNTEVsZW1lbnQpOnZvaWR7XHJcbiAgICBsZXQgbmF2QWN0aW9uQnV0dG9uID0gcGFyZW50RWwuY3JlYXRlRGl2KFwiY2xpY2thYmxlLWljb24gbmF2LWFjdGlvbi1idXR0b25cIik7XHJcbiAgICBpZiAoIXRoaXMuZXh0cmFjdE1vZGUpe1xyXG4gICAgICAgIC8vXHU2MkJEXHU1MUZBXHUzMDkyXHUzMEFBXHUzMEYzXHUzMDZCXHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmFyaWFMYWJlbCA9IFwiZXh0cmFjdFwiO1xyXG4gICAgICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwic2VhcmNoXCIsMjApO1xyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIC8vXHU1MTY1XHU1MjlCXHUzMEUyXHUzMEZDXHUzMEMwXHUzMEVCXHUzMDkyXHU5NThCXHUzMDRGXHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0O1xyXG4gICAgICAgICAgICBjb25zdCBvblN1Ym1pdCA9IChlbmFibGVFeHRyYWN0OiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZW5hYmxlRXh0cmFjdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0TW9kZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBNb2RhbEV4dHJhY3QodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBvblN1Ym1pdCkub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvL1x1NjJCRFx1NTFGQVx1MzA5Mlx1MzBBQVx1MzBENVx1MzA2QlxyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hcmlhTGFiZWwgPSBcInVuZXh0cmFjdFwiO1xyXG4gICAgICAgIHNldEljb24obmF2QWN0aW9uQnV0dG9uLFwieC1jaXJjbGVcIiwyMCk7XHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuZXh0cmFjdE1vZGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5leHRyYWN0VGFzayA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBuYXZBY3Rpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICBcImNvbnRleHRtZW51XCIsXHJcbiAgICAgICAgKGV2ZW50OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1lbnUgPSBuZXcgTWVudSgpO1xyXG4gICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+XHJcbiAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiZXh0cmFjdCB0YXNrc1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiY2hlY2stc3F1YXJlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdE1vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RUYXNrID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSxmYWxzZSk7IFxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgKTtcclxuXHJcbn1cclxuXHJcbi8vXHU1MTY4XHU0RjUzXHUzMEQ1XHUzMEE5XHUzMEZDXHUzMEVCXHUzMEM5XHJcblxyXG5mdW5jdGlvbiB1aUNvbGxhcHNlIChwYXJlbnRFbDpIVE1MRWxlbWVudCk6dm9pZHtcclxuICAgIGxldCBuYXZBY3Rpb25CdXR0b24gPSBwYXJlbnRFbC5jcmVhdGVEaXYoXCJjbGlja2FibGUtaWNvbiBuYXYtYWN0aW9uLWJ1dHRvblwiKTtcclxuICAgIGlmICh0aGlzLmNvbGxhcHNlQWxsKXtcclxuICAgICAgICBuYXZBY3Rpb25CdXR0b24uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuY29sbGFwc2VBbGwpe1xyXG4gICAgICAgIC8vXHU1MTY4XHU0RjUzXHUzMEQ1XHUzMEE5XHUzMEZDXHUzMEVCXHUzMEM5XHUzMDkyXHUzMEFBXHUzMEYzXHUzMDZCXHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmFyaWFMYWJlbCA9IFwiY29sbGFwc2UgYWxsXCI7XHJcbiAgICAgICAgc2V0SWNvbihuYXZBY3Rpb25CdXR0b24sXCJjaGV2cm9ucy1kb3duLXVwXCIpO1xyXG4gICAgICAgIG5hdkFjdGlvbkJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICBhc3luYyAoZXZlbnQ6TW91c2VFdmVudCkgPT57XHJcbiAgICAgICAgICAgIHRoaXMuY29sbGFwc2VBbGwgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy9cdTUxNjhcdTRGNTNcdTMwRDVcdTMwQTlcdTMwRkNcdTMwRUJcdTMwQzlcdTMwOTJcdTMwQUFcdTMwRDVcdTMwNkJcclxuICAgICAgICBuYXZBY3Rpb25CdXR0b24uYXJpYUxhYmVsID0gXCJleHBhbmRcIjtcclxuICAgICAgICBzZXRJY29uKG5hdkFjdGlvbkJ1dHRvbixcImNoZXZyb25zLWRvd24tdXBcIik7XHJcbiAgICAgICAgbmF2QWN0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgIGFzeW5jIChldmVudDpNb3VzZUV2ZW50KSA9PntcclxuICAgICAgICAgICAgdGhpcy5jb2xsYXBzZUFsbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLGZhbHNlKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IG1vbWVudCAgZnJvbSBcIm1vbWVudFwiO1xyXG5pbXBvcnQgeyBURmlsZSwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgY3JlYXRlRGFpbHlOb3RlLCBnZXREYWlseU5vdGUsIGNyZWF0ZVBlcmlvZGljTm90ZSwgSUdyYW51bGFyaXR5LCBnZXREYXRlVUlELCBjcmVhdGVRdWFydGVybHlOb3RlLCBjcmVhdGVZZWFybHlOb3RlfSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XHJcblxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUFuZE9wZW5EYWlseU5vdGUoIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHksIGRhdGU6IG1vbWVudCwgYWxsRmlsZXM6IFJlY29yZDxzdHJpbmcsVEZpbGU+KTogUHJvbWlzZTx2b2lkPiB7XHJcblx0Y29uc3QgeyB3b3Jrc3BhY2UgfSA9IHdpbmRvdy5hcHA7XHJcblxyXG5cdGNvbnN0IGNyZWF0ZUZpbGUgPSBhc3luYyAoKSA9PiB7XHJcblx0XHQvLyBjcmVhdGVQZXJpb2RpY05vdGVcdTMwNkZxdWFydGVyL3llYXJcdTMwNkJcdTMwNkZcdTVCRkVcdTVGRENcdTMwNTdcdTMwNjZcdTMwNDRcdTMwNkFcdTMwNDRcdTMwODhcdTMwNDZcdTMwNkFcdTMwNkVcdTMwNjdcdTUyMDZcdTVDOTBcdTMwMDJcclxuXHRcdGxldCBuZXdOb3RlOlRGaWxlO1xyXG5cdFx0c3dpdGNoIChncmFudWxhcml0eSl7XHJcblx0XHRcdGNhc2UgJ3F1YXJ0ZXInOlxyXG5cdFx0XHRcdG5ld05vdGUgPSBhd2FpdCBjcmVhdGVRdWFydGVybHlOb3RlKGRhdGUpO1xyXG5cdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRjYXNlICd5ZWFyJzpcclxuXHRcdFx0XHRuZXdOb3RlID0gYXdhaXQgY3JlYXRlWWVhcmx5Tm90ZShkYXRlKTtcclxuXHRcdFx0XHRicmVhaztcclxuXHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRuZXdOb3RlID0gYXdhaXQgY3JlYXRlUGVyaW9kaWNOb3RlKGdyYW51bGFyaXR5LCBkYXRlKTtcclxuXHRcdH1cclxuXHRcdFx0XHRhd2FpdCB3b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKG5ld05vdGUpO1xyXG5cclxuXHR9O1xyXG5cdGNvbnN0IGRhaWx5bm90ZSA9IGFsbEZpbGVzW2dldERhdGVVSUQoZGF0ZSwgZ3JhbnVsYXJpdHkpXTtcclxuXHQvL2NvbnN0IGRhaWx5bm90ZSA9IGdldERhaWx5Tm90ZShkYXRlLCBhbGxGaWxlcyk7XHJcblx0aWYgKCFkYWlseW5vdGUpe1xyXG5cdFx0YXdhaXQgY3JlYXRlRmlsZSgpO1xyXG5cdH0gZWxzZSB7XHJcblx0XHRhd2FpdCB3b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGRhaWx5bm90ZSk7XHJcblx0fVxyXG5cclxufVxyXG4iLCAiXHJcbmltcG9ydCB7IEFwcCwgTW9kYWwsIFNjb3BlLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgRGFpbHlOb3RlT3V0bGluZVBsdWdpbiBmcm9tICdzcmMvbWFpbic7XHJcbmV4cG9ydCBjbGFzcyBNb2RhbEV4dHJhY3QgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cGx1Z2luOiBEYWlseU5vdGVPdXRsaW5lUGx1Z2luO1xyXG5cdHNjb3BlOiBTY29wZTtcclxuXHJcblx0aW5wdXRlZFZhbHVlOiBzdHJpbmc7XHJcblx0ZW5hYmxlRXh0cmFjdCA6IGJvb2xlYW47XHJcblx0b25TdWJtaXQ6IChlbmFibGVFeHRyYWN0OiBib29sZWFuKSA9PiB2b2lkO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBEYWlseU5vdGVPdXRsaW5lUGx1Z2luLCBvblN1Ym1pdDogKGVuYWJsZUV4dHJhY3Q6IGJvb2xlYW4pID0+IHZvaWQpIHtcclxuXHRcdHN1cGVyKGFwcCk7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpIHtcclxuXHRcdHRoaXMuaW5wdXRlZFZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4dHJhY3Q7XHJcblxyXG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJiclwiKTtcclxuXHJcblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcblx0XHRcdC5zZXROYW1lKFwiRXh0cmFjdCBieSB3b3JkIG9yIHBocmFzZTpcIilcclxuXHRcdFx0LmFkZFRleHQoKHRleHQpID0+e1xyXG5cdFx0XHRcdHRleHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4dHJhY3QpLmlucHV0RWwuc2VsZWN0KCk7XHJcblx0XHRcdFx0dGV4dC5vbkNoYW5nZSgodmFsdWUpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuaW5wdXRlZFZhbHVlID0gdmFsdWVcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkV4dHJhY3RcIilcclxuXHRcdFx0XHRcdC5zZXRDdGEoKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soXHJcblx0XHRcdFx0XHRcdGFzeW5jICgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5leGVjdXRlRXh0cmFjdCgpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHQpKVxyXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XHJcblx0XHRcdFx0YnRuXHJcblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxyXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHQvLyBFbnRlclx1MzA2N1x1MzA2RVx1NTE2NVx1NTI5Qlx1MzA2Qlx1NUY4Q1x1MzA2N1x1NUJGRVx1NUZEQ1x1MzA1N1x1MzA1Rlx1MzA0NCBcclxuXHRcdHRoaXMuc2NvcGUucmVnaXN0ZXIoW10sICdFbnRlcicsIFxyXG5cdFx0XHQoZXZ0OiBLZXlib2FyZEV2ZW50KT0+e1xyXG5cdFx0XHRcdHRoaXMuZXhlY3V0ZUV4dHJhY3QoKTtcclxuXHRcdFx0fVxyXG5cdFx0IFx0KTtcclxuXHR9XHJcblxyXG5cdG9uQ2xvc2UoKSB7XHJcblx0XHRsZXQgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcclxuXHR9XHJcblxyXG5cdGFzeW5jIGV4ZWN1dGVFeHRyYWN0KCk6UHJvbWlzZTx2b2lkPntcclxuXHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeHRyYWN0ID0gdGhpcy5pbnB1dGVkVmFsdWU7XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdHRoaXMub25TdWJtaXQodHJ1ZSk7XHJcblx0fVxyXG59XHJcbiIsICIvKlxyXG5Db2RlcyBpbiB0aGlzIGZpbGUgaXMgYWRhcHRlZCBmcm9tIFBlcmlvZGljIE5vdGVzIGJ5IExpYW0gQ2FpbiBodHRwczovL2dpdGh1Yi5jb20vbGlhbWNhaW4vb2JzaWRpYW4tcGVyaW9kaWMtbm90ZXNcclxuXHJcblRoZSBvcmlnaW5hbCB3b3JrIGlzIE1JVC1saWNlbnNlZC5cclxuXHJcbk1JVCBMaWNlbnNlXHJcblxyXG5Db3B5cmlnaHQgKGMpIDIwMjEgTGlhbSBDYWluXHJcblxyXG5QZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbiBvYnRhaW5pbmcgYSBjb3B5XHJcbm9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcclxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xyXG50byB1c2UsIGNvcHksIG1vZGlmeSwgbWVyZ2UsIHB1Ymxpc2gsIGRpc3RyaWJ1dGUsIHN1YmxpY2Vuc2UsIGFuZC9vciBzZWxsXHJcbmNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpc1xyXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxyXG5cclxuVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW4gYWxsXHJcbmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELCBFWFBSRVNTIE9SXHJcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxyXG5GSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcclxuQVVUSE9SUyBPUiBDT1BZUklHSFQgSE9MREVSUyBCRSBMSUFCTEUgRk9SIEFOWSBDTEFJTSwgREFNQUdFUyBPUiBPVEhFUlxyXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxyXG5PVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOIFRIRVxyXG5TT0ZUV0FSRS5cclxuKi9cclxuXHJcblxyXG5pbXBvcnQgbW9tZW50IGZyb20gXCJtb21lbnRcIjtcclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgV29ya3NwYWNlTGVhZiwgbm9ybWFsaXplUGF0aCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBJR3JhbnVsYXJpdHkgfSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XHJcblxyXG5pbXBvcnQgeyBDYWxlbmRhclNldCB9IGZyb20gXCIuL3BlcmlvZGljTm90ZXNUeXBlc1wiO1xyXG5cclxuaW1wb3J0IHsgR3JhbnVsYXJpdHksIFBlcmlvZGljQ29uZmlnIH0gZnJvbSBcIi4vcGVyaW9kaWNOb3Rlc1R5cGVzXCI7XHJcblxyXG5jb25zdCBERUZBVUxUX05PVEVfRk9STUFUID0ge1xyXG5cdGRheTogXCJZWVlZLU1NLUREXCIsXHJcblx0d2VlazogXCJnZ2dnLVtXXXd3XCIsXHJcblx0bW9udGg6IFwiWVlZWS1NTVwiLFxyXG5cdHF1YXJ0ZXI6IFwiWVlZWS1bUV1RXCIsXHJcblx0eWVhcjogXCJZWVlZXCJcclxufVxyXG5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVBbmRPcGVuUGVyaW9kaWNOb3RlKCBncmFudWxhcml0eTogSUdyYW51bGFyaXR5LCBkYXRlOiBtb21lbnQsIGNhbGVuZGFyU2V0OiBDYWxlbmRhclNldCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdGNvbnN0IHsgd29ya3NwYWNlIH0gPSB3aW5kb3cuYXBwO1xyXG5cclxuXHJcblx0bGV0IGZpbGUgPSB3aW5kb3cuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuY2FjaGUuZ2V0UGVyaW9kaWNOb3RlKFxyXG5cdFx0Y2FsZW5kYXJTZXQuaWQsIGdyYW51bGFyaXR5LCBkYXRlIFxyXG5cdCk7XHJcblx0aWYgKCFmaWxlKSB7XHJcblx0XHQvLyAgZmlsZVx1MzA5Mlx1NEY1Q1x1NjIxMFxyXG4gICAgXHRjb25zdCBjb25maWcgPSBjYWxlbmRhclNldFtncmFudWxhcml0eV07XHJcbiAgICBcdGNvbnN0IGZvcm1hdCA9IGNhbGVuZGFyU2V0W2dyYW51bGFyaXR5XS5mb3JtYXQ7XHJcblxyXG5cdFx0Y29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQgPyBmb3JtYXQgOiBERUZBVUxUX05PVEVfRk9STUFUW2dyYW51bGFyaXR5XSk7XHJcblx0XHRjb25zdCB0ZW1wbGF0ZUNvbnRlbnRzID0gYXdhaXQgZ2V0VGVtcGxhdGVDb250ZW50cyh3aW5kb3cuYXBwLCBjb25maWcudGVtcGxhdGVQYXRoKTtcclxuXHRcdGNvbnN0IHJlbmRlcmVkQ29udGVudHMgPSBhcHBseVRlbXBsYXRlVHJhbnNmb3JtYXRpb25zKFxyXG5cdFx0XHRmaWxlbmFtZSxcclxuXHRcdFx0Z3JhbnVsYXJpdHkgYXMgR3JhbnVsYXJpdHksXHJcblx0XHRcdGRhdGUsXHJcblx0XHRcdGZvcm1hdCxcclxuXHRcdFx0dGVtcGxhdGVDb250ZW50c1xyXG4gICAgXHQpO1xyXG4gICAgY29uc3QgZGVzdFBhdGggPSBhd2FpdCBnZXROb3RlQ3JlYXRpb25QYXRoKHdpbmRvdy5hcHAsIGZpbGVuYW1lLCBjb25maWcpO1xyXG4gICAgZmlsZSA9IGF3YWl0IHdpbmRvdy5hcHAudmF1bHQuY3JlYXRlKGRlc3RQYXRoLCByZW5kZXJlZENvbnRlbnRzKTtcclxuXHR9XHJcblxyXG5cdGF3YWl0IHdvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZSk7XHJcbn1cclxuXHJcblxyXG4vLyBQZXJpb2RpYyBOb3RlcyB1dGlsLnRzXHUzMDRCXHUzMDg5XHJcbmFzeW5jIGZ1bmN0aW9uIGdldFRlbXBsYXRlQ29udGVudHMoXHJcblx0YXBwOiBBcHAsXHJcblx0dGVtcGxhdGVQYXRoOiBzdHJpbmcgfCB1bmRlZmluZWRcclxuICApOiBQcm9taXNlPHN0cmluZz4ge1xyXG5cdGNvbnN0IHsgbWV0YWRhdGFDYWNoZSwgdmF1bHQgfSA9IGFwcDtcclxuXHRjb25zdCBub3JtYWxpemVkVGVtcGxhdGVQYXRoID0gbm9ybWFsaXplUGF0aCh0ZW1wbGF0ZVBhdGggPz8gXCJcIik7XHJcblx0aWYgKHRlbXBsYXRlUGF0aCA9PT0gXCIvXCIpIHtcclxuXHQgIHJldHVybiBQcm9taXNlLnJlc29sdmUoXCJcIik7XHJcblx0fVxyXG4gIFxyXG5cdHRyeSB7XHJcblx0ICBjb25zdCB0ZW1wbGF0ZUZpbGUgPSBtZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KG5vcm1hbGl6ZWRUZW1wbGF0ZVBhdGgsIFwiXCIpO1xyXG5cdCAgcmV0dXJuIHRlbXBsYXRlRmlsZSA/IHZhdWx0LmNhY2hlZFJlYWQodGVtcGxhdGVGaWxlKSA6IFwiXCI7XHJcblx0fSBjYXRjaCAoZXJyKSB7XHJcblx0ICBjb25zb2xlLmVycm9yKFxyXG5cdFx0YEZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlICcke25vcm1hbGl6ZWRUZW1wbGF0ZVBhdGh9J2AsXHJcblx0XHRlcnJcclxuXHQgICk7XHJcblx0ICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIHJlYWQgdGhlIGRhaWx5IG5vdGUgdGVtcGxhdGVcIik7XHJcblx0ICByZXR1cm4gXCJcIjtcclxuXHR9XHJcbiAgfVxyXG5cclxuZnVuY3Rpb24gYXBwbHlUZW1wbGF0ZVRyYW5zZm9ybWF0aW9ucyhcclxuZmlsZW5hbWU6IHN0cmluZyxcclxuZ3JhbnVsYXJpdHk6IEdyYW51bGFyaXR5LFxyXG5kYXRlOiBtb21lbnQsXHJcbmZvcm1hdDogc3RyaW5nLFxyXG5yYXdUZW1wbGF0ZUNvbnRlbnRzOiBzdHJpbmdcclxuKTogc3RyaW5nIHtcclxubGV0IHRlbXBsYXRlQ29udGVudHMgPSByYXdUZW1wbGF0ZUNvbnRlbnRzO1xyXG5cclxudGVtcGxhdGVDb250ZW50cyA9IHJhd1RlbXBsYXRlQ29udGVudHNcclxuXHQucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXHJcblx0LnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcclxuXHQucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKTtcclxuXHJcbmlmIChncmFudWxhcml0eSA9PT0gXCJkYXlcIikge1xyXG5cdHRlbXBsYXRlQ29udGVudHMgPSB0ZW1wbGF0ZUNvbnRlbnRzXHJcblx0LnJlcGxhY2UoL3t7XFxzKnllc3RlcmRheVxccyp9fS9naSwgZGF0ZS5jbG9uZSgpLnN1YnRyYWN0KDEsIFwiZGF5XCIpLmZvcm1hdChmb3JtYXQpKVxyXG5cdC5yZXBsYWNlKC97e1xccyp0b21vcnJvd1xccyp9fS9naSwgZGF0ZS5jbG9uZSgpLmFkZCgxLCBcImRcIikuZm9ybWF0KGZvcm1hdCkpXHJcblx0LnJlcGxhY2UoXHJcblx0XHQve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSxcclxuXHRcdChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcclxuXHRcdGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcclxuXHRcdGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XHJcblx0XHRcdGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxyXG5cdFx0XHRtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXHJcblx0XHRcdHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcclxuXHRcdH0pO1xyXG5cdFx0aWYgKGNhbGMpIHtcclxuXHRcdFx0Y3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAobW9tZW50Rm9ybWF0KSB7XHJcblx0XHRcdHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xyXG5cdFx0fVxyXG5cdCk7XHJcbn1cclxuXHJcbmlmIChncmFudWxhcml0eSA9PT0gXCJ3ZWVrXCIpIHtcclxuXHR0ZW1wbGF0ZUNvbnRlbnRzID0gdGVtcGxhdGVDb250ZW50cy5yZXBsYWNlKFxyXG5cdC97e1xccyooc3VuZGF5fG1vbmRheXx0dWVzZGF5fHdlZG5lc2RheXx0aHVyc2RheXxmcmlkYXl8c2F0dXJkYXkpXFxzKjooLio/KX19L2dpLFxyXG5cdChfLCBkYXlPZldlZWssIG1vbWVudEZvcm1hdCkgPT4ge1xyXG5cdFx0Y29uc3QgZGF5ID0gZ2V0RGF5T2ZXZWVrTnVtZXJpY2FsVmFsdWUoZGF5T2ZXZWVrKTtcclxuXHRcdHJldHVybiBkYXRlLndlZWtkYXkoZGF5KS5mb3JtYXQobW9tZW50Rm9ybWF0LnRyaW0oKSk7XHJcblx0fVxyXG5cdCk7XHJcbn1cclxuXHJcbmlmIChncmFudWxhcml0eSA9PT0gXCJtb250aFwiKSB7XHJcblx0dGVtcGxhdGVDb250ZW50cyA9IHRlbXBsYXRlQ29udGVudHMucmVwbGFjZShcclxuXHQve3tcXHMqKG1vbnRoKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLFxyXG5cdChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcclxuXHRcdGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcclxuXHRcdGNvbnN0IG1vbnRoU3RhcnQgPSBkYXRlXHJcblx0XHQuY2xvbmUoKVxyXG5cdFx0LnN0YXJ0T2YoXCJtb250aFwiKVxyXG5cdFx0LnNldCh7XHJcblx0XHRcdGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxyXG5cdFx0XHRtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXHJcblx0XHRcdHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcclxuXHRcdH0pO1xyXG5cdFx0aWYgKGNhbGMpIHtcclxuXHRcdG1vbnRoU3RhcnQuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAobW9tZW50Rm9ybWF0KSB7XHJcblx0XHRyZXR1cm4gbW9udGhTdGFydC5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG1vbnRoU3RhcnQuZm9ybWF0KGZvcm1hdCk7XHJcblx0fVxyXG5cdCk7XHJcbn1cclxuXHJcbmlmIChncmFudWxhcml0eSA9PT0gXCJxdWFydGVyXCIpIHtcclxuXHR0ZW1wbGF0ZUNvbnRlbnRzID0gdGVtcGxhdGVDb250ZW50cy5yZXBsYWNlKFxyXG5cdC97e1xccyoocXVhcnRlcilcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSxcclxuXHQoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XHJcblx0XHRjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XHJcblx0XHRjb25zdCBtb250aFN0YXJ0ID0gZGF0ZVxyXG5cdFx0LmNsb25lKClcclxuXHRcdC5zdGFydE9mKFwicXVhcnRlclwiKVxyXG5cdFx0LnNldCh7XHJcblx0XHRcdGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxyXG5cdFx0XHRtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXHJcblx0XHRcdHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcclxuXHRcdH0pO1xyXG5cdFx0aWYgKGNhbGMpIHtcclxuXHRcdG1vbnRoU3RhcnQuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAobW9tZW50Rm9ybWF0KSB7XHJcblx0XHRyZXR1cm4gbW9udGhTdGFydC5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG1vbnRoU3RhcnQuZm9ybWF0KGZvcm1hdCk7XHJcblx0fVxyXG5cdCk7XHJcbn1cclxuXHJcbmlmIChncmFudWxhcml0eSA9PT0gXCJ5ZWFyXCIpIHtcclxuXHR0ZW1wbGF0ZUNvbnRlbnRzID0gdGVtcGxhdGVDb250ZW50cy5yZXBsYWNlKFxyXG5cdC97e1xccyooeWVhcilcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSxcclxuXHQoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XHJcblx0XHRjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XHJcblx0XHRjb25zdCBtb250aFN0YXJ0ID0gZGF0ZVxyXG5cdFx0LmNsb25lKClcclxuXHRcdC5zdGFydE9mKFwieWVhclwiKVxyXG5cdFx0LnNldCh7XHJcblx0XHRcdGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxyXG5cdFx0XHRtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXHJcblx0XHRcdHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcclxuXHRcdH0pO1xyXG5cdFx0aWYgKGNhbGMpIHtcclxuXHRcdG1vbnRoU3RhcnQuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAobW9tZW50Rm9ybWF0KSB7XHJcblx0XHRyZXR1cm4gbW9udGhTdGFydC5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG1vbnRoU3RhcnQuZm9ybWF0KGZvcm1hdCk7XHJcblx0fVxyXG5cdCk7XHJcbn1cclxuXHJcbnJldHVybiB0ZW1wbGF0ZUNvbnRlbnRzO1xyXG59XHJcblxyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ2V0Tm90ZUNyZWF0aW9uUGF0aChcclxuXHRhcHA6IEFwcCxcclxuXHRmaWxlbmFtZTogc3RyaW5nLFxyXG5cdHBlcmlvZGljQ29uZmlnOiBQZXJpb2RpY0NvbmZpZ1xyXG4gICk6IFByb21pc2U8c3RyaW5nPiB7XHJcblx0Y29uc3QgZGlyZWN0b3J5ID0gcGVyaW9kaWNDb25maWcuZm9sZGVyID8/IFwiXCI7XHJcblx0Y29uc3QgZmlsZW5hbWVXaXRoRXh0ID0gIWZpbGVuYW1lLmVuZHNXaXRoKFwiLm1kXCIpID8gYCR7ZmlsZW5hbWV9Lm1kYCA6IGZpbGVuYW1lO1xyXG4gIFxyXG5cdGNvbnN0IHBhdGggPSBub3JtYWxpemVQYXRoKGpvaW4oZGlyZWN0b3J5LCBmaWxlbmFtZVdpdGhFeHQpKTtcclxuXHRhd2FpdCBlbnN1cmVGb2xkZXJFeGlzdHMoYXBwLCBwYXRoKTtcclxuXHRyZXR1cm4gcGF0aDtcclxuICB9XHJcblxyXG4vLyBDcmVkaXQ6IEBjcmVhdGlvbml4L3BhdGguanNcclxuZnVuY3Rpb24gam9pbiguLi5wYXJ0U2VnbWVudHM6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuXHQvLyBTcGxpdCB0aGUgaW5wdXRzIGludG8gYSBsaXN0IG9mIHBhdGggY29tbWFuZHMuXHJcblx0bGV0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xyXG5cdGZvciAobGV0IGkgPSAwLCBsID0gcGFydFNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xyXG5cdFx0cGFydHMgPSBwYXJ0cy5jb25jYXQocGFydFNlZ21lbnRzW2ldLnNwbGl0KFwiL1wiKSk7XHJcblx0fVxyXG5cdC8vIEludGVycHJldCB0aGUgcGF0aCBjb21tYW5kcyB0byBnZXQgdGhlIG5ldyByZXNvbHZlZCBwYXRoLlxyXG5cdGNvbnN0IG5ld1BhcnRzID0gW107XHJcblx0Zm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcclxuXHRcdGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcclxuXHRcdC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaGVzXHJcblx0XHQvLyBBbHNvIHJlbW92ZSBcIi5cIiBzZWdtZW50c1xyXG5cdFx0aWYgKCFwYXJ0IHx8IHBhcnQgPT09IFwiLlwiKSBjb250aW51ZTtcclxuXHRcdC8vIFB1c2ggbmV3IHBhdGggc2VnbWVudHMuXHJcblx0XHRlbHNlIG5ld1BhcnRzLnB1c2gocGFydCk7XHJcblx0fVxyXG5cdC8vIFByZXNlcnZlIHRoZSBpbml0aWFsIHNsYXNoIGlmIHRoZXJlIHdhcyBvbmUuXHJcblx0aWYgKHBhcnRzWzBdID09PSBcIlwiKSBuZXdQYXJ0cy51bnNoaWZ0KFwiXCIpO1xyXG5cdC8vIFR1cm4gYmFjayBpbnRvIGEgc2luZ2xlIHN0cmluZyBwYXRoLlxyXG5cdHJldHVybiBuZXdQYXJ0cy5qb2luKFwiL1wiKTtcclxufVxyXG5cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGVuc3VyZUZvbGRlckV4aXN0cyhhcHA6IEFwcCwgcGF0aDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0Y29uc3QgZGlycyA9IHBhdGgucmVwbGFjZSgvXFxcXC9nLCBcIi9cIikuc3BsaXQoXCIvXCIpO1xyXG5cdGRpcnMucG9wKCk7IC8vIHJlbW92ZSBiYXNlbmFtZVxyXG5cclxuXHRpZiAoZGlycy5sZW5ndGgpIHtcclxuXHRcdGNvbnN0IGRpciA9IGpvaW4oLi4uZGlycyk7XHJcblx0XHRpZiAoIWFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZGlyKSkge1xyXG5cdFx0YXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihkaXIpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldERheXNPZldlZWsoKTogc3RyaW5nW10ge1xyXG5cdGNvbnN0IHsgbW9tZW50IH0gPSB3aW5kb3c7XHJcblx0Ly8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuXHRsZXQgd2Vla1N0YXJ0ID0gKG1vbWVudC5sb2NhbGVEYXRhKCkgYXMgYW55KS5fd2Vlay5kb3c7XHJcblx0Y29uc3QgZGF5c09mV2VlayA9IFtcclxuXHQgIFwic3VuZGF5XCIsXHJcblx0ICBcIm1vbmRheVwiLFxyXG5cdCAgXCJ0dWVzZGF5XCIsXHJcblx0ICBcIndlZG5lc2RheVwiLFxyXG5cdCAgXCJ0aHVyc2RheVwiLFxyXG5cdCAgXCJmcmlkYXlcIixcclxuXHQgIFwic2F0dXJkYXlcIixcclxuXHRdO1xyXG4gIFxyXG5cdHdoaWxlICh3ZWVrU3RhcnQpIHtcclxuXHQgIGNvbnN0IGRheSA9IGRheXNPZldlZWsuc2hpZnQoKTtcclxuXHQgIGlmIChkYXkpIGRheXNPZldlZWsucHVzaChkYXkpO1xyXG5cdCAgd2Vla1N0YXJ0LS07XHJcblx0fVxyXG5cdHJldHVybiBkYXlzT2ZXZWVrO1xyXG4gIH1cclxuXHJcbmZ1bmN0aW9uIGdldERheU9mV2Vla051bWVyaWNhbFZhbHVlKGRheU9mV2Vla05hbWU6IHN0cmluZyk6IG51bWJlciB7XHJcblx0cmV0dXJuIGdldERheXNPZldlZWsoKS5pbmRleE9mKGRheU9mV2Vla05hbWUudG9Mb3dlckNhc2UoKSk7XHJcbiAgfSIsICJcdC8vIFx1NTNENlx1NUY5N1x1MzA1N1x1MzA1Rlx1NTE2OFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA0Qlx1MzA4OVx1NjNBMlx1N0QyMlx1N0JDNFx1NTZGMlx1MzA2RVx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA5Mlx1NTIwN1x1MzA4QVx1NTFGQVx1MzA1OSAgXHJcblxyXG5pbXBvcnQgeyBURmlsZSB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5pbXBvcnQgeyBJR3JhbnVsYXJpdHksIGdldERhdGVVSUQgfSBmcm9tIFwib2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlXCI7XHJcbmltcG9ydCB7IERBWVNfUEVSX1VOSVQgfSBmcm9tIFwiLi9tYWluXCI7XHJcbmltcG9ydCB7IENhbGVuZGFyU2V0IH0gZnJvbSBcIi4vcGVyaW9kaWNOb3Rlc1R5cGVzXCI7XHJcblxyXG5cdC8vICh2ZXIwLngueFx1MzA2RXBlcmlvZGljIG5vdGVzXHUzMDZCXHUzMDgyXHU1QkZFXHU1RkRDXHUzMDAyKVxyXG5leHBvcnQgZnVuY3Rpb24gZ2V0VGFyZ2V0RmlsZXMoYWxsRmlsZXM6UmVjb3JkPHN0cmluZyxURmlsZT4sIGdyYW51bGFyaXR5OiBJR3JhbnVsYXJpdHkpOiBURmlsZVtde1xyXG5cclxuXHRcdGxldCBmaWxlczogVEZpbGVbXSA9IFtdO1xyXG5cdFx0bGV0IGNoZWNrRGF0ZSA9IHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0LmNsb25lKCk7XHJcblx0XHRsZXQgY2hlY2tEYXRlRWFybGllc3QgPSB0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0LmNsb25lKCk7XHJcblxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuaW5pdGlhbFNlYXJjaFR5cGUgPT0nYmFja3dhcmQnKXtcclxuXHRcdFx0aWYoY2hlY2tEYXRlLmlzU2FtZSh3aW5kb3cubW9tZW50KCksJ2RheScpKXtcclxuXHRcdFx0XHRjaGVja0RhdGUuYWRkKE1hdGguY2VpbCh0aGlzLnNldHRpbmdzLm9mZnNldC9EQVlTX1BFUl9VTklUW2dyYW51bGFyaXR5XSksZ3JhbnVsYXJpdHkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNoZWNrRGF0ZUVhcmxpZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuY2xvbmUoKS5zdWJ0cmFjdCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uW2dyYW51bGFyaXR5XSAtIDEsZ3JhbnVsYXJpdHkpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gZm9yd2FyZCBzZWFyY2hcdTMwNkVcdTMwNjhcdTMwNERcclxuXHRcdFx0Y2hlY2tEYXRlID0gdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdC5jbG9uZSgpLmFkZCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uW2dyYW51bGFyaXR5XSAtIDEsZ3JhbnVsYXJpdHkpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHR3aGlsZSAoY2hlY2tEYXRlLmlzU2FtZU9yQWZ0ZXIoY2hlY2tEYXRlRWFybGllc3QsZ3JhbnVsYXJpdHkpKXtcclxuXHRcdFx0aWYgKGFsbEZpbGVzW2dldERhdGVVSUQoY2hlY2tEYXRlLCBncmFudWxhcml0eSldKXtcclxuXHRcdFx0XHRmaWxlcy5wdXNoKGFsbEZpbGVzW2dldERhdGVVSUQoY2hlY2tEYXRlLCBncmFudWxhcml0eSldKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjaGVja0RhdGUuc3VidHJhY3QoMSxncmFudWxhcml0eSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gZmlsZXM7XHJcblx0fVxyXG5cclxuXHQvLyBcdTYzQTJcdTdEMjJcdTdCQzRcdTU2RjJcdTMwNkVQZXJpb2RpYyBOb3Rlc1x1MzA5Mlx1NTNENlx1NUY5N1x1MzA1OVx1MzA4QiBcdUZGMDhwZWlyb2RpYyBub3RlcyAxLngueFx1NzUyOFx1RkYwOVxyXG5cdGV4cG9ydCBmdW5jdGlvbiBnZXRUYXJnZXRQZXJpb2RpY05vdGVzKGNhbGVuZGFyU2V0OiBDYWxlbmRhclNldCwgZ3JhbnVsYXJpdHk6IElHcmFudWxhcml0eSk6IFRGaWxlW117XHJcblx0XHRsZXQgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuXHJcblx0XHQvLyBkYXlcdTU3RkFcdTZFOTZcdTMwNkVcdTYzQTJcdTdEMjJcdTdCQzRcdTU2RjJcdTMwNjdcdTMwNDJcdTMwOEJzZWFyY2hSYW5nZVx1MzA5Mlx1NTE0M1x1MzA2Qlx1MzAwMVx1N0M5Mlx1NUVBNlx1MzA2Qlx1NUZEQ1x1MzA1OFx1MzA2Nlx1NjNBMlx1N0QyMlx1N0JDNFx1NTZGMlx1MzA5Mlx1NjJFMVx1NUYzNVx1MzA1N1x1MzA1Rlx1MzA4Mlx1MzA2RVx1MzA5MmNoZWNrRGF0ZSxjaGVja0RhdGVFYXJsaWVzdFx1MzA2Qlx1NEVFM1x1NTE2NVxyXG5cdFx0bGV0IGNoZWNrRGF0ZSA9IHRoaXMuc2VhcmNoUmFuZ2UubGF0ZXN0LmNsb25lKCk7XHJcblx0XHRsZXQgY2hlY2tEYXRlRWFybGllc3QgPSB0aGlzLnNlYXJjaFJhbmdlLmVhcmxpZXN0LmNsb25lKCk7XHJcblx0XHRcclxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmluaXRpYWxTZWFyY2hUeXBlPT0nYmFja3dhcmQnKXtcclxuXHRcdFx0aWYoY2hlY2tEYXRlLmlzU2FtZSh3aW5kb3cubW9tZW50KCksJ2RheScpKXtcclxuXHRcdFx0XHRjaGVja0RhdGUuYWRkKE1hdGguY2VpbCh0aGlzLnNldHRpbmdzLm9mZnNldC9EQVlTX1BFUl9VTklUW2dyYW51bGFyaXR5XSksZ3JhbnVsYXJpdHkpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGNoZWNrRGF0ZUVhcmxpZXN0ID0gdGhpcy5zZWFyY2hSYW5nZS5sYXRlc3QuY2xvbmUoKS5zdWJ0cmFjdCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uW2dyYW51bGFyaXR5XSAtIDEsZ3JhbnVsYXJpdHkpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gZm9yd2FyZCBzZWFyY2hcdTMwNkVcdTMwNjhcdTMwNERcclxuXHRcdFx0Y2hlY2tEYXRlID0gdGhpcy5zZWFyY2hSYW5nZS5lYXJsaWVzdC5jbG9uZSgpLmFkZCh0aGlzLnNldHRpbmdzLmR1cmF0aW9uW2dyYW51bGFyaXR5XSAtIDEsZ3JhbnVsYXJpdHkpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd0RlYnVnSW5mbyl7XHJcblx0XHRcdGNvbnNvbGUubG9nKCdETk86c2VhcmNoaW5nIGNhY2hlcyBvZiBQZXJpb2RpYyBOb3Rlcy4uLiBjYWxlbmRhciBzZXQ6JyxjYWxlbmRhclNldCk7XHJcblx0XHR9XHJcblxyXG5cdFx0d2hpbGUgKGNoZWNrRGF0ZS5pc1NhbWVPckFmdGVyKGNoZWNrRGF0ZUVhcmxpZXN0LGdyYW51bGFyaXR5KSl7XHJcblx0XHRcdGNvbnN0IGNhY2hlcyA9IHRoaXMuYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIikuY2FjaGUuZ2V0UGVyaW9kaWNOb3RlcyhjYWxlbmRhclNldC5pZCxncmFudWxhcml0eSxjaGVja0RhdGUpO1xyXG5cdFx0XHRmb3IgKGNvbnN0IGZpbGUgb2YgY2FjaGVzKXtcclxuXHRcdFx0XHQvL1x1NTNCM1x1NUJDNlx1MzA2Qlx1MzBERVx1MzBDM1x1MzBDMVx1MzA1N1x1MzA1Rlx1MzBENVx1MzBBMVx1MzBBNFx1MzBFQlx1NTFGQVx1MzA2QVx1MzA1MVx1MzA4Q1x1MzA3MFx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG5cdFx0XHRcdGlmICggdGhpcy5zZXR0aW5ncy5leGFjdE1hdGNoT25seSAmJiAhZmlsZT8ubWF0Y2hEYXRhPy5leGFjdCkge1xyXG5cdFx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdC8vXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMEQxXHUzMEI5XHUzMDRDLm1kXHUzMDY3XHU3RDQyXHUzMDhGXHUzMDg5XHUzMDZBXHUzMDUxXHUzMDhDXHUzMDcwXHVGRjA4XHUzMERFXHUzMEZDXHUzMEFGXHUzMEMwXHUzMEE2XHUzMEYzXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMDY3XHUzMDZBXHUzMDUxXHUzMDhDXHUzMDcwXHVGRjA5XHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MubWFya2Rvd25Pbmx5ICYmICFmaWxlPy5maWxlUGF0aC5lbmRzV2l0aChcIi5tZFwiKSl7XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Ly8gXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMEQxXHUzMEI5XHUzMDZCUE5cdTMwNkVcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwRDFcdTMwQjlcdTMwNENcdTU0MkJcdTMwN0VcdTMwOENcdTMwNjZcdTMwNDRcdTMwNkFcdTMwNDQgJiYgUE5cdTMwNkVcdTMwRDVcdTMwQTlcdTMwRUJcdTMwQzBcdTMwRDFcdTMwQjlcdTMwNENcdTYzMDdcdTVCOUFcdTMwNTVcdTMwOENcdTMwNjZcdTMwNDRcdTMwOEIgXHUzMDZFXHUzMDY4XHUzMDREXHUzMDZGXHU1MUU2XHU3NDA2XHUzMDkyXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcblx0XHRcdFx0Ly8gXHVGRjBBXHU3M0ZFXHU3MkI2XHUzMDZFUE5cdTMwRDlcdTMwRkNcdTMwQkZcdTMwNjdcdTMwNkZcdTMwMDFcdTMwQUJcdTMwRUNcdTMwRjNcdTMwQzBcdTMwRkNcdTMwQkJcdTMwQzNcdTMwQzhcdTMwNkVcdTYzMDdcdTVCOUFcdTMwNkJcdTMwNEJcdTMwNEJcdTMwOEZcdTMwODlcdTMwNUFcdTUxNjhcdTMwQkJcdTMwQzNcdTMwQzhcdTMwNkJcdTU0MkJcdTMwN0VcdTMwOENcdTMwOEJQTlx1MzA0Q1x1OEZENFx1MzA1NVx1MzA4Q1x1MzA4Qlx1MzA4OFx1MzA0Nlx1MzA2N1x1MzA0Mlx1MzA4Qlx1MzA1Rlx1MzA4MVx1MzAwMVx1NTQwNFx1MzBCQlx1MzBDM1x1MzBDOFx1MzA2RVx1MzBENVx1MzBBOVx1MzBFQlx1MzBDMFx1MzBEMVx1MzBCOVx1MzA2N1x1MzBENVx1MzBBM1x1MzBFQlx1MzBCRlx1MzBFQVx1MzBGM1x1MzBCMFx1MzA1OVx1MzA4QlxyXG5cdFx0XHRcdC8vIFx1MzA1Rlx1MzA2MFx1MzA1N1x1MzBENVx1MzBBOVx1MzBFQlx1MzBDMFx1MzBEMVx1MzBCOVx1MzA0Q1x1NjMwN1x1NUI5QVx1MzA1NVx1MzA4Q1x1MzA2Nlx1MzA0NFx1MzA2QVx1MzA0NFx1MzA2OFx1MzA0RFx1MzA2Rlx1MzBCOVx1MzBBRFx1MzBDM1x1MzBEN1xyXG5cdFx0XHRcdGlmICghZmlsZS5maWxlUGF0aC5zdGFydHNXaXRoKGNhbGVuZGFyU2V0W2dyYW51bGFyaXR5XS5mb2xkZXIuY29uY2F0KFwiL1wiKSkgJiYgY2FsZW5kYXJTZXRbZ3JhbnVsYXJpdHldLmZvbGRlcil7XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc3QgZmlsZW9iaiA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlLmZpbGVQYXRoKTtcclxuXHRcdFx0XHRpZiAoZmlsZW9iaiBpbnN0YW5jZW9mIFRGaWxlKXtcclxuXHRcdFx0XHRcdGZpbGVzLnB1c2goZmlsZW9iaik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHRcdGNoZWNrRGF0ZS5zdWJ0cmFjdCgxLGdyYW51bGFyaXR5KTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBmaWxlcztcclxuXHR9IiwgImltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGdldERhdGVGcm9tRmlsZSB9IGZyb20gXCJvYnNpZGlhbi1kYWlseS1ub3Rlcy1pbnRlcmZhY2VcIjtcclxuaW1wb3J0IHsgRmlsZUluZm8sIEdSQU5VTEFSSVRZX0xJU1QsIE91dGxpbmVEYXRhIH0gZnJvbSBcIi4vbWFpblwiO1xyXG5cclxuLy8gXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHUzMDZFXHU5MTREXHU1MjE3XHUzMDRCXHUzMDg5XHU1NDA0XHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHUzMDZCXHU5NUEyXHUzMDU5XHUzMDhCXHU2MEM1XHU1ODMxXHUzMDkyXHU2MkJEXHU1MUZBXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGaWxlSW5mbyhmaWxlczpURmlsZVtdKTpQcm9taXNlPEZpbGVJbmZvW10+e1xyXG4gICAgbGV0IGZpbGVJbmZvOkZpbGVJbmZvW109W107XHJcbiAgICBmb3IgKGxldCBpPTA7IGkgPCBmaWxlcy5sZW5ndGggOyBpKyspe1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGVzW2ldKTtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoXCJcXG5cIik7XHJcbiAgICAgICAgbGV0IGluZm86RmlsZUluZm8gPSB7XHJcbiAgICAgICAgICAgIGRhdGU6IGdldERhdGVGcm9tRmlsZShmaWxlc1tpXSxHUkFOVUxBUklUWV9MSVNUW3RoaXMuYWN0aXZlR3JhbnVsYXJpdHldKSxcclxuICAgICAgICAgICAgLy9jb250ZW50OiBjb250ZW50LFxyXG4gICAgICAgICAgICBsaW5lczogbGluZXMsXHJcbiAgICAgICAgICAgIG51bU9mTGluZXM6IGxpbmVzLmxlbmd0aCxcclxuICAgICAgICAgICAgaXNGb2xkZWQ6IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIHBlcmlvZGljIG5vdGVzIGJldGFcdTVCRkVcdTVGRENcclxuICAgICAgICBpZiAodGhpcy52ZXJQTiA9PSAyKXtcclxuICAgICAgICAgICAgaW5mby5kYXRlID0gdGhpcy5hcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKS5jYWNoZS5jYWNoZWRGaWxlcy5nZXQodGhpcy5jYWxlbmRhclNldHNbdGhpcy5hY3RpdmVTZXRdLmlkKS5nZXQoZmlsZXNbaV0ucGF0aCkuZGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZpbGVJbmZvLnB1c2goaW5mbyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmlsZUluZm87XHJcbn1cclxuXHJcbi8vIFx1MzBFMVx1MzBCRlx1MzBDN1x1MzBGQ1x1MzBCRlx1MzA0Qlx1MzA4OVx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1ODk4MVx1N0QyMFx1MzA5Mlx1NjJCRFx1NTFGQVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3V0bGluZShmaWxlczpURmlsZVtdKTpQcm9taXNlPE91dGxpbmVEYXRhW11bXT57XHJcbiAgICBsZXQgZGF0YTpPdXRsaW5lRGF0YVtdW109W107ICAgIFxyXG4gICAgZm9yIChsZXQgaT0wOyBpPCBmaWxlcy5sZW5ndGggOyBpKyspe1xyXG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZXNbaV0pO1xyXG4gICAgICAgIC8vIFx1N0E3QVx1OTE0RFx1NTIxN1x1MzA5Mlx1NjMwN1x1NUI5QVxyXG4gICAgICAgIGRhdGFbaV09W107XHJcbiAgICAgICAgLy8gaGVhZGluZ3MsbGlua3MsdGFnc1x1MzA5Mlx1NjJCRFx1NTFGQVxyXG5cclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2sgaGVhZGluZ3MnLGNhY2hlLmhhc093blByb3BlcnR5KFwiaGVhZGluZ3NcIikgKTtcclxuICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoXCJoZWFkaW5nc1wiKSl7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGo9MDsgajwgY2FjaGUuaGVhZGluZ3MubGVuZ3RoIDsgaisrKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQ6T3V0bGluZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZU9mRWxlbWVudCA6IFwiaGVhZGluZ1wiLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uIDogY2FjaGUuaGVhZGluZ3Nbal0ucG9zaXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQgOiBjYWNoZS5oZWFkaW5nc1tqXS5oZWFkaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiBjYWNoZS5oZWFkaW5nc1tqXS5sZXZlbFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0ucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NoZWNrIGxpbmtzJyxjYWNoZS5oYXNPd25Qcm9wZXJ0eShcImxpbmtzXCIpICk7XHJcbiAgICAgICAgaWYgKGNhY2hlLmhhc093blByb3BlcnR5KFwibGlua3NcIikpe1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqPTA7IGo8IGNhY2hlLmxpbmtzLmxlbmd0aCA7IGorKyl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbGVtZW50Ok91dGxpbmVEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGVPZkVsZW1lbnQgOiBcImxpbmtcIixcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA6IGNhY2hlLmxpbmtzW2pdLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIC8vXHUzMERFXHUzMEZDXHUzMEFGXHUzMEMwXHUzMEE2XHUzMEYzXHUzMEVBXHUzMEYzXHUzMEFGXHUzMDZCXHU1QkZFXHU1RkRDXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheVRleHQgOiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGNhY2hlLmxpbmtzW2pdLmRpc3BsYXlUZXh0ID09XCJcIikgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gY2FjaGUubGlua3Nbal0ub3JpZ2luYWwuc3Vic3RyaW5nKDEsY2FjaGUubGlua3Nbal0ub3JpZ2luYWwuaW5kZXhPZihcIl1cIikpIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICA6IGNhY2hlLmxpbmtzW2pdLmRpc3BsYXlUZXh0LFxyXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGNhY2hlLmxpbmtzW2pdLmxpbmtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBkYXRhW2ldLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cdFx0XHRcdFxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2sgbGlzdHMnKTtcclxuICAgICAgICBpZiAoY2FjaGUuaGFzT3duUHJvcGVydHkoXCJsaXN0SXRlbXNcIikpe1xyXG5cclxuICAgICAgICAgICAgZm9yIChsZXQgaj0wOyBqPCBjYWNoZS5saXN0SXRlbXMubGVuZ3RoIDsgaisrKXtcclxuICAgICAgICAgICAgICAgIC8vXHU0RUU1XHU0RTBCXHUzMDY3XHUzMEVBXHUzMEI5XHUzMEM4XHUzMEEyXHUzMEE0XHUzMEM2XHUzMEUwXHUzMDZFXHU5NjhFXHU1QzY0XHUzMDZFXHU1MjI0XHU1QjlBXHUzMDkyXHU4ODRDXHUzMDQ2XHUzMDAyXHJcbiAgICAgICAgICAgICAgICAvL1x1MzBFQVx1MzBCOVx1MzBDOFx1MzA2RVx1NTE0OFx1OTgyRFx1MzA2RVx1OTgwNVx1NzZFRTowXHUzMDAxXHU1MTQ4XHU5ODJEXHUzMDY3XHUzMDZGXHUzMDZBXHUzMDQ0XHUzMDRDXHUzMEVCXHUzMEZDXHUzMEM4XHUzMEVDXHUzMEQ5XHUzMEVCOjFcdTMwMDFcdTdCMkMyXHU5NjhFXHU1QzY0XHU0RUU1XHU0RTBCXHVGRjFBMlx1MzA2OFx1MzA1N1x1MzA2Nlx1MzA0NFx1MzA4Qlx1MzAwMlxyXG4gICAgICAgICAgICAgICAgLy9wYXJlbnRcdTMwNENcdTZCNjNcdTMwNkVcdTY1NzBcdTMwNkFcdTMwODlcdTdCMkMyXHU5NjhFXHU1QzY0XHU0RUU1XHU0RTBCXHJcbiAgICAgICAgICAgICAgICAvL1x1OENBMFx1MzA2RVx1NjU3MFx1MzA2N1x1MzAwMVx1N0Q3Nlx1NUJGRVx1NTAyNFx1MzA0Q3Bvc2l0aW9uLnN0YXJ0LmxpbmVcdTMwNjhcdTRFMDBcdTgxRjRcdTMwNTdcdTMwNjZcdTMwNDRcdTMwOENcdTMwNzBcdTMwQzhcdTMwQzNcdTMwRDdcdTMwQTJcdTMwQTRcdTMwQzZcdTMwRTAoMClcdTMwMDFcdTk3NUVcdTRFMDBcdTgxRjRcdTMwNkFcdTMwODlcdTMwRUJcdTMwRkNcdTMwQzhcdUZGMDgxXHVGRjA5XHJcbiAgICAgICAgICAgICAgICAvL1x1MzA1Rlx1MzA2MFx1MzA1N1x1ODk5Nlx1ODk5QVx1NzY4NFx1MzA2Qlx1OTZFMlx1MzA4Q1x1MzA1Rlx1MzBDOFx1MzBDM1x1MzBEN1x1MzBFQ1x1MzBEOVx1MzBFQlx1MzA2RVx1MzBBMlx1MzBBNFx1MzBDNlx1MzBFMFx1MzA2N1x1MzA4Mlx1MzAwMVx1OTU5M1x1MzA2QmhlYWRpbmdcdTMwNENcdTMwNkFcdTMwNDRcdTMwNjhcdTMwRUJcdTMwRkNcdTMwQzhcdTMwQTJcdTMwQTRcdTMwQzZcdTMwRTBcdTMwNjhcdTMwNTdcdTMwNjZcdTUyMjRcdTVCOUFcdTMwNTVcdTMwOENcdTMwNjZcdTMwNTdcdTMwN0VcdTMwNDZcdTMwNkVcdTMwNjdcdTMwMDFcclxuICAgICAgICAgICAgICAgIC8vXHU1MjREXHUzMDZFXHUzMEVBXHUzMEI5XHUzMEM4XHUzMEEyXHUzMEE0XHUzMEM2XHUzMEUwXHUzMDY4XHUzMDZFXHU4ODRDXHUzMDZFXHU1REVFXHUzMDRDMVx1MzA2RVx1NjY0Mlx1MzA2RVx1MzA3Rlx1MzBFQlx1MzBGQ1x1MzBDOFx1MzBBMlx1MzBBNFx1MzBDNlx1MzBFMFx1MzA2OFx1MzA1N1x1MzA2Nlx1NTIyNFx1NUI5QVx1MzA1OVx1MzA4Qlx1MzA4OFx1MzA0Nlx1NEZFRVx1NkI2M1x1MzA1OVx1MzA4Qlx1MzAwMlxyXG4gICAgICAgICAgICAgICAgbGV0IGxpc3RMZXZlbDogbnVtYmVyID0gMDsgLy8gMDp0b3AgaXRlbSBvZiBhIGxpc3QgMTpyb290IGxldmUgMjpvdGhlclxyXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlLmxpc3RJdGVtc1tqXS5wYXJlbnQgPjApe1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RMZXZlbCA9IDI7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGo+MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoTWF0aC5hYnMoY2FjaGUubGlzdEl0ZW1zW2pdLnBhcmVudCkgPT0gY2FjaGUubGlzdEl0ZW1zW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmUpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChjYWNoZS5saXN0SXRlbXNbal0ucG9zaXRpb24uc3RhcnQubGluZSAtIGNhY2hlLmxpc3RJdGVtc1tqLTFdLnBvc2l0aW9uLnN0YXJ0LmxpbmUgPT0gMSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3RMZXZlbCA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudDpPdXRsaW5lRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlT2ZFbGVtZW50IDogXCJsaXN0SXRlbXNcIixcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbiA6IGNhY2hlLmxpc3RJdGVtc1tqXS5wb3NpdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VGV4dCA6IHRoaXMuZmlsZUluZm9baV0ubGluZXNbY2FjaGUubGlzdEl0ZW1zW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmVdLnJlcGxhY2UoL14oXFxzfFxcdCkqLVxccyhcXFsuXFxdXFxzKSovLCcnKSxcclxuICAgICAgICAgICAgICAgICAgICBsZXZlbCA6IGxpc3RMZXZlbCxcclxuICAgICAgICAgICAgICAgICAgICB0YXNrIDogY2FjaGUubGlzdEl0ZW1zW2pdLnRhc2tcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBkYXRhW2ldLnB1c2goZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2NoZWNrIHRhZ3MnLGNhY2hlLmhhc093blByb3BlcnR5KFwidGFnc1wiKSApO1xyXG4gICAgICAgIGlmIChjYWNoZS5oYXNPd25Qcm9wZXJ0eShcInRhZ3NcIikpe1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqPTA7IGo8IGNhY2hlLnRhZ3MubGVuZ3RoIDsgaisrKXtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQ6T3V0bGluZURhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZU9mRWxlbWVudCA6IFwidGFnXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gOiBjYWNoZS50YWdzW2pdLnBvc2l0aW9uLFxyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXlUZXh0IDogY2FjaGUudGFnc1tqXS50YWcuc3Vic3RyaW5nKDEpLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGRhdGFbaV0ucHVzaChlbGVtZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBcdTg5ODFcdTdEMjBcdTMwNkVcdTc2N0JcdTU4MzRcdTk4MDZcdTMwNkJcdTMwQkRcdTMwRkNcdTMwQzhcclxuICAgICAgICBkYXRhW2ldLnNvcnQoKGEsYik9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAoYS5wb3NpdGlvbi5zdGFydC5vZmZzZXQgLSBiLnBvc2l0aW9uLnN0YXJ0Lm9mZnNldCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkYXRhO1xyXG5cclxufSIsICJpbXBvcnQgeyBNYXJrZG93blZpZXcsIE1lbnUsIFRGaWxlLCBzZXRJY29uIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IEZpbGVJbmZvLCBPdXRsaW5lRGF0YSwgR1JBTlVMQVJJVFlfTElTVCB9IGZyb20gXCIuL21haW5cIjtcclxuaW1wb3J0IHsgYWRkRmxhZywgY2hlY2tGbGFnLCByZW1vdmVGbGFnIH0gZnJvbSBcIi4vdXRpbFwiO1xyXG5pbXBvcnQgeyBEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUgfSBmcm9tIFwiLi92aWV3XCI7XHJcblxyXG4vLyAgXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU2M0NGXHU3NTNCXHRcclxuZXhwb3J0IGZ1bmN0aW9uIGRyYXdPdXRsaW5lKCBmaWxlczogVEZpbGVbXSwgaW5mbzogRmlsZUluZm9bXSwgZGF0YTogT3V0bGluZURhdGFbXVtdKTp2b2lkIHtcclxuXHJcbiAgICBjb25zdCBjb250YWluZXJFbDogSFRNTEVsZW1lbnQgPSBjcmVhdGVEaXYoXCJuYXYtZmlsZXMtY29udGFpbmVyIG5vZGUtaW5zZXJ0LWV2ZW50XCIpO1xyXG4gICAgY29uc3Qgcm9vdEVsOiBIVE1MRWxlbWVudCA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdihcInRyZWUtaXRlbSBuYXYtZm9sZGVyIG1vZC1yb290XCIpOyBcclxuICAgIGNvbnN0IHJvb3RDaGlsZHJlbkVsOiBIVE1MRWxlbWVudCA9IHJvb3RFbC5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0tY2hpbGRyZW4gbmF2LWZvbGRlci1jaGlsZHJlblwiKTsgXHJcblxyXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICByb290Q2hpbGRyZW5FbC5jcmVhdGVFbChcImg0XCIse1xyXG4gICAgICAgICAgICB0ZXh0OiBcIk5vIGRhaWx5L3BlcmlvZGljIG5vdGUgZm91bmRcIlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIGluY2x1ZGUgb25seSBtb2RlXHUzMDRDXHUzMEFBXHUzMEYzXHUzMDZCXHUzMDZBXHUzMDYzXHUzMDY2XHUzMDQ0XHUzMDhCXHUzMDRCXHJcbiAgICBsZXQgaW5jbHVkZU1vZGU6IGJvb2xlYW4gPSAodGhpcy5zZXR0aW5ncy5pbmNsdWRlT25seSAhPSAnbm9uZScpICYmIChCb29sZWFuKHRoaXMuc2V0dGluZ3Mud29yZHNUb0luY2x1ZGUubGVuZ3RoKSB8fCAodGhpcy5zZXR0aW5ncy5pbmNsdWRlQmVnaW5uaW5nKSk7XHJcblxyXG4gICAgLy8gXHU4ODY4XHU3OTNBXHUzMEFBXHUzMEYzXHUzMDZCXHUzMDZBXHUzMDYzXHUzMDY2XHUzMDQ0XHUzMDhCXHU4OThCXHU1MUZBXHUzMDU3XHUzMEVDXHUzMEQ5XHUzMEVCXHUzMDZFXHU2NzAwXHU5QUQ4XHU1MDI0XHJcbiAgICBsZXQgbWF4TGV2ZWwgPSB0aGlzLnNldHRpbmdzLmhlYWRpbmdMZXZlbC5pbmRleE9mKHRydWUpO1xyXG5cclxuICAgIFxyXG5cclxuXHJcbiAgICBmb3IgKGxldCBpPTA7IGk8ZmlsZXMubGVuZ3RoIDsgaSsrKXtcclxuXHJcbiAgICAgICAgLy8gXHU2NzAwXHU2NUIwXHUzMDZFXHU4OThCXHU1MUZBXHUzMDU3XHUzMEVDXHUzMEQ5XHUzMEVCXHJcbiAgICAgICAgbGV0IGxhdGVzdEhlYWRpbmdMZXZlbCA9IDA7XHJcblxyXG4gICAgICAgIC8vIFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA2RVx1MzBCRlx1MzBBNFx1MzBDOFx1MzBFQlx1OTBFOFx1NTIwNlx1NEY1Q1x1NjIxMCA9IFx1MzBENVx1MzBBOVx1MzBFQlx1MzBDMFx1NEY1Q1x1NjIxMFxyXG4gICAgICAgIGNvbnN0IGRhaWx5Tm90ZUVsOiBIVE1MRWxlbWVudCA9IHJvb3RDaGlsZHJlbkVsLmNyZWF0ZURpdihcInRyZWUtaXRlbSBuYXYtZm9sZGVyXCIpO1xyXG4gICAgICAgIGNvbnN0IGRhaWx5Tm90ZVRpdGxlRWw6IEhUTUxFbGVtZW50ID0gZGFpbHlOb3RlRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtLXNlbGYgaXMtY2xpY2thYmxlIG1vZC1jb2xsYXBzaWJsZSBuYXYtZm9sZGVyLXRpdGxlXCIpO1xyXG4gICAgICAgIGNvbnN0IGRhaWx5Tm90ZUNoaWxkcmVuRWw6IEhUTUxFbGVtZW50ID0gZGFpbHlOb3RlRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtLWNoaWxkcmVuIG5hdi1mb2xkZXItY2hpbGRyZW5cIik7XHJcbiAgICAgICAgLy9jb25zdCBjb2xsYXBzZUljb25FbDogSFRNTEVsZW1lbnQgPSBkYWlseU5vdGVUaXRsZUVsLmNyZWF0ZURpdihcIm5hdi1mb2xkZXItY29sbGFwc2UtaW5kaWNhdG9yIGNvbGxhcHNlLWljb25cIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHUzMENFXHUzMEZDXHUzMEM4XHUzMEJGXHUzMEE0XHUzMEM4XHUzMEVCXHUzMDZCXHU4MENDXHU2NjZGXHU4MjcyXHUzMDkyXHU4Q0EwXHU4Mzc3XHJcbiAgICAgICAgY29uc3QgY2hhbmdlQ29sb3IgPSB0aGlzLnNldHRpbmdzLm5vdGVUaXRsZUJhY2tncm91bmRDb2xvcjtcclxuXHJcbiAgICAgICAgaWYgKGNoYW5nZUNvbG9yICE9J25vbmUnKXtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tQ29sb3IgPSB0aGlzLnNldHRpbmdzLmN1c3RvbU5vdGVUaXRsZUJhY2tncm91bmRDb2xvcjtcclxuICAgICAgICAgICAgY29uc3QgY3VzdG9tQ29sb3JIb3ZlciA9IHRoaXMuc2V0dGluZ3MuY3VzdG9tTm90ZVRpdGxlQmFja2dyb3VuZENvbG9ySG92ZXI7XHJcbiAgICAgICAgICAgIGNvbnN0IHRoZW1lID0gQm9vbGVhbihkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdLmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtbGlnaHQnKSk/ICdsaWdodCc6J2RhcmsnXHJcblxyXG4gICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGN1c3RvbUNvbG9yW2NoYW5nZUNvbG9yXVt0aGVtZV07XHJcbiAgICAgICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBjdXN0b21Db2xvckhvdmVyW2NoYW5nZUNvbG9yXVt0aGVtZV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZW91dFwiLCBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPWN1c3RvbUNvbG9yW2NoYW5nZUNvbG9yXVt0aGVtZV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gIFx1NjI5OFx1MzA4QVx1MzA1Rlx1MzA1Rlx1MzA3Rlx1MzBBMlx1MzBBNFx1MzBCM1x1MzBGM1xyXG4gICAgICAgIGNvbnN0IG5vdGVDb2xsYXBzZUljb246SFRNTEVsZW1lbnQgPSBkYWlseU5vdGVUaXRsZUVsLmNyZWF0ZURpdihcInRyZWUtaXRlbS1pY29uIGNvbGxhcHNlLWljb24gbmF2LWZvbGRlci1jb2xsYXBzZS1pbmRpY2F0b3JcIik7XHJcbiAgICAgICAgc2V0SWNvbihub3RlQ29sbGFwc2VJY29uLFwicmlnaHQtdHJpYW5nbGVcIik7XHJcblxyXG4gICAgICAgIC8vXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHU1NDBEXHUzMDZCXHUzMEEyXHUzMEE0XHUzMEIzXHUzMEYzXHUzMDkyXHU0RUQ4XHU1MkEwXHJcbiAgICAgICAgLy8gc3dpdGNoKHRoaXMuc2V0dGluZ3MuaWNvbi5ub3RlKXtcclxuICAgICAgICAvLyAgICAgY2FzZSAnbm9uZSc6XHJcbiAgICAgICAgLy8gICAgICAgICBicmVhaztcclxuICAgICAgICAvLyAgICAgY2FzZSAnY3VzdG9tJzpcclxuICAgICAgICAvLyAgICAgICAgIHNldEljb24oZGFpbHlOb3RlVGl0bGVFbCwgdGhpcy5zZXR0aW5ncy5jdXN0b21JY29uLm5vdGUpO1xyXG4gICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy8gICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgLy8gICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5pY29uLm5vdGUpe1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIHNldEljb24oZGFpbHlOb3RlVGl0bGVFbCwgdGhpcy5zZXR0aW5ncy5pY29uLm5vdGUpO1xyXG4gICAgICAgIC8vICAgICAgICAgfVxyXG4gICAgICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgLy8gfVxyXG5cclxuICAgICAgICBcclxuXHJcbiAgICAgICAgLy8gIFx1NjI5OFx1MzA4QVx1MzA1Rlx1MzA1Rlx1MzA3Rlx1MzBBMlx1MzBBNFx1MzBCM1x1MzBGM1x1MzBBRlx1MzBFQVx1MzBDM1x1MzBBRlx1NjY0Mlx1MzA2RVx1NTFFNlx1NzQwNlxyXG4gICAgICAgIG5vdGVDb2xsYXBzZUljb24uYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICBhc3luYyAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1MzBENVx1MzBBOVx1MzBGQ1x1MzBFQlx1MzBDOVx1MzA1NVx1MzA4Q1x1MzA2Nlx1MzA0NFx1MzA4Qlx1NTgzNFx1NTQwOFxyXG4gICAgICAgICAgICAgICAgaWYgKGluZm9baV0uaXNGb2xkZWQpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NTAwQlx1NTIyNVx1MzBENVx1MzBBOVx1MzBGQ1x1MzBFQlx1MzBDOVx1MzBENVx1MzBFOVx1MzBCMFx1MzA5Mlx1OTY2NFx1NTNCQlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5jb2xsYXBzZUFsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hlY2tGbGFnKGZpbGVzW2ldLCAnZm9sZCcsIHRoaXMuc2V0dGluZ3MpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZUZsYWcoZmlsZXNbaV0sICdmb2xkJywgdGhpcy5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHUzMEFBXHUzMEZDXHUzMEQ3XHUzMEYzXHU1MUU2XHU3NDA2XHJcbiAgICAgICAgICAgICAgICAgICAgZGFpbHlOb3RlRWwuY2xhc3NMaXN0LnJlbW92ZSgnaXMtY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbm90ZUNvbGxhcHNlSWNvbi5jbGFzc0xpc3QucmVtb3ZlKCdpcy1jb2xsYXBzZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBpbmZvW2ldLmlzRm9sZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgZGFpbHlOb3RlQ2hpbGRyZW5FbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1OTU4Qlx1MzA0NFx1MzA2Nlx1MzA0NFx1MzA4Qlx1NTgzNFx1NTQwOFx0XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTUwMEJcdTUyMjVcdTMwRDVcdTMwQTlcdTMwRkNcdTMwRUJcdTMwQzlcdTMwRDVcdTMwRTlcdTMwQjBcdTMwOTJcdThGRkRcdTUyQTBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuY29sbGFwc2VBbGwpIHsgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWRkRmxhZyhmaWxlc1tpXSwnZm9sZCcsdGhpcy5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1MzBENVx1MzBBOVx1MzBGQ1x1MzBFQlx1MzBDOVx1NTFFNlx1NzQwNlxyXG4gICAgICAgICAgICAgICAgICAgIGRhaWx5Tm90ZUVsLmNsYXNzTGlzdC5hZGQoJ2lzLWNvbGxhcHNlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5vdGVDb2xsYXBzZUljb24uY2xhc3NMaXN0LmFkZCgnaXMtY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5mb1tpXS5pc0ZvbGRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZGFpbHlOb3RlQ2hpbGRyZW5FbC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG5cclxuICAgICAgICAvL3dlZWtseSBub3RlXHUzMDZFXHU1ODM0XHU1NDA4XHUzMDAxXHUzMEQ1XHUzMEExXHUzMEE0XHUzMEVCXHU1NDBEXHUzMDZCXHU2NUU1XHU0RUQ4XHUzMDZFXHU3QkM0XHU1NkYyXHUzMDkyXHU0RUQ4XHU1MkEwXHU4ODY4XHU3OTNBXHJcbiAgICAgICAgbGV0IG5hbWUgPSBmaWxlc1tpXS5iYXNlbmFtZTtcclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hdHRhY2hXZWVrbHlOb3Rlc05hbWUgJiYgR1JBTlVMQVJJVFlfTElTVFt0aGlzLmFjdGl2ZUdyYW51bGFyaXR5XSA9PSd3ZWVrJyl7XHJcbiAgICAgICAgICAgIG5hbWUgPSBuYW1lICsgXCIgKFwiICt0aGlzLmZpbGVJbmZvW2ldLmRhdGUuY2xvbmUoKS5zdGFydE9mKCd3ZWVrJykuZm9ybWF0KFwiTU0vREQgWy1dIFwiKSArIHRoaXMuZmlsZUluZm9baV0uZGF0ZS5jbG9uZSgpLmVuZE9mKCd3ZWVrJykuZm9ybWF0KFwiTU0vRERcIikgK1wiKVwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmNyZWF0ZURpdihcInRyZWUtaXRlbS1pbm5lciBuYXYtZm9sZGVyLXRpdGxlLWNvbnRlbnRcIikuc2V0VGV4dChuYW1lKTtcclxuXHJcbiAgICAgICAgLy9cdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTU0MERcdTMwNkVcdTVGOENcdTMwNkVcdTYwQzVcdTU4MzFcdTMwOTJcdTg4NjhcdTc5M0FcclxuICAgICAgICBjb25zdCBpbmZvVG9EaXNwbGF5ID0gKHRoaXMuYWN0aXZlR3JhbnVsYXJpdHkgPT0gMCApID8gdGhpcy5zZXR0aW5ncy5kaXNwbGF5RmlsZUluZm9EYWlseSA6IHRoaXMuc2V0dGluZ3MuZGlzcGxheUZpbGVJbmZvUGVyaW9kaWM7XHJcblxyXG4gICAgICAgIHN3aXRjaCAoaW5mb1RvRGlzcGxheSkge1xyXG4gICAgICAgICAgICBjYXNlICdsaW5lcyc6XHJcbiAgICAgICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmRhdGFzZXQuc3ViaW5mbyA9IGluZm9baV0ubnVtT2ZMaW5lcy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2RheXMnOlxyXG4gICAgICAgICAgICAgICAgbGV0IGJhc2VkYXRlID0gKHRoaXMuc2V0dGluZ3MuaW5pdGlhbFNlYXJjaFR5cGUgPT0gXCJiYWNrd2FyZFwiKT8gd2luZG93Lm1vbWVudCgpOiB3aW5kb3cubW9tZW50KHRoaXMuc2V0dGluZ3Mub25zZXQpO1xyXG4gICAgICAgICAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5kYXRhc2V0LnN1YmluZm8gPSBNYXRoLmFicyhpbmZvW2ldLmRhdGUuZGlmZihiYXNlZGF0ZS5zdGFydE9mKEdSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV0pLEdSQU5VTEFSSVRZX0xJU1RbdGhpcy5hY3RpdmVHcmFudWxhcml0eV0pKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Rvdyc6XHJcbiAgICAgICAgICAgICAgICBkYWlseU5vdGVUaXRsZUVsLmRhdGFzZXQuc3ViaW5mbyA9IGluZm9baV0uZGF0ZS5mb3JtYXQoXCJkZGRkXCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2Rvd3Nob3J0JzpcclxuICAgICAgICAgICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuZGF0YXNldC5zdWJpbmZvID0gaW5mb1tpXS5kYXRlLmZvcm1hdChcImRkZFwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd3ZWVrbnVtYmVyJzpcclxuICAgICAgICAgICAgICAgIGRhaWx5Tm90ZVRpdGxlRWwuZGF0YXNldC5zdWJpbmZvID0gaW5mb1tpXS5kYXRlLmZvcm1hdChcIlt3XXd3XCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3RhZyc6XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlyc3R0YWdJbmRleCA9IGRhdGFbaV0uZmluZEluZGV4KCAoZWxlbWVudCxpbmRleCkgPT5cclxuICAgICAgICAgICAgICAgICAgICBkYXRhW2ldW2luZGV4XS50eXBlT2ZFbGVtZW50ID09J3RhZycpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpcnN0dGFnSW5kZXggPj0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5kYXRhc2V0LnN1YmluZm8gPSBkYXRhW2ldW2ZpcnN0dGFnSW5kZXhdLmRpc3BsYXlUZXh0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgY2FzZSAnbm9uZSc6XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9cdTMwQ0VcdTMwRkNcdTMwQzhcdTMwQkZcdTMwQTRcdTMwQzhcdTMwRUJcdTMwOTJcdTMwQUZcdTMwRUFcdTMwQzNcdTMwQUZcdTMwNTdcdTMwNUZcdTMwODlcdTMwNURcdTMwNkVcdTMwRDVcdTMwQTFcdTMwQTRcdTMwRUJcdTMwOTJvcGVuXHJcbiAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNsaWNrXCIsXHJcbiAgICAgICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgLy8gXHUzMEIzXHUzMEYzXHUzMEM2XHUzMEFEXHUzMEI5XHUzMEM4XHUzMEUxXHUzMENCXHUzMEU1XHUzMEZDXHJcbiAgICAgICAgZGFpbHlOb3RlVGl0bGVFbC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBcImNvbnRleHRtZW51XCIsXHJcbiAgICAgICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVudSA9IG5ldyBNZW51KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9cdTY1QjBcdTg5OEZcdTMwQkZcdTMwRDZcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBpbiBuZXcgdGFiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKFwiZmlsZS1wbHVzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKCgpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKS5vcGVuRmlsZShmaWxlc1tpXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgLy9cdTUzRjNcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSk9PlxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiB0byB0aGUgcmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJzZXBhcmF0b3ItdmVydGljYWxcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3NwbGl0Jykub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcihcclxuICAgICAgICAgICAgICAgICAgICBcImZpbGUtbWVudVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lbnUsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZXNbaV0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ2xpbmstY29udGV4dC1tZW51J1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICApO1xyXG5cclxuICAgICAgICAvLyBjb25zdHJ1Y3RPdXRsaW5lRE9NLmNhbGwodGhpcywgZmlsZXNbaV0sIGluZm9baV0sIGRhdGFbaV0sIGRhaWx5Tm90ZUNoaWxkcmVuRWwpO1xyXG5cclxuICAgICAgICAvLyBpbmNsdWRlIG1vZGUgXHU3NTI4XHUzMDZFXHU1OTA5XHU2NTcwXHUzMDkyXHU1QkEzXHU4QTAwXHJcbiAgICAgICAgbGV0IGlzSW5jbHVkZWQgPSB0aGlzLnNldHRpbmdzLmluY2x1ZGVCZWdpbm5pbmc7XHJcbiAgICAgICAgbGV0IGluY2x1ZGVNb2RlSGVhZGluZ0xldmVsOiBudW1iZXI7XHJcbiAgICAgICAgLy8gZXhjbHVkZSBtb2RlIFx1NzUyOFx1NTkwOVx1NjU3MFxyXG4gICAgICAgIGxldCBpc0V4Y2x1ZGVkID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGV4Y2x1ZGVUeXBlOiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IGV4Y2x1ZGVNb2RlSGVhZGluZ0xldmVsOiBudW1iZXI7XHJcbiAgICAgICAgbGV0IHByaW1lVHlwZSA9IHRoaXMuc2V0dGluZ3MuaW5jbHVkZU9ubHkgPT0gJ25vbmUnID8gdGhpcy5zZXR0aW5ncy5wcmltZUVsZW1lbnQgOiB0aGlzLnNldHRpbmdzLmluY2x1ZGVPbmx5O1xyXG4gICAgICAgIC8vIGV4dHJhY3QgXHUzMERFXHUzMEMzXHUzMEMxXHUzMDU5XHUzMDhCXHU5ODA1XHU3NkVFXHUzMDRDXHUzMDQyXHUzMDYzXHUzMDVGXHUzMDRCXHUzMDY5XHUzMDQ2XHUzMDRCXHJcbiAgICAgICAgbGV0IGlzRXh0cmFjdGVkID0gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU4OTgxXHU3RDIwXHUzMDZFXHU2M0NGXHU3NTNCXHUzMDAyZGF0YVtpXVx1MzA0Q1x1ODk4MVx1N0QyMDBcdTMwNkFcdTMwODlcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcclxuICAgICAgICAvL1x1NEU4Q1x1OTFDRFx1MzBFQlx1MzBGQ1x1MzBEN1x1MzA0Qlx1MzA4OVx1NjI5Q1x1MzA1MVx1MzA4Qlx1MzA1Rlx1MzA4MVx1MzBFOVx1MzBEOVx1MzBFQmVsZW1lbnRsb29wXHUzMDkyXHUzMDY0XHUzMDUxXHUzMDVGXHJcbiAgICAgICAgaWYgKGRhdGFbaV0ubGVuZ3RoID4gMCl7XHJcblxyXG4gICAgICAgICAgICBlbGVtZW50bG9vcDogZm9yIChsZXQgaj0wOyBqPGRhdGFbaV0ubGVuZ3RoOyBqKyspe1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFx1NzNGRVx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1ODk4MVx1N0QyMFx1MzA2RVx1N0EyRVx1NTIyNVx1MzA5Mlx1NTNENlx1NUY5N1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGRhdGFbaV1bal0udHlwZU9mRWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLy8vIGluY2x1ZGUgbW9kZVxyXG4gICAgICAgICAgICAgICAgaWYgKGluY2x1ZGVNb2RlICYmIHRoaXMuc2V0dGluZ3MuaW5jbHVkZU9ubHkgPT0gZWxlbWVudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5jbHVkZWQgPT0gdHJ1ZSAmJiBlbGVtZW50ID09ICdoZWFkaW5nJyAmJiBkYXRhW2ldW2pdLmxldmVsID4gaW5jbHVkZU1vZGVIZWFkaW5nTGV2ZWwgICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU0RTBCXHU0RjREXHU4OThCXHU1MUZBXHUzMDU3XHUzMDZFXHU1ODM0XHU1NDA4XHUzMDZGXHU1MUU2XHU3NDA2XHUzMDkyXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU3RDQ0XHUzMDdGXHU1MTY1XHUzMDhDXHUzMDhCXHUzMEVGXHUzMEZDXHUzMEM5XHUzMDZCXHUzMERFXHUzMEMzXHUzMEMxXHUzMDU5XHUzMDhCXHUzMDRCXHU1MjI0XHU1QjlBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5jbHVkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLnNldHRpbmdzLndvcmRzVG9JbmNsdWRlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICggKHZhbHVlKSAmJiBkYXRhW2ldW2pdLmRpc3BsYXlUZXh0LmluY2x1ZGVzKHZhbHVlKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNJbmNsdWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gJ2hlYWRpbmcnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5jbHVkZU1vZGVIZWFkaW5nTGV2ZWwgPSBkYXRhW2ldW2pdLmxldmVsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghaXNJbmNsdWRlZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vLy8gZXhjbHVkZSBtb2RlXHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzRXhjbHVkZWQgfHwgKGlzRXhjbHVkZWQgJiYgKGV4Y2x1ZGVUeXBlID09IGVsZW1lbnQgfHwgcHJpbWVUeXBlID09IGVsZW1lbnQpKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gJ2hlYWRpbmcnICYmIGRhdGFbaV1bal0ubGV2ZWwgPiBleGNsdWRlTW9kZUhlYWRpbmdMZXZlbCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU0RTBCXHU0RjREXHU4OThCXHU1MUZBXHUzMDU3XHUzMDZFXHU1ODM0XHU1NDA4XHUzMDZGXHU1MUU2XHU3NDA2XHUzMDkyXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHRcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0V4Y2x1ZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZVtlbGVtZW50XSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoICh2YWx1ZSkgJiYgZGF0YVtpXVtqXS5kaXNwbGF5VGV4dC5pbmNsdWRlcyh2YWx1ZSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzRXhjbHVkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4Y2x1ZGVUeXBlID0gZWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSAnaGVhZGluZycpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGNsdWRlTW9kZUhlYWRpbmdMZXZlbCA9IGRhdGFbaV1bal0ubGV2ZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gICBcclxuICAgICAgICAgICAgICAgIGlmIChpc0V4Y2x1ZGVkKXtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL1x1ODk4MVx1N0QyMFx1MzA1NFx1MzA2OFx1MzA2RVx1OTc1RVx1ODg2OFx1NzkzQVx1NTIyNFx1NUI5QSAgXHU4QTJEXHU1QjlBXHUzMDY3XHU5NzVFXHU4ODY4XHU3OTNBXHUzMDZCXHUzMDZBXHUzMDYzXHUzMDY2XHUzMDQ0XHUzMDhDXHUzMDcwXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50c1tlbGVtZW50XSA9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gc2ltcGxlIGZpbHRlciBcdTk2NjRcdTU5MTZcdTMwRUZcdTMwRkNcdTMwQzlcdTMwNkJcdTMwREVcdTMwQzNcdTMwQzFcdTMwNTlcdTMwOENcdTMwNzBcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuc2V0dGluZ3Mud29yZHNUb0lnbm9yZVtlbGVtZW50XSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoICh2YWx1ZSkgJiYgZGF0YVtpXVtqXS5kaXNwbGF5VGV4dC5pbmNsdWRlcyh2YWx1ZSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBlbGVtZW50bG9vcDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8vLyBcdTYyQkRcdTUxRkEgZXh0cmFjdFxyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmV4dHJhY3RNb2RlID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5leHRyYWN0VGFzayA9PSBmYWxzZSAmJiAhZGF0YVtpXVtqXS5kaXNwbGF5VGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHRoaXMuc2V0dGluZ3Mud29yZHNUb0V4dHJhY3QudG9Mb3dlckNhc2UoKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZXh0cmFjdFRhc2sgPT0gdHJ1ZSAmJiBkYXRhW2ldW2pdLnRhc2sgPT09IHZvaWQgMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzRXh0cmFjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8vLyBcdTg5ODFcdTdEMjBcdTdBMkVcdTUyMjVcdTMwNTRcdTMwNjhcdTMwNkVcdTUxRTZcdTc0MDZcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gaGVhZGluZ3NcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09ICdoZWFkaW5nJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2NzAwXHU2NUIwXHUzMDZFXHU4OThCXHU1MUZBXHUzMDU3XHUzMEVDXHUzMEQ5XHUzMEVCXHUzMDkyXHU1M0Q2XHU1Rjk3XHJcbiAgICAgICAgICAgICAgICAgICAgbGF0ZXN0SGVhZGluZ0xldmVsID0gZGF0YVtpXVtqXS5sZXZlbDtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTcyNzlcdTVCOUFcdTMwNkVcdTg5OEJcdTUxRkFcdTMwNTdcdTMwRUNcdTMwRDlcdTMwRUJcdTMwNENcdTk3NUVcdTg4NjhcdTc5M0FcdTMwNkVcdTU4MzRcdTU0MDhcdTMwMDFcdThBNzJcdTVGNTNcdTMwNTlcdTMwOENcdTMwNzBcdTMwQjlcdTMwQURcdTMwQzNcdTMwRDdcclxuICAgICAgICAgICAgICAgICAgICBpZiAoICF0aGlzLnNldHRpbmdzLmhlYWRpbmdMZXZlbFtkYXRhW2ldW2pdLmxldmVsIC0gMV0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gbGlua3NcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09ICdsaW5rJyl7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdGFnc1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT0gJ3RhZycpe1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBsaXN0SXRlbXNcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSAnbGlzdEl0ZW1zJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1QjhDXHU0RTg2XHUzMEJGXHUzMEI5XHUzMEFGXHU5NzVFXHU4ODY4XHU3OTNBXHU4QTJEXHU1QjlBXHUzMDY3XHUzMDQyXHUzMDhDXHUzMDcwXHU1QjhDXHU0RTg2XHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZGXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaGlkZUNvbXBsZXRlZFRhc2tzID09IHRydWUgJiYgZGF0YVtpXVtqXS50YXNrID09J3gnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU5NzVFXHUzMEJGXHUzMEI5XHUzMEFGXHU5NzVFXHU4ODY4XHU3OTNBXHU4QTJEXHU1QjlBXHUzMDY3XHUzMDQyXHUzMDhDXHUzMDcwXHU5NzVFXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZGXHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLnRhc2tPbmx5ID09IHRydWUgJiYgZGF0YVtpXVtqXS50YXNrID09PSB2b2lkIDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBcdTk3NUVcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNkVcdTkwMUFcdTVFMzhcdTMwRUFcdTMwQjlcdTMwQzhcdTMwQTJcdTMwQTRcdTMwQzZcdTMwRTBcdTMwMDFcdTMwN0VcdTMwNUZcdTMwNkYgXHUzMEJGXHUzMEI5XHUzMEFGXHUzMDZGXHU1MTY4XHU4ODY4XHU3OTNBXHUzMDZFXHU4QTJEXHU1QjlBXHUzMDY3XHU3MTIxXHUzMDUxXHUzMDhDXHUzMDcwXHUzMEVDXHUzMEQ5XHUzMEVCXHUzMDZCXHU1RkRDXHUzMDU4XHUzMDY2XHUzMEI5XHUzMEFEXHUzMEMzXHUzMEQ3XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNldHRpbmdzLmFsbFRhc2tzID09IGZhbHNlIHx8IGRhdGFbaV1bal0udGFzayA9PT0gdm9pZCAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCAoZGF0YVtpXVtqXS5sZXZlbCA9PSAyKSB8fCAoZGF0YVtpXVtqXS5sZXZlbCA9PTEgJiYgdGhpcy5zZXR0aW5ncy5hbGxSb290SXRlbXMgPT0gZmFsc2UpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU4OTgxXHU3RDIwXHU5MEU4XHU1MjA2XHU0RjVDXHU2MjEwXHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRsaW5lRWw6IEhUTUxFbGVtZW50ID0gZGFpbHlOb3RlQ2hpbGRyZW5FbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY3JlYXRlRGl2KFwidHJlZS1pdGVtIG5hdi1maWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgLy9cdTRFMkRcdThFQUJcdTMwOTJcdThBMkRcdTVCOUFcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dGxpbmVUaXRsZTogSFRNTEVsZW1lbnQgPSBvdXRsaW5lRWwuY3JlYXRlRGl2KFwidHJlZS1pdGVtLXNlbGYgaXMtY2xpY2thYmxlIG5hdi1maWxlLXRpdGxlXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vXHUzMEEyXHUzMEE0XHUzMEIzXHUzMEYzIGljb25cclxuICAgICAgICAgICAgICAgIHN3aXRjaCh0aGlzLnNldHRpbmdzLmljb25bZWxlbWVudF0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vbmUnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdoZWFkaW5nd2l0aG51bWJlcic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24ob3V0bGluZVRpdGxlLCBgaGVhZGluZy0ke2RhdGFbaV1bal0ubGV2ZWx9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2N1c3RvbSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEljb24ob3V0bGluZVRpdGxlLCB0aGlzLnNldHRpbmdzLmN1c3RvbUljb25bZWxlbWVudF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uKG91dGxpbmVUaXRsZSwgdGhpcy5zZXR0aW5ncy5pY29uW2VsZW1lbnRdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwQkZcdTMwQjlcdTMwQUZcdTMwNjBcdTMwNjNcdTMwNUZcdTU4MzRcdTU0MDhcdTMwQTJcdTMwQTRcdTMwQjNcdTMwRjNcdTRFMEFcdTY2RjhcdTMwNERcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09J2xpc3RJdGVtcycgJiYgZGF0YVtpXVtqXS50YXNrICE9PSB2b2lkIDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldW2pdLnRhc2sgPT0gJ3gnKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWNvbihvdXRsaW5lVGl0bGUsIHRoaXMuc2V0dGluZ3MuaWNvbi50YXNrRG9uZSA9PSAnY3VzdG9tJyA/IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5jdXN0b21JY29uLnRhc2tEb25lIDogdGhpcy5zZXR0aW5ncy5pY29uLnRhc2tEb25lKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uKG91dGxpbmVUaXRsZSwgdGhpcy5zZXR0aW5ncy5pY29uLnRhc2sgPT0nY3VzdG9tJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLmN1c3RvbUljb24udGFzayA6IHRoaXMuc2V0dGluZ3MuaWNvbi50YXNrKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VzdG9tU3RhdHVzID0gT2JqZWN0LmtleXModGhpcy5zZXR0aW5ncy50YXNrSWNvbikuZmluZCgoY3VzdG9tU3RhdHVzKT0+IHRoaXMuc2V0dGluZ3MudGFza0ljb25bY3VzdG9tU3RhdHVzXS5zeW1ib2wgPT09IGRhdGFbaV1bal0udGFzayk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1c3RvbVN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJY29uKG91dGxpbmVUaXRsZSwgdGhpcy5zZXR0aW5ncy50YXNrSWNvbltjdXN0b21TdGF0dXNdLmljb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAvLyBzZXRJY29uKG91dGxpbmVUaXRsZSwgdGhpcy5zZXR0aW5ncy50YXNrSWNvbltPYmplY3Qua2V5cyh0aGlzLnNldHRpbmdzLnRhc2tJY29uKS5maW5kKChpY29uTmFtZSk9PiB0aGlzLnNldHRpbmdzLnRhc2tJY29uW2ljb25OYW1lXSA9PT0gZGF0YVtpXVtqXS50YXNrKV0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy9wcmVmaXhcdTMwMDFcdTMwQTRcdTMwRjNcdTMwQzdcdTMwRjNcdTMwQzhcclxuICAgICAgICAgICAgICAgIGxldCBwcmVmaXggPSB0aGlzLnNldHRpbmdzLnByZWZpeFtlbGVtZW50XTtcclxuICAgICAgICAgICAgICAgIGlmICggZWxlbWVudCA9PSAnaGVhZGluZycpe1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5zZXR0aW5ncy5yZXBlYXRIZWFkaW5nUHJlZml4KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbGV2ZWwnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ID0gcHJlZml4LnJlcGVhdChkYXRhW2ldW2pdLmxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsZXZlbG1pbnVzMSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSBwcmVmaXgucmVwZWF0KGRhdGFbaV1bal0ubGV2ZWwgLSAxICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IGluZGVudDogbnVtYmVyID0gMC41O1xyXG4gICAgICAgICAgICAgICAgLy8gXHU4OThCXHU1MUZBXHUzMDU3XHUzMDZFXHUzMEE0XHUzMEYzXHUzMEM3XHUzMEYzXHUzMEM4XHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSdoZWFkaW5nJyAmJiB0aGlzLnNldHRpbmdzLmluZGVudC5oZWFkaW5nID09IHRydWUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGVudCA9IGluZGVudCArIChkYXRhW2ldW2pdLmxldmVsIC0gKG1heExldmVsICsgMSkpKjEuNTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFx1ODk4Qlx1NTFGQVx1MzA1N1x1NEVFNVx1NTkxNlx1MzA2RVx1MzBBNFx1MzBGM1x1MzBDN1x1MzBGM1x1MzBDOFxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgIT0naGVhZGluZycgJiYgdGhpcy5zZXR0aW5ncy5pbmRlbnRGb2xsb3dIZWFkaW5nKXtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhZGRpdGlvbmFsSW5kZW50ID0gKGxhdGVzdEhlYWRpbmdMZXZlbCAtIChtYXhMZXZlbCArIDEpICsgKHRoaXMuc2V0dGluZ3MuaW5kZW50Rm9sbG93SGVhZGluZyA9PSAyID8gMTogMCkpKjEuNTtcclxuICAgICAgICAgICAgICAgICAgICBpbmRlbnQgPSBpbmRlbnQgKyAoYWRkaXRpb25hbEluZGVudCA+IDAgPyBhZGRpdGlvbmFsSW5kZW50IDogMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwRUFcdTMwRjNcdTMwQUZcdTMwNENcdTUyNERcdTMwNkVcdTMwQThcdTMwRUNcdTMwRTFcdTMwRjNcdTMwQzhcdTMwNjhcdTU0MENcdTMwNThcdTg4NENcdTMwNjBcdTMwNjNcdTMwNUZcdTU4MzRcdTU0MDhcdTMwQTRcdTMwRjNcdTMwQzdcdTMwRjNcdTMwQzhcdTRFRDhcdTUyQTBcclxuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09J2xpbmsnICYmIGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZSA9PSBkYXRhW2ldW2otMV0/LnBvc2l0aW9uLnN0YXJ0LmxpbmUpe1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGVudCA9IGluZGVudCArIDEuNTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuc3R5bGUucGFkZGluZ0xlZnQgPSBgJHtpbmRlbnR9ZW1gO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSdsaXN0SXRlbXMnICYmIGRhdGFbaV1bal0udGFzayAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9IGRhdGFbaV1bal0udGFzayA9PSAneCcgPyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucHJlZml4LnRhc2tEb25lIDogdGhpcy5zZXR0aW5ncy5wcmVmaXgudGFzaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYWRkQ2hlY2tib3hUZXh0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9IHByZWZpeCArICdbJytkYXRhW2ldW2pdLnRhc2srJ10gJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGRpc3BUZXh0ID0gdGhpcy5zdHJpcE1hcmtkb3duU3ltcG9sKGRhdGFbaV1bal0uZGlzcGxheVRleHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5jcmVhdGVEaXYoXCJ0cmVlLWl0ZW0taW5uZXIgbmF2LWZpbGUtdGl0bGUtY29udGVudFwiKS5zZXRUZXh0KHByZWZpeCArIGRpc3BUZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBcdTMwQTRcdTMwRjNcdTMwRTlcdTMwQTRcdTMwRjNcdTMwRDdcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcclxuICAgICAgICAgICAgICAgIC8vIFx1MzBFQVx1MzBGM1x1MzBBRlx1MzA2OFx1MzBCRlx1MzBCMFx1MzA2Rlx1MzAwMVx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1ODk4MVx1N0QyMFx1MzA2RVx1MzA0Mlx1MzA2OFx1MzA2Qlx1NjU4N1x1NUI1N1x1NTIxN1x1MzA0Q1x1N0Q5QVx1MzA0Rlx1NTgzNFx1NTQwOFx1MzA1RFx1MzA2RVx1ODg0Q1x1MzA5Mlx1MzBEN1x1MzBFQ1x1MzBEM1x1MzBFNVx1MzBGQ1x1MzAwMVx1MzA1RFx1MzA0Nlx1MzA2N1x1MzA2QVx1MzA1MVx1MzA4Q1x1MzA3MFx1NkIyMVx1MzA2RVx1ODg0Q1x1MzA5Mlx1MzBEN1x1MzBFQ1x1MzBEM1x1MzBFNVx1MzBGQ1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuaW5saW5lUHJldmlldykge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmV2aWV3VGV4dDogc3RyaW5nID0nJztcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKGVsZW1lbnQgPT0gJ2xpbmsnIHx8IGVsZW1lbnQgPT0gJ3RhZycpICYmIGRhdGFbaV1bal0ucG9zaXRpb24uZW5kLmNvbCA8IGluZm9baV0ubGluZXNbIGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQubGluZSBdLmxlbmd0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpZXdUZXh0ID0gaW5mb1tpXS5saW5lc1sgZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lIF0uc2xpY2UoZGF0YVtpXVtqXS5wb3NpdGlvbi5lbmQuY29sKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2aWV3VGV4dCA9ICggZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lIDwgaW5mb1tpXS5udW1PZkxpbmVzIC0xICk/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvW2ldLmxpbmVzWyBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmUgKyAxXSA6IFwiXCI7IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuY3JlYXRlRGl2KFwibmF2LWZpbGUtdGl0bGUtcHJldmlld1wiKS5zZXRUZXh0KHByZXZpZXdUZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIFx1MzBDNFx1MzBGQ1x1MzBFQlx1MzBDMVx1MzBDM1x1MzBEN1x1MzBEN1x1MzBFQ1x1MzBEM1x1MzBFNVx1MzBGQ1xyXG4gICAgICAgICAgICAgICAgLy8gXHUzMDVEXHUzMDZFXHU4OTgxXHU3RDIwXHUzMDZFXHU4ODRDXHUzMDRCXHUzMDg5XHU2QjIxXHUzMDZFXHU4OTgxXHU3RDIwXHUzMDZFXHU1MjREXHUzMDdFXHUzMDY3XHUzMDkyXHUzMEQ3XHUzMEVDXHUzMEQzXHUzMEU1XHUzMEZDXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy50b29sdGlwUHJldmlldyl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByZXZpZXdUZXh0MjpzdHJpbmcgPScnO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1MzA3RVx1MzA1QVx1NkIyMVx1MzA2RVx1ODg2OFx1NzkzQVx1ODk4MVx1N0QyMFx1MzA2RVx1NUYxNVx1NjU3MFx1MzA5Mlx1NzI3OVx1NUI5QVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBlbmRMaW5lOm51bWJlciA9IGluZm9baV0ubnVtT2ZMaW5lcyAtIDE7ICAvL1x1NTIxRFx1NjcxRlx1NTAyNFx1MzA2Rlx1NjU4N1x1N0FFMFx1NjcyQlxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBrID0gaiArMTsgLy8gXHU3M0ZFXHU1NzI4XHUzMDZFXHUzMEEyXHUzMEE2XHUzMEM4XHUzMEU5XHUzMEE0XHUzMEYzXHU1RjE1XHU2NTcwKzFcdTMwNEJcdTMwODlcdTMwRUJcdTMwRkNcdTMwRDdcdTk1OEJcdTU5Q0JcclxuICAgICAgICAgICAgICAgICAgICBlbmRwcmV2aWV3bG9vcDogd2hpbGUgKGs8IGRhdGFbaV0ubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vXHU4ODY4XHU3OTNBXHUzMDU5XHUzMDhCXHUzMEE4XHUzMEVDXHUzMEUxXHUzMEYzXHUzMEM4XHUzMEJGXHUzMEE0XHUzMEQ3XHUzMDY3XHUzMDQyXHUzMDhDXHUzMDcwXHU4ODRDXHUzMDkyXHU1M0Q2XHU1Rjk3XHUzMDU3XHUzMDY2XHUzMEVCXHUzMEZDXHUzMEQ3XHUzMDkyXHU2MjUzXHUzMDYxXHU1MjA3XHUzMDhCXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dFbGVtZW50c1tkYXRhW2ldW2tdLnR5cGVPZkVsZW1lbnRdKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXHUzMDVGXHUzMDYwXHUzMDU3XHU1NDA0XHU3QTJFXHUzMDZFXHU1QjlGXHU5NjlCXHUzMDZCXHUzMDZGXHU5NzVFXHU4ODY4XHU3OTNBXHUzMDY4XHUzMDZBXHUzMDhCXHU2NzYxXHU0RUY2XHUzMDkyXHU2RTgwXHUzMDVGXHUzMDU3XHUzMDY2XHUzMDQ0XHUzMDVGXHUzMDg5XHU2MjUzXHUzMDYxXHU1MjA3XHUzMDg5XHUzMDZBXHUzMDQ0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTMwRUFcdTMwQjlcdTMwQzhcdTMwNkVcdThBMkRcdTVCOUFcdTMwNkJcdTMwODhcdTMwOEJcdTk3NUVcdTg4NjhcdTc5M0FcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhW2ldW2tdLnR5cGVPZkVsZW1lbnQgPT0gJ2xpc3RJdGVtcycgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggZGF0YVtpXVtrXS5sZXZlbCA+PTIgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCh0aGlzLnNldHRpbmdzLmFsbFJvb3RJdGVtcyA9PSBmYWxzZSAmJiBkYXRhW2ldW2tdLmxldmVsID09IDEpICYmICh0aGlzLnNldHRpbmdzLmFsbFRhc2tzID09IGZhbHNlIHx8IGRhdGFbaV1ba10udGFzayA9PT0gdm9pZCAwKSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHRoaXMuc2V0dGluZ3MudGFza09ubHkgJiYgZGF0YVtpXVtrXS50YXNrID09PSB2b2lkIDApIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICh0aGlzLnNldHRpbmdzLmhpZGVDb21wbGV0ZWRUYXNrcyAmJiBkYXRhW2ldW2tdLnRhc2sgPT0gJ3gnKSkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGsrKztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1ODk4Qlx1NTFGQVx1MzA1N1x1MzA2RVx1MzBFQ1x1MzBEOVx1MzBFQlx1MzA2Qlx1MzA4OFx1MzA4Qlx1OTc1RVx1ODg2OFx1NzkzQVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkYXRhW2ldW2tdLnR5cGVPZkVsZW1lbnQgPT0gJ2hlYWRpbmcnICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5oZWFkaW5nTGV2ZWxbZGF0YVtpXVtrXS5sZXZlbCAtIDFdID09IGZhbHNlKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzaW1wbGUgZmlsdGVyXHUzMDZCXHUzMDg4XHUzMDhCXHU5NzVFXHU4ODY4XHU3OTNBXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5zZXR0aW5ncy53b3Jkc1RvSWdub3JlW2RhdGFbaV1ba10udHlwZU9mRWxlbWVudF0pe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiggKHZhbHVlKSAmJiBkYXRhW2ldW2tdLmRpc3BsYXlUZXh0LmluY2x1ZGVzKHZhbHVlKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZSBlbmRwcmV2aWV3bG9vcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kTGluZSA9IGRhdGFbaV1ba10ucG9zaXRpb24uc3RhcnQubGluZSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrKys7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGwgPSBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmU7IGwgPD0gZW5kTGluZTsgbCsrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlld1RleHQyID0gcHJldmlld1RleHQyICsgaW5mb1tpXS5saW5lc1tsXSArJ1xcbic7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1N0E3QVx1ODg0Q1x1MzA5Mlx1OTY2NFx1NTNCQlxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZpZXdUZXh0MiA9IHByZXZpZXdUZXh0Mi5yZXBsYWNlKC9cXG4kfFxcbig/PVxcbikvZywnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmFyaWFMYWJlbCA9IHByZXZpZXdUZXh0MjtcclxuICAgICAgICAgICAgICAgICAgICBvdXRsaW5lVGl0bGUuZGF0YXNldC50b29sdGlwUG9zaXRpb24gPSB0aGlzLnNldHRpbmdzLnRvb2x0aXBQcmV2aWV3RGlyZWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwtZGVsYXknLCcxMCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwtY2xhc3NlcycsJ2RhaWx5LW5vdGUtcHJldmlldycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgICAgIFwiY2xpY2tcIixcclxuICAgICAgICAgICAgICAgICAgICBhc3luYyhldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2aWV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmVkaXRvci5mb2N1cygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZpZXcuZWRpdG9yLnNldEN1cnNvciAoZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lLCBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmNvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3LmVkaXRvci5zY3JvbGxJbnRvVmlldygge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb206IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZTogZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaDowXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0bzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lOiBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNoOjBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZmFsc2VcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy9ob3ZlciBwcmV2aWV3IFxyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3ZlcicsIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdob3Zlci1saW5rJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlOiBEYWlseU5vdGVPdXRsaW5lVmlld1R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvdmVyUGFyZW50OiByb290RWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldEVsOiBvdXRsaW5lVGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmt0ZXh0OiBmaWxlc1tpXS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTp7c2Nyb2xsOiBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmV9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBjb250ZXh0bWVudVxyXG4gICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjb250ZXh0bWVudVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIChldmVudDogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTYyQkRcdTUxRkFcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIkV4dHJhY3RcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNlYXJjaFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeHRyYWN0ID0gZGF0YVtpXVtqXS5kaXNwbGF5VGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdE1vZGUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RUYXNrID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1MzBFQVx1MzBGM1x1MzBBRlx1MzA2MFx1MzA2M1x1MzA1Rlx1MzA4OVx1MzBFQVx1MzBGM1x1MzBBRlx1NTE0OFx1MzA5Mlx1NzZGNFx1NjNBNVx1OTU4Qlx1MzA0RlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWxlbWVudCA9PSdsaW5rJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRUaXRsZShcIk9wZW4gbGlua2VkIGZpbGVcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJsaW5rcy1nb2luZy1vdXRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+e1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGlua2VkRmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KGRhdGFbaV1bal0ubGluaywgZmlsZXNbaV0ucGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigpLm9wZW5GaWxlKGxpbmtlZEZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTY1QjBcdTg5OEZcdTMwQkZcdTMwRDZcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBpbiBuZXcgdGFiXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJmaWxlLXBsdXNcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYygpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZigndGFiJykub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNjcm9sbFRvRWxlbWVudChkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmxpbmUsIGRhdGFbaV1bal0ucG9zaXRpb24uc3RhcnQuY29sKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTUzRjNcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiB0byB0aGUgcmlnaHRcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0SWNvbihcInNlcGFyYXRvci12ZXJ0aWNhbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jKCk9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCdzcGxpdCcpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0VsZW1lbnQoZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lLCBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmNvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9cdTY1QjBcdTg5OEZcdTMwQTZcdTMwQTNcdTMwRjNcdTMwQzlcdTMwQTZcdTMwNkJcdTk1OEJcdTMwNEZcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5hZGRJdGVtKChpdGVtKT0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRpdGxlKFwiT3BlbiBpbiBuZXcgd2luZG93XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oXCJzY2FuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMoKT0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3dpbmRvdycpLm9wZW5GaWxlKGZpbGVzW2ldKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxUb0VsZW1lbnQoZGF0YVtpXVtqXS5wb3NpdGlvbi5zdGFydC5saW5lLCBkYXRhW2ldW2pdLnBvc2l0aW9uLnN0YXJ0LmNvbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuc2hvd0F0TW91c2VFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvL1x1ODk4MVx1N0QyMDBcdTMwNjBcdTMwNjNcdTMwNUZcdTMwNjhcdTMwNERcdTMwNkVcdTUxRTZcdTc0MDZcclxuICAgICAgICAgICAgLy9cdTU0MDRcdTg4NENcdTMwOTJcdTMwQzFcdTMwQTdcdTMwQzNcdTMwQUZcdTMwNTdcdTMwMDFcdTdBN0FcdTg4NENcdTMwNjdcdTMwNkFcdTMwNDRcdTUyMURcdTMwODFcdTMwNkVcdTg4NENcdTMwOTJcdTg4NjhcdTc5M0FcdTMwNTlcdTMwOEIoXHU2MkJEXHU1MUZBXHUzMEUyXHUzMEZDXHUzMEM5XHUzMDY3XHUzMDZGXHU4ODRDXHUzMDhGXHUzMDZBXHUzMDQ0KVxyXG4gICAgICAgICAgICBpZiAodGhpcy5leHRyYWN0TW9kZSA9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGluZm9baV0ubGluZXMubGVuZ3RoOyBqKyspe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5mb1tpXS5saW5lc1tqXSA9PSBcIlwiKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgb3V0bGluZUVsOiBIVE1MRWxlbWVudCA9IGRhaWx5Tm90ZUNoaWxkcmVuRWxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3JlYXRlRGl2KFwidHJlZS1pdGVtIG5hdi1maWxlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRsaW5lVGl0bGU6IEhUTUxFbGVtZW50ID0gb3V0bGluZUVsLmNyZWF0ZURpdihcInRyZWUtaXRlbS1zZWxmIGlzLWNsaWNrYWJsZSBuYXYtZmlsZS10aXRsZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0bGluZVRpdGxlLmNyZWF0ZURpdihcInRyZWUtaXRlbS1pbm5lciBuYXYtZmlsZS10aXRsZS1jb250ZW50XCIpLnNldFRleHQoaW5mb1tpXS5saW5lc1tqXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dGxpbmVUaXRsZS5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXN5bmMoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCkub3BlbkZpbGUoZmlsZXNbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIG5vdGVET01cdTMwNkVcdTVGOENcdTUxRTZcdTc0MDZcclxuICAgICAgIFxyXG4gICAgICAgIC8vIFx1NjI5OFx1MzA4QVx1MzA1Rlx1MzA1Rlx1MzA3RVx1MzA4Q1x1MzA2Nlx1MzA0NFx1MzA4Q1x1MzA3MFx1NUI1MFx1ODk4MVx1N0QyMFx1MzA5Mlx1OTc1RVx1ODg2OFx1NzkzQVx1MzA2Qlx1MzA1OVx1MzA4QlxyXG4gICAgICAgIGlmICh0aGlzLmNvbGxhcHNlQWxsfHwgdGhpcy5zZXR0aW5ncy5maWxlRmxhZz8uW2ZpbGVzW2ldLnBhdGhdPy5mb2xkKXtcclxuICAgICAgICAgICAgZGFpbHlOb3RlRWwuY2xhc3NMaXN0LmFkZCgnaXMtY29sbHBhc2VkJyk7XHJcbiAgICAgICAgICAgIG5vdGVDb2xsYXBzZUljb24uY2xhc3NMaXN0LmFkZCgnaXMtY29sbGFwc2VkJyk7XHJcbiAgICAgICAgICAgIGluZm9baV0uaXNGb2xkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBkYWlseU5vdGVDaGlsZHJlbkVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaW5mb1tpXS5pc0ZvbGRlZCA9ZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLy8gXHU2MkJEXHU1MUZBXHUzMEUyXHUzMEZDXHUzMEM5XHUzMDY3XHU2MkJEXHU1MUZBXHUzMDU3XHUzMDVGXHU4OTgxXHU3RDIwXHUzMDRDXHUzMDZBXHUzMDQ0XHU1ODM0XHU1NDA4XHUzMDAxXHUzMENFXHUzMEZDXHUzMEM4XHU4MUVBXHU0RjUzXHUzMDkyXHU5NzVFXHU4ODY4XHU3OTNBXHUzMDZCXHUzMDAyXHJcbiAgICAgICAgaWYgKHRoaXMuZXh0cmFjdE1vZGUgPT0gdHJ1ZSAmJiBpc0V4dHJhY3RlZCA9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgIGRhaWx5Tm90ZUVsLnJlbW92ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFx1MzBBMlx1MzBBNlx1MzBDOFx1MzBFOVx1MzBBNFx1MzBGM1x1OTBFOFx1NTIwNlx1MzA2RVx1NjNDRlx1NzUzQlx1NUI5Rlx1ODg0Q1xyXG4gICAgdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQoY29udGFpbmVyRWwpO1xyXG59XHJcblxyXG5cclxuIiwgImltcG9ydCB7IFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IERhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyB9IGZyb20gXCIuL21haW5cIjtcclxuXHJcbi8vIGRhdGEuanNvblx1MzA2RWZpbGVGbGFnXHUzMDkyXHU2MzgzXHU5NjY0XHVGRjFBXHU1MDI0XHUzMDRDXHU3QTdBXHU5MTREXHU1MjE3XHUzMDZFXHUzMEQ3XHUzMEVEXHUzMEQxXHUzMEM2XHUzMEEzXHUzMDkyXHU1MjRBXHU5NjY0XHJcbmV4cG9ydCBmdW5jdGlvbiBjbGVhbkZpbGVGbGFnKGZpbGU6VEZpbGUsIHNldHRpbmdzOkRhaWx5Tm90ZU91dGxpbmVTZXR0aW5ncyk6IHZvaWQge1xyXG4gICAgaWYgKE9iamVjdC5rZXlzKHNldHRpbmdzLmZpbGVGbGFnW2ZpbGUucGF0aF0pLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICBkZWxldGUgc2V0dGluZ3MuZmlsZUZsYWdbZmlsZS5wYXRoXTtcclxuICAgIH1cclxufVxyXG5cclxuLy8gZGF0YS5qc29uXHUzMDZFZmlsZUZsYWdcdTMwNkJcdTMwNjRcdTMwNDRcdTMwNjZcdTMwMDFmaWxlLnBhdGhcdTMwNkVcdTMwRDdcdTMwRURcdTMwRDFcdTMwQzZcdTMwQTNcdTMwNkJmbGFnXHUzMDY3XHU2MzA3XHU1QjlBXHUzMDU3XHUzMDVGXHUzMEQ1XHUzMEU5XHUzMEIwXHUzMDRDXHU1QjU4XHU1NzI4XHUzMDU5XHUzMDhCXHUzMDRCXHUzMEMxXHUzMEE3XHUzMEMzXHUzMEFGXHJcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0ZsYWcoZmlsZTpURmlsZSwgZmxhZzogJ2ZvbGQnLCBzZXR0aW5nczogRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gc2V0dGluZ3MuZmlsZUZsYWdbZmlsZS5wYXRoXT8uW2ZsYWddO1xyXG59XHJcblxyXG4vLyBmaWxlRmxhZ1x1MzA2Qlx1NjMwN1x1NUI5QVx1MzA1N1x1MzA1Rlx1MzBENVx1MzBFOVx1MzBCMFx1MzA5Mlx1OEZGRFx1NTJBMFxyXG5leHBvcnQgZnVuY3Rpb24gYWRkRmxhZyhmaWxlOlRGaWxlLCBmbGFnOiAnZm9sZCcsIHNldHRpbmdzOiBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3MpOiB2b2lkIHtcclxuICAgIGlmKCFzZXR0aW5ncy5maWxlRmxhZy5oYXNPd25Qcm9wZXJ0eShmaWxlLnBhdGgpKXtcclxuICAgICAgICBzZXR0aW5ncy5maWxlRmxhZ1tmaWxlLnBhdGhdID0ge307XHJcbiAgICB9XHJcbiAgICBzZXR0aW5ncy5maWxlRmxhZ1tmaWxlLnBhdGhdW2ZsYWddID0gdHJ1ZTtcclxufVxyXG5cclxuLy9maWxlRmxhZ1x1MzA0Qlx1MzA4OVx1NjMwN1x1NUI5QVx1MzA1N1x1MzA1Rlx1MzBENVx1MzBFOVx1MzBCMFx1MzA5Mlx1OTY2NFx1NTNCQlxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlRmxhZyhmaWxlOlRGaWxlLCBmbGFnOiAnZm9sZCcsIHNldHRpbmdzOiBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ3MpOiB2b2lkIHtcclxuICAgIGRlbGV0ZSBzZXR0aW5ncy5maWxlRmxhZ1tmaWxlLnBhdGhdW2ZsYWddO1xyXG4gICAgY2xlYW5GaWxlRmxhZyhmaWxlLCBzZXR0aW5ncyk7XHJcbn1cclxuXHJcbi8vZmlsZUZsYWdcdTMwNkVcdTYzMDdcdTVCOUFcdTMwNTdcdTMwNUZcdTMwRDVcdTMwRTlcdTMwQjBcdTMwOTJcdTMwQzhcdTMwQjBcdTMwRUJcclxuZXhwb3J0IGZ1bmN0aW9uIHRvZ2dsZUZsYWcoZmlsZTpURmlsZSwgZmxhZzogJ2ZvbGQnLCBzZXR0aW5nczogRGFpbHlOb3RlT3V0bGluZVNldHRpbmdzKTogdm9pZCB7XHJcbiAgICBpZiAoY2hlY2tGbGFnKGZpbGUsIGZsYWcsIHNldHRpbmdzKSA9PSB0cnVlKXtcclxuICAgICAgICByZW1vdmVGbGFnKGZpbGUsIGZsYWcsIHNldHRpbmdzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYWRkRmxhZyhmaWxlLCBmbGFnLCBzZXR0aW5ncyk7XHJcbiAgICB9XHJcbn0iLCAiaW1wb3J0IERhaWx5Tm90ZU91dGxpbmVQbHVnaW4sIHsgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gXCJzcmMvbWFpblwiO1xyXG5pbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZCB9IGZyb20gXCJvYnNpZGlhbi1kYWlseS1ub3Rlcy1pbnRlcmZhY2VcIjtcclxuXHJcbmltcG9ydCBtb21lbnQgZnJvbSBcIm1vbWVudFwiO1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBEYWlseU5vdGVPdXRsaW5lU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG4gICAgcGx1Z2luOiBEYWlseU5vdGVPdXRsaW5lUGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IERhaWx5Tm90ZU91dGxpbmVQbHVnaW4pIHtcclxuICAgICAgICBzdXBlciAoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgbGV0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIC8vIFx1MzBDN1x1MzBBNFx1MzBFQVx1MzBGQ1x1MzBDRVx1MzBGQ1x1MzBDOFx1MzA2RVx1MzBDMVx1MzBBN1x1MzBDM1x1MzBBRihwZXJpb2RpYyBub3RlcyBcdTMwNjBcdTMwNTFcdTMwNjdcdTMwODJvblx1MzA2Qlx1MzA2QVx1MzA2M1x1MzA2Nlx1MzA0NFx1MzA4Q1x1MzA3MFx1NTZERVx1OTA3RilcclxuICAgICAgICBpZiAoIWFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1snZGFpbHktbm90ZXMnXT8uZW5hYmxlZCAmJiAhYXBwLnBsdWdpbnMucGx1Z2luc1sncGVyaW9kaWMtbm90ZXMnXSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdihcInNldHRpbmdzLWJhbm5lclwiLCAoYmFubmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBiYW5uZXIuY3JlYXRlRWwoXCJoM1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCJOZWl0aGVyIERhaWx5IE5vdGUgcGx1Z2luIG5vciBQZXJpb2RpYyBOb3RlcyBjb21tdW5pdHkgcGx1Z2luIGlzIGVuYWJsZWRcIixcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiQmFzaWNzXCIsXHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkluaXRpYWwgc2VhcmNoIHR5cGVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJzZWFyY2ggYmFja3dhcmQgZnJvbSB0b2RheSAvIGZvcndhcmQgZnJvbSBhIHNwZWNpZmljIGRhdGVcIilcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiYmFja3dhcmRcIiwgXCJiYWNrd2FyZFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJmb3J3YXJkXCIsXCJmb3J3YXJkXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluaXRpYWxTZWFyY2hUeXBlKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluaXRpYWxTZWFyY2hUeXBlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNlYXJjaCBkdXJhdGlvblwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIm51bWJlciBvZiBkYXlzIHRvIHNlYXJjaCBwZXIgcGFnZSAoZGVmYXVsdCA9IDI4KVwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoU3RyaW5nKERFRkFVTFRfU0VUVElOR1MuZHVyYXRpb24uZGF5KSlcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLmR1cmF0aW9uLmRheSkpXHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8PSAwIHx8IHBhcnNlZCA+PTM2Nil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IERFRkFVTFRfU0VUVElOR1MuZHVyYXRpb24uZGF5XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmR1cmF0aW9uLmRheSA9IHBhcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJbmNsdWRlIGZ1dHVyZSBkYWlseSBub3Rlc1wiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgLnNldERlc2MoXCJpbiBiYWNrd2FyZCBzZWFyY2gsIGluY2x1ZGUgbiBkYXlzIG9mIGZ1dHVyZSBkYWlseSBub3RlcyAoZGVmYXVsdCA9IDUpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ251bWJlcicpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5vZmZzZXQpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3Mub2Zmc2V0KSlcclxuXHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaW5wdXRlZFZhbHVlID0gTnVtYmVyKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0ZWRWYWx1ZSA8IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dGVkVmFsdWUgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaW5wdXRlZFZhbHVlID49MzY2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0ZWRWYWx1ZSA9IDM2NlxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vZmZzZXQgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSx0cnVlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiT25zZXQgZGF0ZVwiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgLnNldERlc2MoXCJvbnNldCBkYXRlIGluIGZvcndhcmQgc2VhcmNoIChZWVlZLU1NLUREKVwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLm9uc2V0KVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbnNldClcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub25zZXQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7ICAgXHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTUxNjVcdTUyOUJcdTU4MzRcdTk3NjJcdTMwNjdcdTMwNkVcdTMwRDBcdTMwRUFcdTMwQzdcdTMwRkNcdTMwQjdcdTMwRTdcdTMwRjNcdTMwMDFcdTY1QURcdTVGRjVcdTIwMjZcclxuICAgICAgICAgICAgICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vbWVudCh2YWx1ZSAsIFwiWVlZWS1NTS1ERFwiKS5pc1ZhbGlkKCkpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub25zZXQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcImludmFsaWQgZGF0ZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJTaG93IGhlYWRpbmdzXCIpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5oZWFkaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmhlYWRpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBsaW5rc1wiKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMubGluaylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saW5rID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyB0YWdzXCIpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy50YWcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMudGFnID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIlNob3cgbGlzdCBpdGVtcyAmIHRhc2tzXCIpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saXN0SXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMubGlzdEl0ZW1zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saXN0SXRlbXMpe1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBhbGwgcm9vdCBsaXN0IGl0ZW1zXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImlmIGRpc2FibGVkLCBvbmx5IHRvcCBpdGVtIG9mIHRoZSBsaXN0IGlzIGRpc3BsYXllZFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFsbFJvb3RJdGVtcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYWxsUm9vdEl0ZW1zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiU2hvdyBhbGwgdGFza3NcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwic2hvdyBhbGwgdGFzayBpdGVtcyByZWdhcmRsZXNzIG9mIHRoZWlyIGxldmVsXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYWxsVGFza3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFsbFRhc2tzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJUYXNrIG9ubHlcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiaWYgZW5hYmxlZCwgbm9ybWFsIGxpc3QgaXRlbXMgYXJlIGhpZGRlblwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRhc2tPbmx5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50YXNrT25seSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiSGlkZSBjb21wbGV0ZWQgdGFza3NcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlQ29tcGxldGVkVGFza3MpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhpZGVDb21wbGV0ZWRUYXNrcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ29sbGFwc2UgYWxsIGF0IHN0YXJ0dXBcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJlbmFibGUgY29sbGFwc2UgYWxsIGZ1bmN0aW9uIGF0IHN0YXJ0dXBcIilcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29sbGFwc2VBbGxBdFN0YXJ0dXApXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb2xsYXBzZUFsbEF0U3RhcnR1cCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFx1ODg2OFx1NzkzQVx1MzA1OVx1MzA4Qlx1NjBDNVx1NTgzMVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiRGlzcGxheSBmaWxlIGluZm9ybWF0aW9uIGZvciBkYWlseSBub3Rlc1wiKVxyXG4gICAgICAgIC5zZXREZXNjKFwiY2hvb3NlIHR5cGUgb2YgZmlsZSBpbmZvcm1hdGlvbiB0byBkaXNwbGF5IHdpdGggdGhlIGZpbGUgbmFtZSBmb3IgZGFpbHkgbm90ZXNcIilcclxuICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaW5lc1wiLFwibGluZXMgb2YgdGhlIG5vdGVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJkYXlzXCIsXCJkYXlzIGZyb20gYmFzZSBkYXRlXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiZG93XCIsXCJkYXkgb2YgdGhlIHdlZWtcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJkb3dzaG9ydFwiLCBcImRheSBvZiB0aGUgd2VlayhzaG9ydClcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJ3ZWVrbnVtYmVyXCIsIFwid2VlayBudW1iZXJcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJ0YWdcIixcImZpcnN0IHRhZ1wiKSAgXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZGlzcGxheUZpbGVJbmZvRGFpbHkpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmRpc3BsYXlGaWxlSW5mb0RhaWx5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wZXJpb2RpY05vdGVzRW5hYmxlZCl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkRpc3BsYXkgZmlsZSBpbmZvcm1hdGlvbiBmb3IgcGVyaW9kaWMgbm90ZXNcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJjaG9vc2UgdHlwZSBvZiBmaWxlIGluZm9ybWF0aW9uIHRvIGRpc3BsYXkgZm9yIHBlcmlvZGljIG5vdGVzIG90aGVyIHRoYW4gZGFpbHkgbm90ZXNcIilcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGluZXNcIixcImxpbmVzIG9mIHRoZSBub3RlXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImRheXNcIixcImRpc3RhbmNlIGZyb20gYmFzZSBkYXRlXCIpICAgLy8gcGVyaW9kaWMgbm90ZXMgXHUzMDZCXHU1QkZFXHU1RkRDXHUzMDU5XHUzMDhCXHUzMDZBXHUzMDg5ZGF5cyBcdTMwNkJcdTk2NTBcdTMwODlcdTMwNkFcdTMwNEZcdTMwNkFcdTMwOEJcdTMwNkVcdTMwNjdkaXN0YW5jZVx1MzA2OFx1MzA1N1x1MzA1RlxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJ0YWdcIixcImZpcnN0IHRhZ1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNwbGF5RmlsZUluZm9QZXJpb2RpYylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kaXNwbGF5RmlsZUluZm9QZXJpb2RpYyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG5cclxuICAgICAgICAvLyB2aWV3XHUzMDkyXHU4ODY4XHU3OTNBXHUzMDU5XHUzMDhCXHU0RjREXHU3RjZFIFx1RkYwOFx1NTNGM1x1MzBCNVx1MzBBNFx1MzBDOVx1MzBEMFx1MzBGQ1x1MzAwMVx1NURFNlx1MzBCNVx1MzBBNFx1MzBDOVx1MzBEMFx1MzBGQ1x1MzAwMVx1MzBFMVx1MzBBNFx1MzBGM1x1MzBEQVx1MzBBNFx1MzBGM1x1RkYwOVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiUG9zaXRpb24gb2YgdGhlIHBsdWdpbiB2aWV3XCIpXHJcbiAgICAgICAgLnNldERlc2MoXCJTcGVjaWZ5IGRlZmF1bHQgcG9zaXRpb24gd2hlcmUgdGhpcyBwbHVnaW4ncyB2aWV3IGFwcGVhcnNcIilcclxuICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwicmlnaHRcIiwgXCJyaWdodCBzaWRlIHBhbmVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsZWZ0XCIsXCJsZWZ0IHNpZGUgcGFuZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInRhYlwiLFwibmV3IHRhYiBpbiBtYWluIHBhbmVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJzcGxpdFwiLFwic3BsaXR0ZWQgcGFuZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInBvcG91dFwiLFwicG9wb3V0IHdpbmRvd1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnZpZXdQb3NpdGlvbilcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mudmlld1Bvc2l0aW9uID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAvLyBQZXJpb2RpYyBOb3Rlc1x1NUJGRVx1NUZEQ1x1MzA2RVx1MzBBQVx1MzBGM1x1MzBBQVx1MzBENVxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiUGVyaW9kaWMgTm90ZXNcIixcclxuICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKCFhcHAucGx1Z2lucy5wbHVnaW5zWydwZXJpb2RpYy1ub3RlcyddKXtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJQZXJpb2RpYyBOb3RlcyBjb21tdW5pdHkgcGx1Z2luIGlzIG5vdCBlbmFibGVkXCIsXHJcbiAgICAgICAgICAgICAgICBjbHM6XCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgdmVyQ2hlY2sgPSAgTnVtYmVyKGFwcC5wbHVnaW5zLnBsdWdpbnNbJ3BlcmlvZGljLW5vdGVzJ10/Lm1hbmlmZXN0LnZlcnNpb24uc3BsaXQoXCIuXCIpWzBdKTtcclxuICAgICAgICAgICAgaWYgKHZlckNoZWNrID49IDEpIHsgICBcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiY2FsZW5kYXIgc2V0c1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZW5hYmxlIGNhbGVuZGFyIHNldHMgZmVhdHVyZS4gWW91IGhhdmUgdG8gYWN0aXZhdGUgYW5kIGNvbmZpZ3VyZSB0aGUgYmV0YSB2ZXJzaW9uIG9mIHRoZSBQZXJpb2RpYyBOb3RlcyBQbHVnaW4gZmlyc3QuXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNhbGVuZGFyU2V0c0VuYWJsZWQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2FsZW5kYXJTZXRzRW5hYmxlZCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcodHJ1ZSx0cnVlLHRydWUpOyAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJwZXJpb2RpYyBub3Rlc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJlbmFibGUgd2Vla2x5L21vbnRobHkvcXVhcnRlcmx5L3llYXJseSBub3Rlcy4gWW91IGhhdmUgdG8gYWN0aXZhdGUgYW5kIGNvbmZpZ3VyZSB0aGUgUGVyaW9kaWMgTm90ZXMgUGx1Z2luIGZpcnN0LlwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wZXJpb2RpY05vdGVzRW5hYmxlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucGVyaW9kaWNOb3Rlc0VuYWJsZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlc2V0U2VhcmNoUmFuZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcodHJ1ZSx0cnVlLHRydWUpOyAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucGVyaW9kaWNOb3Rlc0VuYWJsZWQpe1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIlNlYXJjaCBkdXJhdGlvbiBmb3IgcGVyaW9kaWMgbm90ZXNcIixcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIndlZWtseSBub3Rlc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIm51bWJlciBvZiB3ZWVrcyB0byBzZWFyY2ggcGVyIHBhZ2UgKGRlZmF1bHQgPSAxMilcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdudW1iZXInKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihTdHJpbmcoREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi53ZWVrKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXJhdGlvbi53ZWVrKSlcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHBhcnNlZCA9IHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSwxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQgPD0gMCB8fCBwYXJzZWQgPj0zNjYpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2VkID0gREVGQVVMVF9TRVRUSU5HUy5kdXJhdGlvbi53ZWVrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZHVyYXRpb24ud2VlayA9IHBhcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIm1vbnRobHkgbm90ZXNcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJudW1iZXIgb2YgbW9udGhzIHRvIHNlYXJjaCBwZXIgcGFnZSAoZGVmYXVsdCA9IDEyKVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ251bWJlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFN0cmluZyhERUZBVUxUX1NFVFRJTkdTLmR1cmF0aW9uLm1vbnRoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXJhdGlvbi5tb250aCkpXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJzZWQgPSBwYXJzZUludCgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUsMTApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFyc2VkIDw9IDAgfHwgcGFyc2VkID49MzY2KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IERFRkFVTFRfU0VUVElOR1MuZHVyYXRpb24ubW9udGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXJhdGlvbi5tb250aCA9IHBhcnNlZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVzZXRTZWFyY2hSYW5nZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLHRydWUsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcInF1YXJ0ZXJseSBub3Rlc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcIm51bWJlciBvZiBxdWFydGVycyB0byBzZWFyY2ggcGVyIHBhZ2UgKGRlZmF1bHQgPSA4KVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ251bWJlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFN0cmluZyhERUZBVUxUX1NFVFRJTkdTLmR1cmF0aW9uLnF1YXJ0ZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLmR1cmF0aW9uLnF1YXJ0ZXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyc2VkID0gcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLDEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8PSAwIHx8IHBhcnNlZCA+PTM2Nil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQgPSBERUZBVUxUX1NFVFRJTkdTLmR1cmF0aW9uLnF1YXJ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXJhdGlvbi5xdWFydGVyID0gcGFyc2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwieWVhcmx5IG5vdGVzXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwibnVtYmVyIG9mIHllYXJzIHRvIHNlYXJjaCBwZXIgcGFnZSAoZGVmYXVsdCA9IDEyKVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ251bWJlcicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFN0cmluZyhERUZBVUxUX1NFVFRJTkdTLmR1cmF0aW9uLnllYXIpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLmR1cmF0aW9uLnllYXIpKVxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcGFyc2VkID0gcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlLDEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlZCA8PSAwIHx8IHBhcnNlZCA+PTM2Nil7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQgPSBERUZBVUxUX1NFVFRJTkdTLmR1cmF0aW9uLnllYXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5kdXJhdGlvbi55ZWFyID0gcGFyc2VkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZXNldFNlYXJjaFJhbmdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsdHJ1ZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcImF0dGFjaCBkYXRlIHJhbmdlIHRvIHdlZWtseSBub3Rlc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJkaXNwbGF5IGRhdGUgcmFuZ2UgbmV4dCB0byB3ZWVrbHkgbm90ZXMnIG5hbWVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXR0YWNoV2Vla2x5Tm90ZXNOYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdHRhY2hXZWVrbHlOb3Rlc05hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1x1ODg2OFx1NzkzQVx1MzA1OVx1MzA4Qlx1ODk4Qlx1NTFGQVx1MzA1N1x1MzBFQ1x1MzBEOVx1MzBFQlxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiSGVhZGluZ3NcIixcclxuICAgICAgICAgICAgY2xzOlwic2V0dGluZy1jYXRlZ29yeVwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMuaGVhZGluZyl7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiSGVhZGluZyBsZXZlbCB0byBkaXNwbGF5XCIsXHJcbiAgICAgICAgICAgICAgICBjbHM6XCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhlYWRpbmdMZXZlbC5mb3JFYWNoKCAodmFsdWUsIGluZGV4LCBhcnJ5KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZShgTGV2ZWwkeyBpbmRleCArIDF9YClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oZWFkaW5nTGV2ZWxbaW5kZXhdKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmhlYWRpbmdMZXZlbFsgaW5kZXggXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIlRvIGRpc3BsYXkgdGhpcyBzZWN0aW9uLCBhY3RpdmF0ZSAnU2hvdyBoZWFkaW5ncycgaW4gQmFzaWNzIHNlY3Rpb24uXCIsXHJcbiAgICAgICAgICAgICAgICBjbHM6XCJzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb25cIixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTMwRDdcdTMwRUNcdTMwRDNcdTMwRTVcdTMwRkNcclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIlByZXZpZXdcIixcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJJbmxpbmUgcHJldmlld1wiKVxyXG4gICAgICAgIC5zZXREZXNjKFwiU2hvdyBhIGZldyBzdWJzZXF1ZW50IHdvcmRzIG5leHQgdG8gdGhlIG91dGxpbmUgZWxlbWVudCBuYW1lXCIpXHJcbiAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmlubGluZVByZXZpZXcpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5saW5lUHJldmlldyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJUb29sdGlwIHByZXZpZXdcIilcclxuICAgICAgICAuc2V0RGVzYyhcIlNob3cgc3Vic2VxdWVudCBzZW50ZW5jZXMgYXMgYSB0b29sdGlwIHdoZW4gaG92ZXJcIilcclxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudG9vbHRpcFByZXZpZXcpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudG9vbHRpcFByZXZpZXcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50b29sdGlwUHJldmlldyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIlRvb2x0aXAgcHJldmlldyBkaXJlY3Rpb25cIilcclxuICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwic3BlY2lmeSB0aGUgZGlyZWN0aW9uIHRvIGRpc3BsYXkgdG9vbHRpcCBwcmV2aWV3XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxlZnRcIiwgXCJsZWZ0XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcInJpZ2h0XCIsXCJyaWdodFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJib3R0b21cIixcImJvdHRvbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJ0b3BcIixcInRvcFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50b29sdGlwUHJldmlld0RpcmVjdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudG9vbHRpcFByZXZpZXdEaXJlY3Rpb24gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHUzMEQ1XHUzMEEzXHUzMEVCXHUzMEJGXHUzMEZDXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJTaW1wbGUgZmlsdGVyXCIsXHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5oZWFkaW5nKXtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiSGVhZGluZ3MgdG8gaWdub3JlXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiSGVhZGluZ3Mgd2hpY2ggaW5jbHVkZSBsaXN0ZWQgd29yZHMgd2lsbCBub3QgYmUgZGlzcGxheWVkLiBTZXBhcmF0ZSB3aXRoIGEgbmV3IGxpbmUuXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dEFyZWEpID0+e1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0lnbm9yZS5oZWFkaW5nLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JZ25vcmUuaGVhZGluZyA9IGlucHV0ZWRWYWx1ZS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmxpbmspe1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJMaW5rcyB0byBpZ25vcmVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJMaW5rcyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvSWdub3JlLmxpbmsuam9pbignXFxuJykpO1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCApID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0lnbm9yZS5saW5rID0gaW5wdXRlZFZhbHVlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMudGFnKXtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiVGFncyB0byBpZ25vcmVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJ0YWdzIHdoaWNoIGluY2x1ZGUgbGlzdGVkIHdvcmRzIHdpbGwgbm90IGJlIGRpc3BsYXllZC4gU2VwYXJhdGUgd2l0aCBhIG5ldyBsaW5lLlwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEoKHRleHRBcmVhKSA9PntcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JZ25vcmUudGFnLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JZ25vcmUudGFnID0gaW5wdXRlZFZhbHVlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMubGlzdEl0ZW1zKXtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiTGlzdCBpdGVtcyB0byBpZ25vcmVcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJMaXN0IGl0ZW1zIHdoaWNoIGluY2x1ZGUgbGlzdGVkIHdvcmRzIHdpbGwgbm90IGJlIGRpc3BsYXllZC4gU2VwYXJhdGUgd2l0aCBhIG5ldyBsaW5lLlwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEoKHRleHRBcmVhKSA9PntcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JZ25vcmUubGlzdEl0ZW1zLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JZ25vcmUubGlzdEl0ZW1zID0gaW5wdXRlZFZhbHVlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEluY2x1ZGUgLyBFeGNsdWRlXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJJbmNsdWRlXCIsXHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIklmIHlvdSBzcGVjaWZ5IG9uZSBvdXRsaW5lIGVsZW1lbnQgdHlwZSBhbmQgd29yZHMgdG8gaW5jbHVkZSwgb25seSBlbGVtZW50cyB3aGljaCBiZWxvbmcgdG8gdGhlIGluY2x1ZGVkIGVsZW1lbnRzIGFyZSBkaXNwbGF5ZWQuXCIsXHJcbiAgICAgICAgICAgIGNsczpcInNldHRpbmctaXRlbS1kZXNjcmlwdGlvblwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCIqKk5PVEUqKjogSWYgSW5jbHVkZSBmaWx0ZXIgaXMgc2V0IGluY29ycmVjdGx5LCBhIG51bWJlciBvZiBvdXRsaW5lcyBtYXkgbm90IGJlIGRpc3BsYXllZC4gSW4gc3VjaCBhIGNhc2UsIHRyeSBzZXR0aW5nICdFbGVtZW50IHR5cGUgZm9yIGluY2x1ZGUnIHRvICdubyBJbmNsdWRlIGZpbHRlcicuXCIsXHJcbiAgICAgICAgICAgIGNsczpcInNldHRpbmctaXRlbS1kZXNjcmlwdGlvblwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC5zZXROYW1lKFwiRWxlbWVudCB0eXBlIGZvciBpbmNsdWRlXCIpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJubyBJbmNsdWRlIGZpbHRlclwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImhlYWRpbmdcIixcImhlYWRpbmdcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaW5rXCIsXCJsaW5rXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidGFnXCIsXCJ0YWdcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaXN0SXRlbXNcIixcImxpc3RJdGVtc1wiKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVPbmx5KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlT25seSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZU9ubHkgIT0gJ25vbmUnKXtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiV29yZHMgdG8gaW5jbHVkZVwiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgLnNldERlc2MoXCJPbmx5IGVsZW1lbnRzIHNwZWNpZmllZCBpbiAnRWxlbWVudCB0eXBlIGZvciBpbmNsdWRlJyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyB3aWxsIGJlIGRpc3BsYXllZC4gU2VwYXJhdGUgd2l0aCBhIG5ldyBsaW5lLlwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEoKHRleHRBcmVhKSA9PntcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JbmNsdWRlLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9JbmNsdWRlID0gaW5wdXRlZFZhbHVlLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkluY2x1ZGUgdGhlIGJlZ2lubmluZyBwYXJ0XCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcygnc2V0dGluZy1pbmRlbnQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlNwZWNpZnkgd2hldGhlciB0byBpbmNsdWRlIHRoZSBiZWdpbm5pbmcgcGFydHMgb2YgZWFjaCBkYWlseSBub3RlIHdpdGggbm8gZWxlbWVudCB0byBpbmNsdWRlIFwiKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlQmVnaW5uaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZUJlZ2lubmluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJFeGNsdWRlXCIsXHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIlNwZWNpZmllZCBvdXRsaW5lIGVsZW1lbnRzIGFuZCBlbGVtZW50cyBiZWxvbmdpbmcgdG8gdGhhdCBlbGVtZW50IHdpbGwgbm90IGJlIGRpc3BsYXllZC5cIixcclxuICAgICAgICAgICAgY2xzOlwic2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uXCIsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJFeGNsdXNpb24gZW5kcyBhdFwiKVxyXG4gICAgICAgIC5zZXREZXNjKFwiRXhjbHVkaW5nIGVsZW1lbnRzIHNwZWNpZmllZCBiZWxvdyBlbmRzIGF0IHRoZSBzZWxlY3RlZCB0eXBlIG9mIGVsZW1lbnRzLiBJZiB5b3Ugc3BlY2lmaWVkICdFbGVtZW50IHR5cGUgZm9yIGluY2x1ZGUnIGFib3ZlLCB0aGlzIHZhbHVlIGlzIGlnbm9yZWQgYW5kIGV4Y2x1ZGVpbmcgZWxlbWVudHMgZW5kcyBhdCB0aGF0IHR5cGUgb2YgZWxlbWVudHMuXCIpXHJcbiAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiaGVhZGluZ1wiLFwiaGVhZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxpbmtcIixcImxpbmtcIilcclxuICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJ0YWdcIixcInRhZ1wiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxpc3RJdGVtc1wiLFwibGlzdEl0ZW1zXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJpbWVFbGVtZW50KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmltZUVsZW1lbnQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5oZWFkaW5nKXtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiSGVhZGluZ3MgdG8gZXhjbHVkZVwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkhlYWRpbmdzIHdoaWNoIGluY2x1ZGUgbGlzdGVkIHdvcmRzIGFuZCBlbGVtZW50cyB3aGljaCBiZWxvbmcgdG8gdGhlbSB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS5oZWFkaW5nLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeGNsdWRlLmhlYWRpbmcgPSBpbnB1dGVkVmFsdWUuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saW5rKXtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiTGlua3MgdG8gZXhjbHVkZVwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkxpbmtzIHdoaWNoIGluY2x1ZGUgbGlzdGVkIHdvcmRzIGFuZCBlbGVtZW50cyB3aGljaCBiZWxvbmcgdG8gdGhlbSB3aWxsIG5vdCBiZSBkaXNwbGF5ZWQuIFNlcGFyYXRlIHdpdGggYSBuZXcgbGluZS5cIilcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKCh0ZXh0QXJlYSkgPT57XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS5saW5rLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeGNsdWRlLmxpbmsgPSBpbnB1dGVkVmFsdWUuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RWxlbWVudHMudGFnKXtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiVGFncyB0byBleGNsdWRlXCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwidGFncyB3aGljaCBpbmNsdWRlIGxpc3RlZCB3b3JkcyBhbmQgZWxlbWVudHMgd2hpY2ggYmVsb25nIHRvIHRoZW0gd2lsbCBub3QgYmUgZGlzcGxheWVkLiBTZXBhcmF0ZSB3aXRoIGEgbmV3IGxpbmUuXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSgodGV4dEFyZWEpID0+e1xyXG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mud29yZHNUb0V4Y2x1ZGUudGFnLmpvaW4oJ1xcbicpKTtcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQgKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeGNsdWRlLnRhZyA9IGlucHV0ZWRWYWx1ZS5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmxpc3RJdGVtcyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkxpc3QgaXRlbXMgdG8gZXhjbHVkZVwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIkxpc3QgaXRlbXMgd2hpY2ggaW5jbHVkZSBsaXN0ZWQgd29yZHMgYW5kIGVsZW1lbnRzIHdoaWNoIGJlbG9uZyB0byB0aGVtIHdpbGwgbm90IGJlIGRpc3BsYXllZC4gU2VwYXJhdGUgd2l0aCBhIG5ldyBsaW5lLlwiKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEoKHRleHRBcmVhKSA9PntcclxuICAgICAgICAgICAgICAgIHRleHRBcmVhLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLndvcmRzVG9FeGNsdWRlLmxpc3RJdGVtcy5qb2luKCdcXG4nKSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0QXJlYS5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50ICkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy53b3Jkc1RvRXhjbHVkZS5saXN0SXRlbXMgPSBpbnB1dGVkVmFsdWUuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHU1OTE2XHU4OUIzXHJcbiAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcImg0XCIsIHtcclxuICAgICAgICAgICAgdGV4dDogXCJBcHBlYXJhbmNlXCIsXHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIGhlYWRpbmdcdTMwNkVcdTMwQTRcdTMwRjNcdTMwQzdcdTMwRjNcdTMwQzhcdTMwRUNcdTMwRDlcdTMwRUJcdTMwNkJcdTMwNDJcdTMwOEZcdTMwNUJcdTMwNjZcdTRFRDZcdTMwNkVcdTg5ODFcdTdEMjBcdTMwOTJcdTMwQTRcdTMwRjNcdTMwQzdcdTMwRjNcdTMwQzhcdTMwNTlcdTMwOEJcdTMwNEJcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIkluZGVudCBvdGhlciB0aGFuIGhlYWRpbmdzXCIpXHJcbiAgICAgICAgLnNldERlc2MoXCJXaGV0aGVyIG90aGVyIGVsZW1lbnRzIHNob3VsZCBiZSBpbmRlbnRlZCB0byBwcmVjZWRpbmcgaGVhZGluZ3NcIilcclxuICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiMFwiLFwibm9uZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIjFcIixcImZvbGxvdyBwcmVjZWRpbmcgaGVhZGluZ1wiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIjJcIixcInByZWNlZGluZyBoZWFkaW5nICsgMVwiKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRlbnRGb2xsb3dIZWFkaW5nKSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRlbnRGb2xsb3dIZWFkaW5nID0gTnVtYmVyKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gXHUzMENFXHUzMEZDXHUzMEM4XHUzMEJGXHUzMEE0XHUzMEM4XHUzMEVCXHUzMDZFXHU4MENDXHU2NjZGXHU4MjcyXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLnNldE5hbWUoXCJOb3RlIHRpdGxlIGJhY2tncm91bmQgY29sb3JcIilcclxuICAgICAgICAuc2V0RGVzYyhcIk5vIGNoYW5nZTogdXNlIHRoZSBjdXJyZW50IENTUyB0aGVtZSBzZXR0aW5nIHZhbHVlcy4gQWNjZW50OiBoaWdobGlnaHQgZmlsZSBuYW1lcy4gQ3VzdG9tOiBTcGVjaWZ5IGFueSBjb2xvciBjb2RlLiBQbGVhc2UgdXBkYXRlIHRoZSB2aWV3IHdoZW4geW91IHRvZ2dsZWQgT2JzaWRpYW4ncyBiYXNlIHRoZW1lKGxpZ2h0L2RhcmspLiAoZGVmYXVsdCA9IG5vIGNoYW5nZSlcIilcclxuICAgICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vIGNoYW5nZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImFjY2VudFwiLFwiYWNjZW50XCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY3VzdG9tXCIsXCJjdXN0b21cIilcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3IpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mubm90ZVRpdGxlQmFja2dyb3VuZENvbG9yID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ub3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3IgPT0nY3VzdG9tJyl7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBub3RlIHRpdGxlIGJhY2tncm91bmQgY29sb3IgKGxpZ2h0KVwiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudFwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlNwZWNpZnkgYmFja2dyb3VuZCBjb2xvciAoZXguICNGRkZGRkYgb3IgcmdiKDI1NSwyNTUsMjU1KSlcIilcclxuICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbU5vdGVUaXRsZUJhY2tncm91bmRDb2xvci5jdXN0b20ubGlnaHQpO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3IuY3VzdG9tLmxpZ2h0ID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIG5vdGUgdGl0bGUgYmFja2dyb3VuZCBjb2xvciAobGlnaHQsIG9uIGhvdmVyKVwiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudFwiKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhcIlNwZWNpZnkgYmFja2dyb3VuZCBjb2xvciBvbiBob3ZlciAoZXguICNGRkZGRkYgb3IgcmdiKDI1NSwyNTUsMjU1KSlcIilcclxuICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbU5vdGVUaXRsZUJhY2tncm91bmRDb2xvckhvdmVyLmN1c3RvbS5saWdodCk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbU5vdGVUaXRsZUJhY2tncm91bmRDb2xvckhvdmVyLmN1c3RvbS5saWdodCA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIG5vdGUgdGl0bGUgYmFja2dyb3VuZCBjb2xvciAoZGFyaylcIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJTcGVjaWZ5IGJhY2tncm91bmQgY29sb3IgKGV4LiAjRkZGRkZGIG9yIHJnYigyNTUsMjU1LDI1NSkpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3IuY3VzdG9tLmRhcmspO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KT0+e1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3IuY3VzdG9tLmRhcmsgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJDdXN0b20gbm90ZSB0aXRsZSBiYWNrZ3JvdW5kIGNvbG9yIChkYXJrLCBvbiBob3ZlcilcIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLnNldERlc2MoXCJTcGVjaWZ5IGJhY2tncm91bmQgY29sb3Igb24gaG92ZXIgKGV4LiAjRkZGRkZGIG9yIHJnYigyNTUsMjU1LDI1NSkpXCIpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21Ob3RlVGl0bGVCYWNrZ3JvdW5kQ29sb3JIb3Zlci5jdXN0b20uZGFyayk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpPT57XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbU5vdGVUaXRsZUJhY2tncm91bmRDb2xvckhvdmVyLmN1c3RvbS5kYXJrID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHUzMEM3XHUzMEE0XHUzMEVBXHUzMEZDXHUzMENFXHUzMEZDXHUzMEM4XHJcbiAgICAgICAgLy8gdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgIC8vICAgICB0ZXh0OiBcIk5vdGVzXCIsXHJcbiAgICAgICAgLy8gICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgLy8gfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgLy8gLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgLy8gLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAvLyAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XHJcbiAgICAgICAgLy8gICAgIGRyb3Bkb3duXHJcbiAgICAgICAgLy8gICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAvLyAgICAgICAgIC5hZGRPcHRpb24oXCJmaWxlXCIsXCJmaWxlXCIpXHJcbiAgICAgICAgLy8gICAgICAgICAuYWRkT3B0aW9uKFwiY2FsZW5kYXJcIixcImNhbGVuZGFyXCIpXHJcbiAgICAgICAgLy8gICAgICAgICAuYWRkT3B0aW9uKFwiY2FsZW5kYXItZGF5c1wiLFwiY2FsZW5kYXItZGF5c1wiKVxyXG4gICAgICAgIC8vICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24ubm90ZSlcclxuICAgICAgICAvLyAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLm5vdGUgPSB2YWx1ZTtcclxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgIC8vICAgICAgICAgfSlcclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgLy8gaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24ubm90ZSA9PSAnY3VzdG9tJyl7XHJcbiAgICAgICAgLy8gICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgIC8vICAgICAuc2V0TmFtZShcIkN1c3RvbSBpY29uXCIpXHJcbiAgICAgICAgLy8gICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50LTJcIilcclxuICAgICAgICAvLyAgICAgLnNldERlc2MoXCJlbnRlciBMdWNpZGUgSWNvbiBuYW1lXCIpXHJcbiAgICAgICAgLy8gICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgIC8vICAgICAgICAgdGV4dFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmN1c3RvbUljb24ubm90ZSlcclxuICAgICAgICAvLyAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi5ub3RlKTtcclxuICAgICAgICAvLyAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgIC8vICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAvLyAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLm5vdGUgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgLy8gICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAvLyAgICAgICAgIH07XHJcbiAgICAgICAgLy8gICAgIH0pO1xyXG4gICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gXHU4OThCXHU1MUZBXHUzMDU3XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5oZWFkaW5nKXtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJIZWFkaW5nc1wiLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkljb25cIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAvLy5hZGRPcHRpb24oXCJoZWFkaW5nXCIsXCJoZWFkaW5nXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImhhc2hcIixcImhhc2hcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY2hldnJvbi1yaWdodFwiLFwiY2hldnJvbi1yaWdodFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC8vLmFkZE9wdGlvbihcImhlYWRpbmd3aXRobnVtYmVyXCIsXCJoZWFkaW5nIHdpdGggbnVtYmVyXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImN1c3RvbVwiLFwiY3VzdG9tXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24uaGVhZGluZylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLmhlYWRpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24uaGVhZGluZyA9PSAnY3VzdG9tJyl7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIGljb25cIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50LTJcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZW50ZXIgTHVjaWRlIEljb24gbmFtZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MuY3VzdG9tSWNvbi5oZWFkaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi5oZWFkaW5nKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLmhlYWRpbmcgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlByZWZpeFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLnByZWZpeC5oZWFkaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZml4LmhlYWRpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC5oZWFkaW5nID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC5oZWFkaW5nICE9ICcnKXtcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiUmVwZWF0IGhlYWRpbmcgcHJlZml4XCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnQtMlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJub25lXCIsIFwibm9uZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxldmVsXCIsXCJhcyBtYW55IHRpbWVzIGFzIGl0cyBsZXZlbFwiKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxldmVsbWludXMxXCIsXCJsZXZlbCAtIDFcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBlYXRIZWFkaW5nUHJlZml4KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBlYXRIZWFkaW5nUHJlZml4ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQWRkIGluZGVudFwiKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ3NldHRpbmctaW5kZW50JylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0b2dnbGVcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZW50LmhlYWRpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRlbnQuaGVhZGluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gXHUzMEVBXHUzMEYzXHUzMEFGXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dFbGVtZW50cy5saW5rKXtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJMaW5rc1wiLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkljb25cIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGlua1wiLFwibGlua1wiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJsaW5rLTJcIixcImxpbmstMlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJjdXN0b21cIixcImN1c3RvbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLmxpbmspXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5saW5rID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLmxpbmsgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBpY29uXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVudGVyIEx1Y2lkZSBJY29uIG5hbWVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmN1c3RvbUljb24ubGluaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24ubGluayk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi5saW5rID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJQcmVmaXhcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5wcmVmaXgubGluaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC5saW5rKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcmVmaXgubGluayA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTMwQkZcdTMwQjBcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLnRhZyl7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJwXCIsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IFwiVGFnc1wiLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkljb25cIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwidGFnXCIsXCJ0YWdcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiaGFzaFwiLFwiaGFzaFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJjdXN0b21cIixcImN1c3RvbVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRhZylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRhZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi50YWcgPT0gJ2N1c3RvbScpe1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIkN1c3RvbSBpY29uXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudC0yXCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYyhcImVudGVyIEx1Y2lkZSBJY29uIG5hbWVcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmN1c3RvbUljb24udGFnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi50YWcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24udGFnID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJQcmVmaXhcIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5wcmVmaXgudGFnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZml4LnRhZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZml4LnRhZyA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBcdTMwRUFcdTMwQjlcdTMwQzhcclxuICAgICAgICBcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0VsZW1lbnRzLmxpbmspe1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIkxpc3QgaXRlbXNcIixcclxuICAgICAgICAgICAgICAgIGNsczogJ3NldHRpbmctY2F0ZWdvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoXCJJY29uXCIpXHJcbiAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50XCIpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcIm5vbmVcIiwgXCJub25lXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImxpc3RcIixcImxpc3RcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY2hldnJvbi1yaWdodFwiLFwiY2hldnJvbi1yaWdodFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJtaW51c1wiLFwibWludXNcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY2lyY2xlLWRvdFwiLFwiY2lyY2xlLWRvdFwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oXCJhc3Rlcmlza1wiLFwiYXN0ZXJpc2tcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY3VzdG9tXCIsXCJjdXN0b21cIilcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5saXN0SXRlbXMpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi5saXN0SXRlbXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24ubGlzdEl0ZW1zID09ICdjdXN0b20nKXtcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoXCJDdXN0b20gaWNvblwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnQtMlwiKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoXCJlbnRlciBMdWNpZGUgSWNvbiBuYW1lXCIpXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zZXRBdHRyKCd0eXBlJywnc3RyaW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5jdXN0b21JY29uLmxpc3RJdGVtcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24ubGlzdEl0ZW1zKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLmxpc3RJdGVtcyA9IGlucHV0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiUHJlZml4XCIpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q2xhc3MoXCJzZXR0aW5nLWluZGVudFwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MucHJlZml4Lmxpc3RJdGVtcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC5saXN0SXRlbXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC5saXN0SXRlbXMgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udmlldy5yZWZyZXNoVmlldyhmYWxzZSxmYWxzZSx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy9cdTY3MkFcdTVCOENcdTRFODZcdTMwQkZcdTMwQjlcdTMwQUZcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJFbC5jcmVhdGVFbChcInBcIiwge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogXCJUYXNrc1wiLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkljb25cIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwic3F1YXJlXCIsXCJzcXVhcmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY2lyY2xlXCIsXCJjaXJjbGVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibGlzdC1jaGVja3NcIixcImxpc3QtY2hlY2tzXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImN1c3RvbVwiLFwiY3VzdG9tXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24udGFzaylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uLnRhc2sgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24udGFzayA9PSAnY3VzdG9tJyl7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIGljb25cIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50LTJcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZW50ZXIgTHVjaWRlIEljb24gbmFtZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MuY3VzdG9tSWNvbi50YXNrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tSWNvbi50YXNrKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwub25ibHVyID0gYXN5bmMgKGU6IEZvY3VzRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5wdXRlZFZhbHVlID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXN0b21JY29uLnRhc2sgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlByZWZpeFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLnByZWZpeC50YXNrKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZml4LnRhc2spO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50YXNrID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKFwiQWRkIGNoZWNrYm94IHRleHQgdG8gcHJlZml4XCIpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKFwiYWRkIFsgXSBvciBbeF1cIilcclxuICAgICAgICAgICAgLnNldENsYXNzKCdzZXR0aW5nLWluZGVudCcpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFkZENoZWNrYm94VGV4dClcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFkZENoZWNrYm94VGV4dCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvL1x1NUI4Q1x1NEU4Nlx1NkUwOFx1MzA3Rlx1MzBCRlx1MzBCOVx1MzBBRlxyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwicFwiLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBcIkNvbXBsZXRlZCB0YXNrc1wiLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShcIkljb25cIilcclxuICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwibm9uZVwiLCBcIm5vbmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY2hlY2stc3F1YXJlXCIsXCJjaGVjay1zcXVhcmVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY2hlY2stY2lyY2xlXCIsXCJjaGVjay1jaXJjbGVcIilcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKFwiY2hlY2tcIixcImNoZWNrXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbihcImN1c3RvbVwiLFwiY3VzdG9tXCIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb24udGFza0RvbmUpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi50YXNrRG9uZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvbi50YXNrRG9uZSA9PSAnY3VzdG9tJyl7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKFwiQ3VzdG9tIGljb25cIilcclxuICAgICAgICAgICAgICAgIC5zZXRDbGFzcyhcInNldHRpbmctaW5kZW50LTJcIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZW50ZXIgTHVjaWRlIEljb24gbmFtZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQoKHRleHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc2V0QXR0cigndHlwZScsJ3N0cmluZycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MuY3VzdG9tSWNvbi50YXNrRG9uZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24udGFza0RvbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5vbmJsdXIgPSBhc3luYyAoZTogRm9jdXNFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnB1dGVkVmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUljb24udGFza0RvbmUgPSBpbnB1dGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcIlByZWZpeFwiKVxyXG4gICAgICAgICAgICAgICAgLnNldENsYXNzKFwic2V0dGluZy1pbmRlbnRcIilcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KCh0ZXh0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnNldEF0dHIoJ3R5cGUnLCdzdHJpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLnByZWZpeC50YXNrRG9uZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByZWZpeC50YXNrRG9uZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLm9uYmx1ciA9IGFzeW5jIChlOiBGb2N1c0V2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ZWRWYWx1ZSA9IChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJlZml4LnRhc2tEb25lID0gaW5wdXRlZFZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICBcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZUVsKFwiaDRcIiwge1xyXG4gICAgICAgICAgICB0ZXh0OiBcIk90aGVyc1wiLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIlNob3cgb25seSAubWQgZmlsZXNcIilcclxuICAgICAgICAuc2V0RGVzYyhcIlR1cm4gb24gaWYgbm9uLW1kIGZpbGVzIGFyZSBkaXNwbGF5ZWQgaW4gdGhlIHZpZXdcIilcclxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWFya2Rvd25Pbmx5KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1hcmtkb3duT25seSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnZpZXcucmVmcmVzaFZpZXcoZmFsc2UsZmFsc2UsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAuc2V0TmFtZShcIlNob3cgb25seSBleGFjdGx5IG1hdGNoZWQgZmlsZXNcIilcclxuICAgICAgICAuc2V0RGVzYyhcIlR1cm4gb24gaWYgeW91IGRvIG5vdCB3YW50IHRvIHNlZSBmaWxlcyB0aGF0IGRvIG5vdCBleGFjdGx5IG1hdGNoIHRoZSBmb3JtYXRcIilcclxuICAgICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcclxuICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhhY3RNYXRjaE9ubHkpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhhY3RNYXRjaE9ubHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi52aWV3LnJlZnJlc2hWaWV3KGZhbHNlLGZhbHNlLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRWwoXCJoNFwiLCB7XHJcbiAgICAgICAgICAgIHRleHQ6IFwiRGVidWdcIixcclxuICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZShcInNob3cgZGVidWcgaW5mb3JtYXRpb25cIilcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKFwiZGlzcGxheSBkZWJ1ZyBpbmZvcm1hdGlvbiBpbiB0aGUgY29uc29sZVwiKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RGVidWdJbmZvKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93RGVidWdJbmZvID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUVBLFdBQU8sZUFBZSxTQUFTLGNBQWMsRUFBRSxPQUFPO0FBRXRELFFBQUksV0FBVyxRQUFRO0FBRXZCLFFBQU0sNEJBQTRCO0FBQ2xDLFFBQU0sNkJBQTZCO0FBQ25DLFFBQU0sOEJBQThCO0FBQ3BDLFFBQU0sZ0NBQWdDO0FBQ3RD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
